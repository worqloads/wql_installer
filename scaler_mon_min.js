var a1a=['restart_time','agent_moni','forEach','object','cpu','gtw_url','post','spawn','mem_used','push','memory','push\x20moni:','I\x20Scaler\x20Mon\x20!\x20About\x20to\x20exit\x20with\x20code\x20','env','existsSync','catch','/instance/','://','pm2','default','metrics_caches','jlist','pm_uptime','\x20gauge\x0a','end','child_process','async','pushInstance','apply','length','pm2_env','gateway','cron','credentials','/agent/','data','compile','#\x20TYPE\x20','/metrics/job/','parse','NODE_ENV','online','{instance=\x22','monit','production','USER','prototype','error','each','readFileSync','set','E\x20missing\x20configuration\x20file:','agent','host','log','keys','json_res:','\x22,user=\x22','return\x20/\x22\x20+\x20this\x20+\x20\x22/','code','stdout','CronJob','/moni','pm2-logrotate','exit','\x22,scaler=\x22','0\x20*/5\x20*\x20*\x20*\x20*','port','finally','filter','status'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a1a,0x1d1));var a1b=function(a,b){a=a-0x0;var c=a1a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i[a1b('0x3c')](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g['constructor'](a1b('0x13'))()[a1b('0x44')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!h['test'](f);};return g();});f();return c&&typeof c===a1b('0x23')&&a1b('0x33')in c?c[a1b('0x33')]:c;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require(a1b('0x40')));var child_process=_interopDefault(require(a1b('0x39')));var axios=_interopDefault(require('axios'));var async=_interopDefault(require(a1b('0x3a')));var config_file=__dirname+'/conf.json';try{if(!fs[a1b('0x2e')](config_file)){console['error'](a1b('0xc'),config_file);throw{'code':0x2};}else{var localconf=JSON[a1b('0x0')](fs[a1b('0xa')](config_file));var myenv=process[a1b('0x2d')][a1b('0x1')]||a1b('0x5');scaler_mon(localconf[myenv]);}}catch(a1c){console[a1b('0x8')]('Exception\x20raised:',a1c[a1b('0x14')]||a1c);process[a1b('0x19')](0x1);}process['on'](a1b('0x19'),function(a){return console[a1b('0xf')](a1b('0x2c')+a);});function scaler_mon(a){function b(h){this[a1b('0x25')]=h;this[a1b('0x34')]={};}b[a1b('0x7')]={'Constructor':b,'pushInstance':function h(i,j,k){var l=this;var m=Object[a1b('0x10')](l['metrics_caches'])[a1b('0x1e')](function(n){return l[a1b('0x34')][n][a1b('0x3d')]>0x0;});async[a1b('0x9')](m,function(n,o){var p=a1b('0x45')+n+a1b('0x37')+l[a1b('0x34')][n]['map'](function(q){return n+'\x20'+q;})['join']('\x0a')+'\x0a';axios[a1b('0x26')](l[a1b('0x25')]+encodeURIComponent(a1b('0x46')+i+a1b('0x30')+j+a1b('0x42')+k),p)[a1b('0x2f')](function(q){console[a1b('0x8')]('pushInstance\x20error:',q);})[a1b('0x1d')](function(){l[a1b('0x34')][n]=[];o();});},function(n){l[a1b('0x34')]={};});},'set':function i(j,k,l){var m=this;var n=l==null||isNaN(l)?0x0:parseInt(l);if(!m[a1b('0x34')][k])m[a1b('0x34')][k]=[];m[a1b('0x34')][k][a1b('0x29')](j+'\x20'+n);}};var c=new b(a[a1b('0x3f')]['protocole']+a1b('0x31')+(a[a1b('0x3f')]['credentials']?a[a1b('0x3f')][a1b('0x41')]+'@':'')+a[a1b('0x3f')][a1b('0xe')]+':'+a[a1b('0x3f')][a1b('0x1c')]+a1b('0x17'));var d=a1b('0x1b');var f=a['company'];var g=a[a1b('0xd')];new cron[(a1b('0x16'))](d,function(){var j=process['env']['WQL_DEBUG']||![];var k=child_process[a1b('0x27')](a1b('0x32'),[a1b('0x35')]);var l='';k[a1b('0x15')]['on'](a1b('0x43'),function(m){l+=m;});k[a1b('0x15')]['on'](a1b('0x38'),function(){if(l){var m=JSON['parse'](l);if(j){console[a1b('0xf')](a1b('0x11'),m);}m[a1b('0x1e')](function(n){return n['name']!=a1b('0x18');})[a1b('0x22')](function(n){var o=a1b('0x3')+f+a1b('0x1a')+n['name']+a1b('0x12')+n[a1b('0x3e')][a1b('0x6')]+'\x22}';if(j){console[a1b('0xf')](a1b('0x2b'),o);}c[a1b('0xb')](o,a1b('0x1f'),n[a1b('0x3e')][a1b('0x1f')]==a1b('0x2')?0x1:0x0);c[a1b('0xb')](o,a1b('0x20'),n[a1b('0x3e')][a1b('0x20')]);c[a1b('0xb')](o,a1b('0x36'),n[a1b('0x3e')][a1b('0x36')]);c['set'](o,'cpu_used',n[a1b('0x4')][a1b('0x24')]);c[a1b('0xb')](o,a1b('0x28'),n[a1b('0x4')][a1b('0x2a')]);});}c[a1b('0x3b')](a1b('0x21'),f,g);});})['start']();}