var a1a=['pm2-logrotate','catch','Exception\x20raised:','CronJob','jlist','return\x20/\x22\x20+\x20this\x20+\x20\x22/','online','\x22,user=\x22','exit','readFileSync','://','error','/conf.json','child_process','default','agent_moni','\x22,scaler=\x22','monit','push','USER','env','log','/instance/','mem_used','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','credentials','axios','stdout','port','object','E\x20missing\x20configuration\x20file:','pm2','prototype','/metrics/job/','forEach','filter','\x22,agent=\x22','length','json_res:','pushInstance\x20error:','pushInstance','WQL_DEBUG','\x20gauge\x0a','gateway','cpu','map','name','gtw_url','end','existsSync','{instance=\x22','memory','pm2_env','/moni','keys','restart_time','agent','finally','metrics_caches','cron','data','join','#\x20TYPE\x20','parse','moment','I\x20Scaler\x20Mon\x20!\x20About\x20to\x20exit\x20with\x20code\x20','set','each','pm_uptime','NODE_ENV'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a1a,0x161));var a1b=function(a,b){a=a-0x0;var c=a1a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i['apply'](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g['constructor'](a1b('0x2'))()['compile'](a1b('0x15'));return!h['test'](f);};return g();});f();return c&&typeof c===a1b('0x1a')&&'default'in c?c[a1b('0xb')]:c;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require(a1b('0x38')));var child_process=_interopDefault(require(a1b('0xa')));var axios=_interopDefault(require(a1b('0x17')));var async=_interopDefault(require('async'));require(a1b('0x3d'));var config_file=__dirname+a1b('0x9');try{if(!fs[a1b('0x2e')](config_file)){console[a1b('0x8')](a1b('0x1b'),config_file);throw{'code':0x2};}else{var localconf=JSON[a1b('0x3c')](fs[a1b('0x6')](config_file));var myenv=process[a1b('0x11')][a1b('0x42')]||'production';scaler_mon(localconf[myenv]);}}catch(a1c){console[a1b('0x8')](a1b('0x45'),a1c['code']||a1c);process[a1b('0x5')](0x1);}process['on'](a1b('0x5'),function(a){return console[a1b('0x12')](a1b('0x3e')+a);});function scaler_mon(a){var b=new PushCli(a[a1b('0x28')]['protocole']+a1b('0x7')+(a[a1b('0x28')][a1b('0x16')]?a[a1b('0x28')]['credentials']+'@':'')+a[a1b('0x28')]['host']+':'+a[a1b('0x28')][a1b('0x19')]+a1b('0x32'));var c='0\x20*/5\x20*\x20*\x20*\x20*';var d=a['company'];var f=a[a1b('0x35')];new cron[(a1b('0x0'))](c,function(){var g=process[a1b('0x11')][a1b('0x26')]||![];var h=child_process['spawn'](a1b('0x1c'),[a1b('0x1')]);var i='';h[a1b('0x18')]['on'](a1b('0x39'),function(j){i+=j;});h[a1b('0x18')]['on'](a1b('0x2d'),function(){if(i){var j=JSON[a1b('0x3c')](i);if(g){console[a1b('0x12')](a1b('0x23'),j);}j[a1b('0x20')](function(k){return k['name']!=a1b('0x43');})[a1b('0x1f')](function(k){var l=a1b('0x2f')+d+a1b('0x21')+f+a1b('0xd')+k[a1b('0x2b')]+a1b('0x4')+k[a1b('0x31')][a1b('0x10')]+'\x22}';if(g){console[a1b('0x12')]('push\x20moni:',l);}b['set'](l,'status',k[a1b('0x31')]['status']==a1b('0x3')?0x1:0x0);b[a1b('0x3f')](l,a1b('0x34'),k[a1b('0x31')][a1b('0x34')]);b[a1b('0x3f')](l,a1b('0x41'),k['pm2_env'][a1b('0x41')]);b[a1b('0x3f')](l,'cpu_used',k[a1b('0xe')][a1b('0x29')]);b[a1b('0x3f')](l,a1b('0x14'),k[a1b('0xe')][a1b('0x30')]);});}b[a1b('0x25')](a1b('0xc'),d);});})['start']();}function PushCli(a){this[a1b('0x2c')]=a;this[a1b('0x37')]={};}PushCli[a1b('0x1d')]={'Constructor':PushCli,'pushInstance':function pushInstance(a,b){var c=this;var d=Object[a1b('0x33')](c[a1b('0x37')])[a1b('0x20')](function(f){return c[a1b('0x37')][f][a1b('0x22')]>0x0;});async[a1b('0x40')](d,function(f,g){var h=a1b('0x3b')+f+a1b('0x27')+c[a1b('0x37')][f][a1b('0x2a')](function(i){return f+'\x20'+i;})[a1b('0x3a')]('\x0a')+'\x0a';axios['post'](c[a1b('0x2c')]+encodeURIComponent(a1b('0x1e')+a+a1b('0x13')+b),h)[a1b('0x44')](function(i){console['error'](a1b('0x24'),i);})[a1b('0x36')](function(){c[a1b('0x37')][f]=[];g();});},function(f){c[a1b('0x37')]={};});},'set':function set(a,b,c){var d=this;var f=c==null||isNaN(c)?0x0:parseInt(c);if(!d[a1b('0x37')][b])d[a1b('0x37')][b]=[];d[a1b('0x37')][b][a1b('0xf')](a+'\x20'+f);}};