var a2a=[')=\x20',')\x20trigger\x20start\x20SAP\x20instance:','r792c05a3f02afc263c5a','ETIMEDOUT','ICMGetThreadList','Instances','firing','vpc_id',':\x20exec\x20error:','toJSON','checkconn_exec\x20authorization\x20error\x20for\x20SAP\x20instance:','SystemStatus','rcbeb52e1c23cbce73346','__nb','discoverEC2Instances','Server\x20Configuration','}\x20(stop','r37e0b9632995c39bb6dd','E\x20getEC2ID\x20error:','r3731b868ab6a189fad20','pushInstance','new_soap_client','username',')\x20sap\x20instance\x20error:','r44515715af21b234f6e9',')\x20requested\x20for\x20instance\x20:','r42cda9d2b8d1e2ca5c5b','E\x20isEC2sRunning\x20error:','heap','mappings_ip_id','SIGTERM','rce36a026a223ead06904','protocol','EC2','ended','}\x20error\x20connecting\x20to\x20instance:\x20','EC2\x20server\x20to\x20stop\x20cannot\x20be\x20found','r99d13cf3716dbb9bec98','Start\x20EC2\x20server\x20operation\x20timeout','No\x20EC2\x20instance\x20found','http','R3Services','watchStuckJobs','save_resume_step','timeout','soap_client_init','\x20{policy_name=\x22','GetCallstack','updated_system_instances','cloud_instance_is_sap_or_down',',workproces=\x22','system\x20instances\x20buffer\x20saved','https','r10377ca91782901d471c','nothing\x20found','instanceNr','green','pushUpSAPInstance','EC2\x20server\x20could\x20not\x20be\x20stopped\x20(but\x20SAP\x20instance\x20successfully\x20stopped)','errno','assign','stopInstances',')\x20triggered\x20SAP\x20instance:','gtw_url','r529f3a179b1611ff66ca','normal_instance_to_start','system','trim','agent','object','getEC2ID','J2EEGetRemoteObjectList','missing\x20pfx','Start\x20SAP\x20instance\x20operation\x20failed','syst_id','No\x20IP\x20','\x20on\x20','ec2','System\x20instance\x20not\x20indexed','Oops\x20redis\x20client\x20error:','RestartInstance',')\x20no\x20soap\x20client\x20created\x20for\x20system\x20instance\x20','hold',',rule_id=\x22','conn_retries','rd52fed8963807907af5b','AccessCheck','item','/?wsdl','check_sapcontrol_listening:\x20SOAP\x20client\x20init\x20exception:','substring','log','ABAPGetWPTable','(resume)\x20action\x20type\x20not\x20supported:',':1128/SAPHostControl/?wsdl','}\x20(notif)','return\x20/\x22\x20+\x20this\x20+\x20\x22/','company','r35ec33085df5762700a0',',filesystem=\x22','InstanceStatus','rac4f2bb8c900b7a4588b','replace','resuming\x20interrupted\x20scale\x20processing\x20operation:',')\x20instance\x20is\x20already\x20being\x20stopped','r6271d85d7ea5c2016537','J2EEGetComponentList','r32efa73bcdf4efd261c9','re920bcf404cb8d2e36f2','\x22\x20}\x20','waterfall','DISCOVER','redis_conf','statusCode','network_int','InstanceState','Map','r0491b9fc7fc0c1ed612a','r2dcb924dc3c52eaf4326','status','r92cae2d1732a92c30110','round','setSecurity','parent','ec2_stop_triggered','No\x20eligible\x20system\x20instance\x20to\x20be\x20started','ra636956dad6e6dd5e5c9','conn_failed','up_timeseries','discoverEC2Instances\x20filter:','password','check_start_ec2_instance:','r4834b22bf2e167eec413','rf80e88ba805e079b3e78','r327ab1a623b81f16bb28','push','re1cbdcb73780e3bdfb36','}\x20sapcontrol:','shutdown','slice','_sap_statuses','NODE_ENV','startInstances','finally','value','[CHECKS\x20FAILED]\x20{','r5fa62eac76fca09570cb','type','sapcontrol_operations','port_suffix','thread','r63a325a6fc9cd7455ee7','rd28064b1b6a02e83d69f','No\x20active\x20SAP\x20instance\x20available','r841df2001c1ae836aaaa','jsf','https://','r361b458eef37bcfd1026','r53eebe4bcfc8e4e11765','checkconn_exec','r9d9e6e7398c8824e81b3','_per_','r690921766564cc95c40e','\x22,features=\x22','pushCounter\x20error:','r657cbd37fc1f0469a93f','alerts','labels','parse','/.aws_vpc',',hostname=\x22','pushgtw_cli','loading\x20resume\x20processing\x20data...','pshgtw::del::error\x20:','r734f34a9c8d198a1765c','dispstatus','ActualValue','ScaleDoer\x20init\x20completed\x20with\x20queues:','rcd25f69d8b71238c4f89','r436d44a1adf050f0b97e','(resume)\x20start\x20OK:','separator','isEC2RunningFromID','ICMGetProxyConnectionList','Error\x20getting\x20instance\x20list','collect_exec','connection','LOG_LEVEL_DEBUG','from','J2EEGetClusterMsgList','r77e4c1a01c6c040cd3ca','toLowerCase','r8fbddd3ad25e66b66d75','indexOf','rule_id','loaded\x20from\x20cache\x20:','SIGINT','r82f51da34fd4e64cd7d2','graceful_shutdown','pushUpInstance','(resume)\x20stop\x20on:','Error:','iterator','assign_hierarchy','command','r82c436ecec51222acaee','now','version','rf041428ca117772f3c65','MESSAGESERVER','includes','\x20-\x20','[FAILED]\x20{','max_instance_running','http://','start\x20action\x20data:','no_system_conn','Status','SIGTERM\x20>\x20save\x20scaling\x20instances','redis\x20client\x20get/set\x20error:',')\x20partially\x20started\x20(EC2:OK,\x20SAP:NOK):\x20','find','btc','padStart','join','EnqGetLockTable','scale','[CANCELLED]\x20{','moment','GetProcessList','\x22,cp_region=\x22','instance_type','body','rffadbacb14fad0388ee5','red','/pshgtw','company:','find_sap_instances\x20params:\x20','description','SOAP\x20client\x20could\x20not\x20be\x20created','CHECK','\x20entity=','counter','stringify','gray','private-ip-address','(resume)\x20start\x20error\x20:',')\x20triggered:\x20','r6c05150afc9c97508dea','r0337b93f18e636174af5','db_datafile','rb4ef150604770a802c7d','instance_nr','r709dfa29ed094128337b','update','*Notification*\x0a','axios','r421bbad7bcce86124109','J2EEGetProcessList2','logger','addInstance','UpdateScalingInstance','r0f6b51f5c3e0dc6a5333','status_instance_up','Typ','ICMGetConnectionList','r991f6fd4cdd5c01d11ee','Error\x20connecting\x20to\x20WSDL\x20:','r1a2fb16f5a163921d090','features','prototype','keys','ScaleDoer\x20init\x20start','stop','check_system_status','r7cb8a66e6f7d1a2d81dc','down','?wsdl','ws_not_reachable','pfx','kpi','sending_sslcertifs','ICMGetCacheEntries','createClient','InstanceType','spo','min_instances_reached','__DEBUG__','forEach','abort','r59f9520cfd70ae9f2dac','ec2_start_triggered','describeInstances','async','/conf.json','SSL\x20Keys\x20not\x20provided\x20for\x20','stop_ongoing','Maximal\x20autorized\x20running\x20instances\x20reached','ec2_not_stopped','2016-11-15','r8115b24806a99207caa4','get','raa23ccab68c12c7d94ed','resume_context',',sn=\x22','rb05c9f7bc67b56220cd1','eachOf','gateway','staging','Start\x20SAP\x20instance\x20operation\x20timeout','r3e122758d5252afdf301','r91342b9fa4eab746dc3c','r3da7e567487bbe4f3fa4','\x22,company_id=\x22','upd','database','access','ip_internal','\x27\x20timeserie\x20data,\x20set\x20status=0\x20\x27up\x27\x20timeserie','series','filter','stack','}\x20instances:','ra3febaf705f0b3e94b08','instance_id','r7d72640cccaa75eaf713','concat','stopEC2','rd8d5b640eea865041c93','rcf1d727056f77b00d328','QUEUES',')\x20:','parallel',')\x20partially\x20stopped\x20(SAP:OK,\x20EC2:NOK):','_id','key','setMaxListeners','execution\x20error\x20of\x20(','r22cc19f9bd86c420755c','init','lines','r9f9daf2c0f512192f12e','status_up','re3911909956e43ffcbb7','auth_method','r53b4eb6eeef131884a85','sap_start_triggered','webhook_exec',',network_int=\x22','rd81305f10db800bfa71f','r85011b7d9cfd9bfc465c','r437d51923772d10e4f97','vpc-id','rbcf42cf954a8b1ab485b','r0818532768d5ac4c862b','findIndex','generateGroupings','}\x20(restart\x20-','raceb1f507d73610d4985','rb5336953a9773c4fdc85','production','Error\x20starting\x20EC2\x20instance','hostname','SAPControl.cgi','r7ac5719dddcd6cfe5f47','E\x20getEC2ID_Type\x20error','rdbf17cc155ced91fa2c0','rdae4b6632805cde75d91','}\x20checkconn_exec:\x20no\x20data\x20provided','pushCounter','is_encrypted','}\x20(restart-','gateway_creds','Reservations','then','status_up\x20{instance=\x22','method','I\x20switching\x20debug\x20mode\x20','.pfx','section','J2EEGetThreadList2','mrkdwn','r083b2fc6cba07dbf4688','System\x20details\x20not\x20found','get_cloud_region:','GetVersionInfo','counter_updated','r1edcd9984a6482302f84','begin','EnqGetStatistic','post','}\x20sapcontrol\x20exec\x20operation\x20error:','match','r4b45792fb7e0ea8585f8','r2939bbb672a85e65a35a',')\x20requested\x20for\x20instance:',')\x20trigger\x20EC2\x20instance:','_workprocess_','re231794108ea049c510b','createQueue','OperatingSystem','/metrics/job/','Error\x20stopping\x20EC2\x20instance','r46a607ebca2880de70b9','reduce',')\x20fully\x20started:','conn_retries_max','undefined','raf8f5c1c0382364207d5','r5edea82e53e6ce3cb66d','metrics_caches','Exception\x20Unexcepted\x20error:','r8e880d60fadc492c52d0','Stop\x20SAP\x20instance\x20operation\x20failed','lock','resume_on_step','r3582a8e329efcb4b3c35','InstanceAsTask',')\x20fully\x20stopped:','ra08cadce511ff197b26d','}\x20(notif):','kpiname_separator','running','Microsoft\x20SQL\x20Server','address','SOAP\x20client\x20init\x20exception:','test','r4c77e11f61d1fde79248','queue','[FAILED]\x20{}\x20(start','parameters','\x20gauge\x0a','credentials_not_loaded','GetSystemInstanceList','instancenr','r3dd3add7a10f8e1a3fd5','New\x20notifications','Minimal\x20running\x20instances\x20reached','BasicAuthSecurity','rf831452f1b8c742fead0',')\x20triggered\x20EC2\x20instance:','SAPControl-GRAY','entity_id','rf9db5f6d644bd379ea77','_errors','/staging/','getEC2ID_Type','ec2_not_started','r45b2cebbd4d7206037ff','state','Arguments','}\x20collect_exec:\x20no\x20data\x20provided','COLLECT','#\x20TYPE\x20','r9bae614fb830de88a71d','payload','apply','kpi_prefix_sap','}\x20(update)\x20system\x20not\x20active:','InstanceId','rfb5df2a2440192201d3f','\x20notification','r040dab23af4510e7149f','}\x20checkconn_exec\x20system','counter_','r9c3618e5fb721740773c','splice','error','ra1be4ede3f473d907098','connect_sap','min_instance_running','r8a385ea327ece206db01','rc70c916b6592c27704df','Stop','\x22,sid=\x22','r1474d7fbb9a7324bfe8b','is_sap_or_down','scaling_up','split','_resume_on_step','quit','credentials','fingerprint',',db_datafile=\x22','soap','concurrency_nb',',ip_internal=\x22',')\x20triggered:','soap_client_getinstance','SAPControl-RED','re9c03ba5a6cf356f87c9','ZqDvnKwJhCz69koeSUSB59jIhyDMjHm3RMHyg675','enqueue_','/.keys','ABAPGetSystemWPTable','\x22,type=\x22','r03fc230a0569c81dd3b9','eu-west-3','rddf7c86738135cc9feba',')\x20waiting\x20for\x20SAP\x20instance\x20to\x20actually\x20start\x20within\x20timeout\x20','dbindex',',database=\x22','sap','Result\x20of\x20(','options','r55bee04c50e70d63d98d','crypto','env','rfc2f355901f83dbc6f32','r84e26868c42700105908','delete','[PENDING]\x20{','map','cloud_instance_id',')\x20all\x20instances\x20of\x20system:','raa9c88633a52a77fde21',')\x20no\x20system\x20provided','filesystem','tree','endpoint','re7c8da36761c7429a194','pshgtw::delSerie::error\x20:','instance','cloud_instance_type','*System*\x0a','Start','region','call','max','\x20sec:\x20','string','resume_instance_to_start','rd4fcf8328ecbd58596b0','debug','once','format','Error\x20getting\x20system\x20instance\x20latest\x20status\x20','r6bb54153c3cd0e34ef79','ENQUE','r27ba8feb2c4c546a4152','r59166c85971605a74b9e','redis_cli','idx','GetAlerts','J2EEGetThreadCallStack','r2443efd44b6a1ed32cea','exit','}\x20connect\x20sap','\x20connect\x20to\x20the\x20entry\x20point\x20instance\x20and\x20provide\x20soapclient\x20for\x20:','instance=\x22','start','r57a0a2089cded3b4fff7','J2EEGetCacheStatistic2','r0ea46cead6ed2044d5e6','properties','deletePrometheus','r763956de8cf90a3cf1a8',')\x20all\x20retries\x20completed:','start_ongoing','workprocess','alert','Possible\x20combinations\x20of\x20IP\x20nr:','://','EC2\x20server\x20to\x20start\x20cannot\x20be\x20found','F_OK','J2EEGetVMHeapInfo','\x20error:','rd0074482b0529cb32e0f',')\x20on\x20','new','r8f375412da87e131abcb','catch','action\x20type\x20not\x20supported:',')\x20waiting\x20SAP\x20instance\x20to\x20stop\x20before\x20timeout\x20','J2EEGetEJBSessionList','check_sapcontrol_listening','nb_workers','\x22}\x20','redis\x20client\x20get\x20error:','Oops\x20redis\x20queue\x20error:','global_log_level','rd0b5a0532e73176b6ec2','r5507a87adb9a843814b8','__sec','rbceb4ef80d4607215929','r8b0e6f19ee35972b7bac','data','pushInstance\x20error:','LOG_LEVEL_MIN','r0c3af3d708a2987a660b','r5f50370755f8497cd69c','NODE_TLS_REJECT_UNAUTHORIZED','LOG_LEVEL_ERROR','redis','pshgtw:','r72fd174d37c08265e5c1','not\x20definition\x20for\x20','check_failed_conn','keys_buff','(resume)\x20start\x20on:','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','percent','length','re43358b5f71bf7b9b33a','hex','isEC2Stopped','r332cd69dadab050c7e03','aws-sdk','}\x20(start','discover_exec','default','sap_instances_ip','readFileSync',')\x20-\x20all\x20instances\x20of\x20system:','I\x20Scaler\x20Scale\x20!\x20About\x20to\x20exit\x20with\x20code\x20','rce153ab447ff78bb63bd','SAPControl-GREEN','Set','GetAlertTree','r83341d366fbbd3dd725e','ec2_not_found','r82088db4b59f4aaea8b5','sap_stop_triggered','r4cedfdedff04f42371a3','setEndpoint','rb038a9a2c15d45bbcb04','pushUpScaling\x20error:','\x22}\x200\x0a',')\x20update\x20to\x20transition\x20status:','set','r4fb8652508296ac45931','rb012f694f06baded5843','sid','ra63c6d1f016107b0abcf','r9870d5e052ce6f50f908','soapcli','rfbbd3f86069568d629ad','root','is_sap','r27823c02ac78c807f5de','certif_dir','resume_here_on_interruption','LOG_LEVEL_INFO','rc435f687bffdc6d17d11','enq','action','(resume)\x20stop\x20error\x20:','\x20sec:','restricted_kpis','r50e64b10cdf172df702f','\x22,entity_id=\x22','instances','aes-256-cbc','r569298b21c9637769832','update_sending_ssl','J2EEGetWebSessionList','wait','re9edaf9af49dedd76dc0','code','entry','YYYY/MM/DD\x20hh:mm:ss','r5130ec262e8001c71b63','Exception\x20raised:','r7296cee0472b5c42a056','no_active_instance','aws_cli','check_start_sap_instance:','GetInstanceProperties','pwd','final','r50623b529d52cc31023e','r03ee55b42ebdc2c18a81','(resume)\x20stop\x20OK:','each','yellow','port','Code','toString','PrivateIpAddress','SIGUSR2','[COMPLETED]\x20{','alertname','r5d395572d2daf94d0ee2','r6a775f58d6096e8f3fee','E\x20discoverSAPInstances\x20error:','describeInstanceStatus','func','constructor','GetEnvironment','r210d71a176f50c7d0d0d','no_start_candidate','existsSync','rc1636d9b64ba1c7d299a','info','process','GetQueueStatistic','SIGUSR1','rab56e993495f87e82568','InstanceStatuses','SAP\x20control\x20WS\x20not\x20reachable','r23bee686be5fda753179','ALL','):\x20no\x20system\x20provided','(resume)\x20actions\x20error:','get_sap_instances','\x20version:','origin','config','re2a09ccb04375117069c','name','Instance\x20already\x20started','13/?wsdl','isEC2Running','compile','No\x20system\x20provided','ceil','J2EEGetThreadTaskStack','msg','ClientSSLSecurityPFX','status_instance_up\x20{instance=\x22'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a2a,0xe5));var a2b=function(a,b){a=a-0x0;var c=a2a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i[a2b('0xe3')](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g[a2b('0x1ca')](a2b('0x24b'))()[a2b('0x1e4')](a2b('0x173'));return!h[a2b('0xc5')](f);};return g();});f();return c&&typeof c===a2b('0x230')&&a2b('0x17d')in c?c[a2b('0x17d')]:c;}var kue=_interopDefault(require('kue'));var redis=_interopDefault(require(a2b('0x16c')));var fs$1=_interopDefault(require('fs'));var async=_interopDefault(require(a2b('0x40')));var crypto=_interopDefault(require(a2b('0x115')));var soap=_interopDefault(require(a2b('0xff')));var http=_interopDefault(require('http'));var axios=_interopDefault(require(a2b('0x1b')));var moment=_interopDefault(require(a2b('0x2cf')));var awsSdk=_interopDefault(require(a2b('0x17a')));function PushCli(a,b,c){this[a2b('0x2ba')]=b;this[a2b('0x4f')]=c;this['gtw_url']=a;this[a2b('0xb5')]={};this['up_timeseries']={};}PushCli[a2b('0x29')]={'Constructor':PushCli,'assign_hierarchy':function assign_hierarchy(a,b,c){var d=b[a2b('0x175')]-0x1;for(var f=0x0;f<d;++f){var g=b[f];if(!(g in a)){a[g]={};}a=a[g];}a[b[d]]=c;},'generateGroupings':function generateGroupings(a){var b=this;if(!a){return'/version/'+b[a2b('0x2ba')]+a2b('0xd8')+b['staging'];}var c=Object['assign'](a,{'version':b[a2b('0x2ba')],'staging':b[a2b('0x4f')]});return Object[a2b('0x2a')](c)[a2b('0x11b')](function(d){return'/'['concat'](encodeURIComponent(d),'/')['concat'](encodeURIComponent(c[d]));})[a2b('0x2cb')]('');},'addInstance':function addInstance(a){if(!this['metrics_caches'][a])this[a2b('0xb5')][a]={};},'pushCounter':function pushCounter(){var a=arguments[a2b('0x175')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:a2b('0xd');var b=arguments[a2b('0x175')]>0x1?arguments[0x1]:undefined;var c=arguments[a2b('0x175')]>0x2?arguments[0x2]:undefined;var d=arguments[a2b('0x175')]>0x3?arguments[0x3]:undefined;var f=arguments[a2b('0x175')]>0x4?arguments[0x4]:undefined;var g=arguments[a2b('0x175')]>0x5?arguments[0x5]:undefined;var h=arguments['length']>0x6?arguments[0x6]:undefined;var i=this;var j={'instance':c,'system_id':d,'instancenr':f};var k='#\x20TYPE\x20counter_'+b+a2b('0xca');async[a2b('0x5a')]([function(l){if(h==0x1){var m=k+a2b('0xeb')+b+a2b('0x219')+g+a2b('0x18e');axios['post'](i[a2b('0x22a')]+'/metrics/job/'+encodeURIComponent(a)+i[a2b('0x7f')](j),m)[a2b('0x156')](function(n){if(n){console[a2b('0xee')]('pushCounter\x20error:',n);}})[a2b('0x27a')](function(){setTimeout(function(){l();},0x61a8);});}else l();},function(l){var m=k+a2b('0xeb')+b+a2b('0x219')+g+'\x22}\x20'+h+'\x0a';axios[a2b('0xa1')](i[a2b('0x22a')]+'/metrics/job/'+encodeURIComponent(a)+i[a2b('0x7f')](j),m)['catch'](function(n){if(n){console['error'](a2b('0x28f'),n);}})[a2b('0x27a')](function(){l();});}]);},'pushUpInstance':function pushUpInstance(){var a=arguments[a2b('0x175')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:'up';var b=arguments[a2b('0x175')]>0x1?arguments[0x1]:undefined;var c=arguments[a2b('0x175')]>0x2?arguments[0x2]:undefined;var d=arguments[a2b('0x175')]>0x3?arguments[0x3]:undefined;var f=arguments['length']>0x4?arguments[0x4]:undefined;var g=arguments['length']>0x5?arguments[0x5]:undefined;var h=this;var i=h['up_timeseries'][c]&&h['up_timeseries'][c]['status_up']&&h[a2b('0x26b')][c][a2b('0x71')][b+'+'+d+'+'+f];if(i==null){h[a2b('0x2b6')](h['up_timeseries'],[c,a2b('0x71'),b+'+'+d+'+'+f],g);}if(i!==g){var j='#\x20TYPE\x20status_up\x20gauge\x0a'+a2b('0x92')+c+a2b('0x1a5')+b+'\x22,sid=\x22'+f+a2b('0x1')+d+a2b('0x258')+g+'\x0a';axios[a2b('0xa1')](h['gtw_url']+'/metrics/job/'+encodeURIComponent(a)+h[a2b('0x7f')]({'instance':c}),j)[a2b('0x156')](function(k){console[a2b('0xee')]('pushUpInstance\x20error:',k);});}},'pushUpScaling':function pushUpScaling(){var a=arguments[a2b('0x175')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:'up';var b=arguments[a2b('0x175')]>0x1?arguments[0x1]:undefined;var c=arguments[a2b('0x175')]>0x2?arguments[0x2]:undefined;var d=arguments[a2b('0x175')]>0x3?arguments[0x3]:undefined;var f=this;var g=f[a2b('0x26b')][c]&&f[a2b('0x26b')][c][a2b('0xf8')]&&f[a2b('0x26b')][c][a2b('0xf8')][b];if(g==null){f[a2b('0x2b6')](f[a2b('0x26b')],[c,a2b('0xf8'),b],d);}if(g!==d){var h='#\x20TYPE\x20scaling_up\x20gauge\x0a'+'scaling_up\x20{instance=\x22'+c+a2b('0x1a5')+b+a2b('0x258')+d+'\x0a';axios[a2b('0xa1')](f[a2b('0x22a')]+a2b('0xac')+encodeURIComponent(a)+f[a2b('0x7f')]({'instance':c}),h)[a2b('0x156')](function(i){console['error'](a2b('0x18d'),i);});}},'pushUpSAPInstance':function pushUpSAPInstance(){var a=arguments[a2b('0x175')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:'up';var b=arguments[a2b('0x175')]>0x1?arguments[0x1]:undefined;var c=arguments[a2b('0x175')]>0x2?arguments[0x2]:undefined;var d=arguments['length']>0x3?arguments[0x3]:undefined;var f=arguments[a2b('0x175')]>0x4?arguments[0x4]:undefined;var g=arguments[a2b('0x175')]>0x5?arguments[0x5]:undefined;var h=this;var i='';g['forEach'](function(j){if(h[a2b('0x26b')][c]&&h[a2b('0x26b')][c][a2b('0x22')]&&h[a2b('0x26b')][c]['status_instance_up'][b+'+'+d+'+'+f+'+'+j['instancenr']]==null){h[a2b('0x2b6')](h[a2b('0x26b')],[c,a2b('0x22'),b+'+'+d+'+'+f+'+'+j[a2b('0xcd')]],j[a2b('0x262')]);}i+=a2b('0x1ea')+c+a2b('0x1a5')+b+a2b('0xf5')+f+a2b('0x1')+d+'\x22,sn=\x22'+j[a2b('0xcd')]+a2b('0x15c')+j[a2b('0x262')]+'\x0a';});if(i!=''){axios[a2b('0xa1')](h[a2b('0x22a')]+a2b('0xac')+encodeURIComponent(a)+h[a2b('0x7f')]({'instance':c}),'#\x20TYPE\x20status_instance_up\x20gauge\x0a'+i)[a2b('0x156')](function(j){console[a2b('0xee')]('pushUpSAPInstance\x20error:',j);});}},'pushInstance':function pushInstance(a,b,c){var d=this;if(d[a2b('0xb5')][b]){var f=Object['keys'](d[a2b('0xb5')][b])[a2b('0x5b')](function(g){return d[a2b('0xb5')][b][g]['length']>0x0;});async[a2b('0x1bc')](f,function(g,h){var i=a2b('0xe0')+g+a2b('0xca')+d[a2b('0xb5')][b][g][a2b('0x11b')](function(j){return g+'\x20'+j;})[a2b('0x2cb')]('\x0a')+'\x0a';axios[a2b('0xa1')](d[a2b('0x22a')]+a2b('0xac')+encodeURIComponent(a)+d[a2b('0x7f')]({'instance':b}),i)[a2b('0x91')](function(j){d['metrics_caches'][b][g]=[];h();})['catch'](function(j){d[a2b('0xb5')][b][g]=[];h(j);});},function(g){if(g){console[a2b('0xee')](a2b('0x166'),g);}d[a2b('0xb5')][b]={};if(c){c();}});}else if(c){c();}},'set':function set(a,b,c,d){var f=this;var g=b[a2b('0x251')](/-|\(|\)|\[|\]|\%|\+|\.|\s/g,'_');var h=c==null?0x0:isNaN(c)?Math[a2b('0x264')](parseInt(moment(c,a2b('0x1af'))[a2b('0x132')]('X'))):Math[a2b('0x264')](parseInt(c));if(!f[a2b('0xb5')][d][g])f['metrics_caches'][d][g]=[];var i=f[a2b('0xb5')][d][g]['map'](function(j){return j['split']('\x20')[0x0];})[a2b('0x2ac')](a);if(i>=0x0){f[a2b('0xb5')][d][g][a2b('0xed')](i,0x1);}f[a2b('0xb5')][d][g][a2b('0x272')](a+'\x20'+h);},'del':function del(a,b){var c=this;axios['delete'](c[a2b('0x22a')]+'/metrics/job/'+encodeURIComponent(a)+c[a2b('0x7f')]({'instance':b}))[a2b('0x91')](function(d){})[a2b('0x156')](function(d){console[a2b('0xee')](a2b('0x298'),d);});},'delSerie':function delSerie(a,b){var c=this;axios['delete'](c['gtw_url']+a2b('0xac')+encodeURIComponent(a)+c[a2b('0x7f')](b))[a2b('0x91')](function(d){})['catch'](function(d){console['error'](a2b('0x124'),d);});},'delInstance':function delInstance(a,b){var c=this;axios[a2b('0x119')](c['gtw_url']+a2b('0xac')+encodeURIComponent(a)+c[a2b('0x7f')]({'instance':b}))[a2b('0x91')](function(d){})[a2b('0x156')](function(d){console['error']('pshgtw::delInstance::error\x20:',d);});}};var pushcli=PushCli;function _defineProperty(a,b,c){if(b in a){Object['defineProperty'](a,b,{'value':c,'enumerable':!![],'configurable':!![],'writable':!![]});}else{a[b]=c;}return a;}var sapcontrol_operations={'ABAPGetComponentList':function ABAPGetComponentList(a,b){this['ABAPGetComponentList'](a,b);},'GetProcessList':function GetProcessList(a,b){this[a2b('0x0')](a,b);},'GetAlerts':function GetAlerts(a,b){this['GetAlerts'](a,b);},'GetAlertTree':function GetAlertTree(a,b){this[a2b('0x185')](a,b);},'GetEnvironment':function GetEnvironment(a,b){this[a2b('0x1cb')](a,b);},'GetVersionInfo':function GetVersionInfo(a,b){this[a2b('0x9c')](a,b);},'GetQueueStatistic':function GetQueueStatistic(a,b){this[a2b('0x1d2')](a,b);},'GetInstanceProperties':function GetInstanceProperties(a,b){this[a2b('0x1b6')](a,b);},'ABAPGetWPTable':function ABAPGetWPTable(a,b){this[a2b('0x247')](a,b);},'Start':function Start(a,b){this[a2b('0x128')](a,b);},'Stop':function Stop(a,b){this[a2b('0xf4')](a,b);},'RestartInstance':function RestartInstance(a,b){this[a2b('0x23b')](a,b);},'GetSystemInstanceList':function GetSystemInstanceList(a,b){this['GetSystemInstanceList'](a,b);},'ABAPGetSystemWPTable':function ABAPGetSystemWPTable(a,b){this[a2b('0x109')](a,b);},'GetCallstack':function GetCallstack(a,b){this['GetCallstack'](a,b);},'J2EEGetProcessList2':function J2EEGetProcessList2(a,b){this[a2b('0x1d')](a,b);},'J2EEGetThreadList2':function J2EEGetThreadList2(a,b){this[a2b('0x97')](a,b);},'J2EEGetWebSessionList':function J2EEGetWebSessionList(a,b){this[a2b('0x1aa')](a,b);},'J2EEGetCacheStatistic2':function J2EEGetCacheStatistic2(a,b){this[a2b('0x143')](a,b);},'J2EEGetVMHeapInfo':function J2EEGetVMHeapInfo(a,b){this[a2b('0x150')](a,b);},'J2EEGetEJBSessionList':function J2EEGetEJBSessionList(a,b){this[a2b('0x159')](a,b);},'J2EEGetRemoteObjectList':function J2EEGetRemoteObjectList(a,b){this[a2b('0x232')](a,b);},'J2EEGetClusterMsgList':function J2EEGetClusterMsgList(a,b){this[a2b('0x2a8')](a,b);},'J2EEGetSharedTableInfo':function J2EEGetSharedTableInfo(a,b){this['J2EEGetSharedTableInfo'](a,b);},'J2EEGetThreadCallStack':function J2EEGetThreadCallStack(a,b){this[a2b('0x13b')](a,b);},'J2EEGetThreadTaskStack':function J2EEGetThreadTaskStack(a,b){this[a2b('0x1e7')](a,b);},'J2EEGetComponentList':function J2EEGetComponentList(a,b){this['J2EEGetComponentList'](a,b);},'ICMGetThreadList':function ICMGetThreadList(a,b){this[a2b('0x1ef')](a,b);},'ICMGetConnectionList':function ICMGetConnectionList(a,b){this[a2b('0x24')](a,b);},'ICMGetCacheEntries':function ICMGetCacheEntries(a,b){this[a2b('0x35')](a,b);},'ICMGetProxyConnectionList':function ICMGetProxyConnectionList(a,b){this['ICMGetProxyConnectionList'](a,b);},'WebDispGetServerList':function WebDispGetServerList(a,b){this['WebDispGetServerList'](a,b);},'EnqGetLockTable':function EnqGetLockTable(a,b){this[a2b('0x2cc')](a,b);},'EnqGetStatistic':function EnqGetStatistic(a,b){this[a2b('0xa0')](a,b);}};var sapctrl_process_func=function(a,b,c,d,g,h,i,j,k,l){var m=this;if(a){console[a2b('0xee')](a2b('0x6c')+c+'@'+d[a2b('0x193')]+a2b('0x66')+a&&a[a2b('0x3')]);l();}else{switch(c){case a2b('0x13a'):case a2b('0x185'):var n=-0x1;var o=[];var p=[];var q=[];var r=m[a2b('0xc0')];if(b[a2b('0x121')]&&b[a2b('0x121')][a2b('0x242')]){b[a2b('0x121')][a2b('0x242')][a2b('0x3b')](function(z){if(z['parent']>n){o['push']({'idx':z[a2b('0x266')],'name':b[a2b('0x121')][a2b('0x242')][z[a2b('0x266')]][a2b('0x1e0')],'status':b[a2b('0x121')][a2b('0x242')][z[a2b('0x266')]][a2b('0x29b')]});var A=z[a2b('0x9')][a2b('0xf9')]('\x20');if(A[0x0]['indexOf'](':')>0x0){A[a2b('0x3b')](function(D){var E=D['split'](':');if(E['length']==0x2&&E[0x1][a2b('0xa3')](/[0-9]+(\.[0-9]+)?/g)){q=q['concat']([create_node(o,r,Object[a2b('0x227')](z,{'name':z[a2b('0x1e0')]+r+E[0x0]}),[E[0x1]],h)]);}});}else{if(A[0x0][a2b('0xa3')](/[0-9]+(\.[0-9]+)?/g)){q=q[a2b('0x61')]([create_node(o,r,z,[A[a2b('0xaf')](function(D,E){return E[a2b('0xa3')](/[0-9]+(\.[0-9]+)?/g)?D+E:D;},''),A[A[a2b('0x175')]-0x1][a2b('0x251')](/\s|[0-9]/g,'',h)])]);}}n=z[a2b('0x266')];}else if(z[a2b('0x266')]==n){var B=z[a2b('0x9')][a2b('0xf9')]('\x20');if(B[0x0][a2b('0x2ac')](':')>0x0){B[a2b('0x3b')](function(D){var E=D[a2b('0xf9')](':');if(E[a2b('0x175')]==0x2&&E[0x1][a2b('0xa3')](/[0-9]+(\.[0-9]+)?/g)){q=q[a2b('0x61')]([create_node(o,r,Object[a2b('0x227')](z,{'name':z['name']+r+E[0x0]}),[E[0x1]],h)]);}});}else{if(B[0x0][a2b('0xa3')](/[0-9]+(\.[0-9]+)?/g)){q=q[a2b('0x61')]([create_node(o,r,z,[B[a2b('0xaf')](function(D,E){return E['match'](/[0-9]+(\.[0-9]+)?/g)?D+E:D;},''),B[B[a2b('0x175')]-0x1][a2b('0x251')](/\s|[0-9]/g,'',h)])]);}}}else{p=p[a2b('0x61')](q);var C=o[a2b('0x175')]-0x1;while(C>=0x0&&o[C][a2b('0x139')]>z[a2b('0x266')]){o['pop']();C--;}q=[];n=z['parent'];}});if(!j||j[a2b('0x175')]==0x0){p[a2b('0x3b')](function(z){if(z){var A='instance=\x22'+d['_id']+a2b('0xf5')+d[a2b('0x193')]+a2b('0x1a5')+i+a2b('0x28e')+g['features']+'\x22';if(g['sn']!=undefined)A+=a2b('0x4b')+g['sn']+'\x22';if(k!=undefined)A+=a2b('0x23e')+k+'\x22';if(g['hostname']!=undefined)A+=a2b('0x295')+g[a2b('0x85')]+'\x22';if(g['ip_internal']!=undefined)A+=a2b('0x101')+g['ip_internal']+'\x22';if(z[a2b('0x120')]!=undefined)A+=a2b('0x24e')+z['filesystem']+'\x22';if(z['network_int']!=undefined)A+=',network_int=\x22'+z[a2b('0x25d')]+'\x22';if(z[a2b('0x56')]!=undefined)A+=a2b('0x110')+z[a2b('0x56')]+'\x22';if(z[a2b('0x15')]!=undefined)A+=a2b('0xfe')+z['db_datafile']+'\x22';m['pushgtw_cli'][a2b('0x190')]('{'+A+'}',def_kpi_name(m[a2b('0xe4')],r,z),z['value'],d[a2b('0x69')]);}});}else{p['forEach'](function(z){if(z){var A=def_kpi_name(m[a2b('0xe4')],r,z);if(j[a2b('0x2ac')](A)>=0x0){var B=a2b('0x140')+d['_id']+'\x22,sid=\x22'+d[a2b('0x193')]+'\x22,entity_id=\x22'+i+a2b('0x28e')+g[a2b('0x28')]+'\x22';if(g['sn']!=undefined)B+=',sn=\x22'+g['sn']+'\x22';if(k!=undefined)B+=a2b('0x23e')+k+'\x22';if(g['hostname']!=undefined)B+=a2b('0x295')+g[a2b('0x85')]+'\x22';if(g[a2b('0x58')]!=undefined)B+=a2b('0x101')+g[a2b('0x58')]+'\x22';if(z[a2b('0x120')]!=undefined)B+=a2b('0x24e')+z[a2b('0x120')]+'\x22';if(z[a2b('0x25d')]!=undefined)B+=a2b('0x77')+z[a2b('0x25d')]+'\x22';if(z[a2b('0x56')]!=undefined)B+=a2b('0x110')+z['database']+'\x22';if(z['db_datafile']!=undefined)B+=a2b('0xfe')+z[a2b('0x15')]+'\x22';m['pushgtw_cli']['set']('{'+B+'}',A,z[a2b('0x27b')],d[a2b('0x69')]);}}});}}l();break;case a2b('0x247'):var s=['dia',a2b('0x55'),'up2',a2b('0x19f'),a2b('0x2c9'),a2b('0x38')];var u=[a2b('0x1ab'),a2b('0x23d'),'run',a2b('0x2c'),a2b('0x20d'),a2b('0x154'),a2b('0x2f')];var v={};var w=function z(A,B){if(A['toUpperCase']()!=a2b('0x1d8')){return m[a2b('0xe4')]+A[a2b('0x2aa')]()+a2b('0xa8')+B+a2b('0x1f8');}else{return m[a2b('0xe4')]+a2b('0xa8')+B+a2b('0x1f8');}};s[a2b('0x3b')](function(A){u[a2b('0x3b')](function(B){v[w(h,B)]=v[w(h,B)]?Object[a2b('0x227')]({},v[w(h,B)],_defineProperty({},A,0x0)):_defineProperty({},A,0x0);});});if(b[a2b('0x14a')]&&b[a2b('0x14a')][a2b('0x242')]){b['workprocess'][a2b('0x242')][a2b('0x3b')](function(A){if(v[w(h,A[a2b('0x2c4')][a2b('0x2aa')]())]&&v[w(h,A['Status']['toLowerCase']())][A[a2b('0x23')]['toLowerCase']()]!=undefined){v[w(h,A['Status']['toLowerCase']())][A[a2b('0x23')][a2b('0x2aa')]()]++;}else{console[a2b('0xee')](a2b('0x16f'),w(h,A[a2b('0x2c4')][a2b('0x2aa')]()));}});}var x='instance=\x22'+d[a2b('0x69')]+a2b('0xf5')+d['sid']+a2b('0x10a')+h+a2b('0x1a5')+i+'\x22';if(g['hostname']!=undefined)x+=a2b('0x295')+g['hostname']+'\x22';if(g['ip_internal']!=undefined)x+=a2b('0x101')+g[a2b('0x58')]+'\x22';if(g['sn']!=undefined)x+=',sn=\x22'+g['sn']+'\x22';if(k!=undefined)x+=',rule_id=\x22'+k+'\x22';Object[a2b('0x2a')](v)[a2b('0x3b')](function(A){if(!j||j[a2b('0x175')]==0x0){s[a2b('0x3b')](function(B){m[a2b('0x296')][a2b('0x190')]('{'+x+a2b('0x21d')+B+'\x22}',A,v[A][B],d['_id']);});}else{if(j[a2b('0x2ac')](A)>=0x0){s[a2b('0x3b')](function(B){m[a2b('0x296')][a2b('0x190')]('{'+x+a2b('0x21d')+B+'\x22}',A,v[A][B],d[a2b('0x69')]);});}}});l();break;case a2b('0x109'):console[a2b('0x246')]('Result\x20of\x20('+c+'@'+d[a2b('0x193')]+')=\x20',b[a2b('0x14a')][a2b('0x242')]);l();break;case'EnqGetStatistic':var y=function A(B){if(B[a2b('0x2aa')]()[a2b('0xa3')](/.*time$/)){return m[a2b('0xe4')]+'enqueue_'+B['toLowerCase']()[a2b('0x251')](/[^a-zA-Z0-9]/g,'_')+a2b('0x162');}else{return m[a2b('0xe4')]+a2b('0x107')+B['toLowerCase']()[a2b('0x251')](/[^a-zA-Z0-9]/g,'_')+a2b('0x1f8');}};var x=a2b('0x140')+d[a2b('0x69')]+a2b('0xf5')+d['sid']+a2b('0x10a')+h+a2b('0x54')+company_id+'\x22,entity_id=\x22'+i+'\x22';if(g[a2b('0x28')]!=undefined)x+=',features=\x22'+g['features']+'\x22';if(g[a2b('0x85')]!=undefined)x+=a2b('0x295')+g['hostname']+'\x22';if(g[a2b('0x58')]!=undefined)x+=a2b('0x101')+g[a2b('0x58')]+'\x22';if(g['sn']!=undefined)x+=a2b('0x4b')+g['sn']+'\x22';if(k!=undefined)x+=a2b('0x23e')+k+'\x22';Object['keys'](b)[a2b('0x3b')](function(B){m[a2b('0x296')][a2b('0x190')]('{'+x+'}',y(B),b[B],d[a2b('0x69')]);});l();break;case'J2EEGetProcessList2':case a2b('0x0'):console[a2b('0x246')](a2b('0x112')+c+'@'+d['sid']+')=\x20',b[a2b('0x1d1')][a2b('0x242')]);l();break;case a2b('0x255'):case'ABAPGetComponentList':console['log'](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b['component'][a2b('0x242')]);l();break;case a2b('0x1d2'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b['queue'][a2b('0x242')]);l();break;case a2b('0x9c'):console['log'](a2b('0x112')+c+'@'+d[a2b('0x193')]+')=\x20',b[a2b('0x2ba')][a2b('0x242')]);l();break;case a2b('0xcc'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b['instance'][a2b('0x242')]);l();break;case a2b('0x2a8'):console[a2b('0x246')](a2b('0x112')+c+'@'+d['sid']+')=\x20',b[a2b('0x1e8')]);l();break;case a2b('0x21a'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+')=\x20',b[a2b('0x6f')][a2b('0x242')]);l();break;case a2b('0x1cb'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b[a2b('0x116')]['item']);l();break;case'ICMGetConnectionList':case a2b('0x2a2'):console[a2b('0x246')]('Result\x20of\x20('+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b[a2b('0x2a5')]);l();break;case a2b('0x35'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b[a2b('0x1ae')][a2b('0x242')]);l();break;case a2b('0x1ef'):console['log']('Result\x20of\x20('+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b[a2b('0x281')][a2b('0x242')]);l();break;case a2b('0x2cc'):console[a2b('0x246')]('Result\x20of\x20('+c+'@'+d[a2b('0x193')]+')=\x20',b[a2b('0xb9')]);l();break;case a2b('0x1b6'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b[a2b('0x145')][a2b('0x242')]);l();break;case'J2EEGetCacheStatistic2':console[a2b('0x246')]('Result\x20of\x20('+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b['cache'][a2b('0x242')]);l();break;case a2b('0x97'):console[a2b('0x246')](a2b('0x112')+c+'@'+d['sid']+a2b('0x1eb'),b['thread'][a2b('0x242')]);l();break;case'J2EEGetSharedTableInfo':console['log'](a2b('0x112')+c+'@'+d['sid']+a2b('0x1eb'),b[a2b('0x286')][a2b('0x242')]);l();break;case'J2EEGetVMHeapInfo':console[a2b('0x246')](a2b('0x112')+c+'@'+d['sid']+a2b('0x1eb'),b[a2b('0x207')]['item']);l();break;case'J2EEGetThreadCallStack':case a2b('0x1e7'):console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b['name'],'\x20',b[a2b('0x6f')]['items']);l();break;default:console[a2b('0x246')](a2b('0x112')+c+'@'+d[a2b('0x193')]+a2b('0x1eb'),b);l();}}};var def_kpi_name=function def_kpi_name(a,b,c){var d=c['unit'][a2b('0x251')](/\%/g,a2b('0x174'))[a2b('0x251')](/\//g,a2b('0x28c'))[a2b('0x251')](/\W+/g,'')[a2b('0x2aa')]();if(d=='')d='nb';return a+c[a2b('0x33')][a2b('0x251')](/\W+/g,b)+'__'+d;};var create_node=function create_node(a,b,c,d,f){var g={'value':isNaN(d[0x0]['replace'](/\s/g,''))?0x0:Math[a2b('0x264')](parseInt(d[0x0][a2b('0x251')](/\s/g,''))),'type':f,'unit':d[a2b('0x175')]>0x1&&d[0x1]||''};if(c['parent']>0x1){if(a[a2b('0x175')]>=0x2){switch(a[0x1][a2b('0x1e0')]){case a2b('0xab'):if(a[a2b('0x175')]>=0x4){switch(a[0x2][a2b('0x1e0')]){case'Filesystems':return Object[a2b('0x227')](g,{'filesystem':a[0x3]['name'],'category':a2b('0xab'),'kpi':'Disk_'+c[a2b('0x1e0')]});case'Lan':return Object[a2b('0x227')](g,{'network_int':a[0x3][a2b('0x1e0')],'category':a2b('0xab'),'kpi':'Network_'+c['name']});default:return Object['assign'](g,{'category':a[Math[a2b('0x12b')](a['length']-0x2,0x1)][a2b('0x1e0')],'kpi':a[a2b('0x276')](Math['max'](a[a2b('0x175')]-0x1,0x0),a[a2b('0x175')])['map'](function(i){return i['name'];})[a2b('0x2cb')](b)+b+c[a2b('0x1e0')]});}}else{return Object[a2b('0x227')](g,{'category':a[Math[a2b('0x12b')](a[a2b('0x175')]-0x2,0x1)]['name'],'kpi':a[a2b('0x276')](Math[a2b('0x12b')](a[a2b('0x175')]-0x1,0x0),a['length'])[a2b('0x11b')](function(i){return i[a2b('0x1e0')];})[a2b('0x2cb')](b)+b+c['name']});}case a2b('0xc2'):if(a['length']>=0x4){switch(a[0x2][a2b('0x1e0')]){case'Space\x20management':var h=a[0x4][a2b('0x1e0')][a2b('0xf9')]('/')['pop']();return Object['assign'](g,{'database':a[0x3][a2b('0x1e0')]['split'](':')[0x1],'db_datafile':h,'category':a[0x2][a2b('0x1e0')],'kpi':c['name'][a2b('0x251')](new RegExp(h['replace'](/(\.[a-z]{3})$/gi,'')+'\x20','gi'),'')});case'Performance':if(a[0x3][a2b('0x1e0')]=='I/O'){return Object[a2b('0x227')](g,{'db_datafile':c[a2b('0x1e0')][a2b('0x245')](0x15,c[a2b('0x1e0')][a2b('0x175')]),'category':a[0x2]['name'],'kpi':a[0x3][a2b('0x1e0')]});}else{return Object[a2b('0x227')](g,{'category':a[0x2][a2b('0x1e0')],'kpi':a[0x3]['name']+b+c[a2b('0x1e0')]});}default:return Object['assign'](g,{'category':a[Math[a2b('0x12b')](a[a2b('0x175')]-0x2,0x1)][a2b('0x1e0')],'kpi':a[a2b('0x276')](Math[a2b('0x12b')](a[a2b('0x175')]-0x1,0x0),a[a2b('0x175')])['map'](function(i){return i[a2b('0x1e0')];})[a2b('0x2cb')](b)+b+c[a2b('0x1e0')]});}}else{return Object[a2b('0x227')](g,{'category':a[Math[a2b('0x12b')](a[a2b('0x175')]-0x2,0x1)][a2b('0x1e0')],'kpi':a[a2b('0x276')](Math[a2b('0x12b')](a[a2b('0x175')]-0x1,0x0),a[a2b('0x175')])['map'](function(i){return i['name'];})[a2b('0x2cb')](b)+b+c['name']});}case a2b('0xbc'):case a2b('0x1fa'):if(d[0x0][a2b('0xa3')](/^([0-9]|\s)+(\.[0-9]+)?$/g)){return Object[a2b('0x227')](g,{'category':a[0x1][a2b('0x1e0')],'kpi':a[a2b('0x276')](Math[a2b('0x12b')](a[a2b('0x175')]-0x1,0x0),a[a2b('0x175')])['map'](function(i){return i[a2b('0x1e0')];})[a2b('0x2cb')](b)+b+c[a2b('0x1e0')]});}break;case a2b('0x214'):if(a[a2b('0x175')]>=0x3&&a[0x2][a2b('0x1e0')]=='ICM'){return Object[a2b('0x227')](g,{'category':a2b('0x214'),'kpi':a['slice'](Math[a2b('0x12b')](a['length']-0x2,0x0),a['length'])[a2b('0x11b')](function(i){return i[a2b('0x1e0')];})[a2b('0x2cb')](b)+b+c['name']});}else{return Object['assign'](g,{'category':a2b('0x214'),'kpi':a[a2b('0x276')](Math[a2b('0x12b')](a[a2b('0x175')]-0x1,0x0),a[a2b('0x175')])[a2b('0x11b')](function(i){return i['name'];})[a2b('0x2cb')](b)+b+c['name']});}default:return Object[a2b('0x227')](g,{'category':a[Math[a2b('0x12b')](a[a2b('0x175')]-0x2,0x1)][a2b('0x1e0')],'kpi':a[a2b('0x276')](Math['max'](a[a2b('0x175')]-0x1,0x0),a['length'])['map'](function(i){return i[a2b('0x1e0')];})['join'](b)+b+c[a2b('0x1e0')]});}}}else{return null;}};var sapctrl_helpers={'sapcontrol_operations':sapcontrol_operations,'sapctrl_process_func':sapctrl_process_func};function AWSMng(){var a=this;this[a2b('0x238')]=new awsSdk[(a2b('0x20c'))]({'apiVersion':a2b('0x46'),'region':a2b('0x10c')});this[a2b('0x208')]={};this[a2b('0xd7')]={'ec2_not_found':a2b('0x212'),'credentials_not_loaded':'AWS\x20credentials\x20keys\x20not\x20loadded','ec2_not_started':a2b('0x84'),'ec2_not_stopped':a2b('0xad')};awsSdk[a2b('0x1de')]['getCredentials'](function(b){if(b)console[a2b('0xee')](a[a2b('0xd7')][a2b('0xcb')]+':',b[a2b('0x5c')]);});}AWSMng['prototype']={'Constructor':AWSMng,'discoverEC2Instances':function discoverEC2Instances(a,b){var c=this;async[a2b('0x259')]([function(d){console[a2b('0x246')](a2b('0x26c'),a);c['ec2'][a2b('0x3f')]({'Filters':[{'Name':a2b('0x7b'),'Values':[a]}]},d);},function(d,f){if(d&&d[a2b('0x90')]){var g=d[a2b('0x90')][a2b('0xaf')](function(h,i){return h[a2b('0x61')](i[a2b('0x1f0')][a2b('0xaf')](function(j,k){j[a2b('0x272')]({'vpc_id':a,'ip_internal':k['PrivateIpAddress'],'cloud_instance_id':k[a2b('0xe6')],'cloud_instance_type':k['InstanceType'],'state':k['State']['Name'],'is_sap_or_down':k['State']['Name']!=a2b('0xc1')});return j;},[]));},[]);f(null,g);}else{f(a2b('0x221'));}},function(d,f){async[a2b('0x4d')](d,function(g,h,i){if(g[a2b('0xdc')]=='running'){var j=http[a2b('0x48')]('http://'+g['ip_internal']+a2b('0x249'),{'timeout':0x3e8},function(k){if(k&&k[a2b('0x25c')]==0xc8){d[h][a2b('0x199')]=!![];i();}});j['on'](a2b('0x217'),j['abort']);j['on'](a2b('0xee'),function(k){i();});}else i();},function(g){f(null,d);});}],function(d,f){if(d){console[a2b('0xee')](a2b('0x1c7'),d,f);b();}else{console[a2b('0x246')]('list_private_props:',f);b(null,f);}});},'getEC2PrivateProps':function getEC2PrivateProps(a,b){var c=this;async[a2b('0x259')]([function(d){c[a2b('0x238')]['describeInstances']({'Filters':[{'Name':'vpc-id','Values':[a[a2b('0x1f2')]]}]},d);},function(d,f){if(d&&d['Reservations']){var g=d[a2b('0x90')][a2b('0xaf')](function(h,i){return h[a2b('0x61')](i[a2b('0x1f0')]['reduce'](function(j,k){j[a2b('0x272')]({'ip_internal':k[a2b('0x1c1')],'cloud_instance_id':k[a2b('0xe6')],'cloud_instance_type':k[a2b('0x37')]});return j;},[]));},[]);f(null,g);}else{f(c[a2b('0xd7')][a2b('0x187')]);}}],function(d,f){if(d){console['error'](a2b('0x1fd'),d,f);b();}else{b(f);}});},'isEC2sRunning':function isEC2sRunning(a,b){var c=this;async[a2b('0x259')]([function(d){c['ec2']['describeInstanceStatus']({'InstanceIds':Object[a2b('0x2a')](c[a2b('0x208')])['filter'](function(f){return a['indexOf'](f)>=0x0;})[a2b('0x11b')](function(f){return c['mappings_ip_id'][f];}),'IncludeAllInstances':!![]},d);},function(d,f){var g={};d[a2b('0x1d5')]['forEach'](function(h){g[h[a2b('0xe6')]]=h[a2b('0x25e')][a2b('0x1bf')]==0x10&&h[a2b('0x24f')][a2b('0x2c4')]=='ok'&&h[a2b('0x1f6')][a2b('0x2c4')]=='ok';});f(null,g);}],function(d,f){if(d){console[a2b('0xee')](a2b('0x206'),d);}b(f);});},'isEC2Running':function isEC2Running(a,b){var c=this;c[a2b('0x231')](a,function(d){if(d){c[a2b('0x2a1')](d,b);}else{console[a2b('0xee')](c[a2b('0xd7')]['ec2_not_found']);b();}});},'isEC2RunningFromID':function isEC2RunningFromID(a,b){var c=this;async[a2b('0x259')]([function(d){c['ec2'][a2b('0x1c8')]({'InstanceIds':[a],'IncludeAllInstances':!![]},d);},function(d,f){if(d['InstanceStatuses']&&d[a2b('0x1d5')][0x0]){f(null,d[a2b('0x1d5')][0x0][a2b('0x25e')][a2b('0x1bf')]==0x10&&d[a2b('0x1d5')][0x0][a2b('0x24f')]['Status']=='ok'&&d[a2b('0x1d5')][0x0][a2b('0x1f6')][a2b('0x2c4')]=='ok');}else{f(c[a2b('0xd7')]['ec2_not_found']);}}],function(d,f){if(d){console[a2b('0xee')]('E\x20isEC2RunningFromID\x20error:',d);}b(f);});},'isEC2Stopped':function isEC2Stopped(a,b){var c=this;c[a2b('0x231')](a,function(d){if(d){c['isEC2StoppedFromID'](d,b);}else{console[a2b('0xee')](c['_errors'][a2b('0x187')]);b();}});},'isEC2StoppedFromID':function isEC2StoppedFromID(a,b){var c=this;async[a2b('0x259')]([function(d){c[a2b('0x238')][a2b('0x1c8')]({'InstanceIds':[a],'IncludeAllInstances':!![]},d);},function(d,f){if(d[a2b('0x1d5')]&&d[a2b('0x1d5')][0x0]){f(null,d[a2b('0x1d5')][0x0][a2b('0x25e')][a2b('0x1bf')]==0x50);}else{f(c[a2b('0xd7')][a2b('0x187')]);}}],function(d,f){if(d){console[a2b('0xee')]('E\x20isEC2StoppedFromID\x20error:',d);}b(f);});},'getEC2ID':function getEC2ID(a,b){var c=this;if(Object[a2b('0x2a')](c['mappings_ip_id'])[a2b('0x2ac')](a)<0x0){async[a2b('0x259')]([function(d){c[a2b('0x238')][a2b('0x3f')]({'Filters':[{'Name':a2b('0x10'),'Values':[a]}]},d);},function(d,f){if(d&&d['Reservations']&&d[a2b('0x90')][0x0]&&d[a2b('0x90')][0x0][a2b('0x1f0')]&&d['Reservations'][0x0]['Instances'][0x0]){f(null,d['Reservations'][0x0][a2b('0x1f0')][0x0]['InstanceId']);}else{f(c[a2b('0xd7')][a2b('0x187')]);}}],function(d,f){if(d||!f){console[a2b('0xee')]('E\x20getEC2ID\x20error:',d,f);b();}else{c[a2b('0x208')][a]=f;b(f);}});}else{b(c[a2b('0x208')][a]);}},'getEC2ID_Type':function getEC2ID_Type(a,b){var c=this;async['waterfall']([function(d){c['ec2'][a2b('0x3f')]({'Filters':[{'Name':a2b('0x10'),'Values':[a]}]},d);},function(d,f){if(d&&d[a2b('0x90')]&&d[a2b('0x90')][0x0]&&d['Reservations'][0x0]['Instances']&&d['Reservations'][0x0]['Instances'][0x0]){f(null,d['Reservations'][0x0][a2b('0x1f0')][0x0]);}else{f(c[a2b('0xd7')][a2b('0x187')]);}}],function(d,f){if(d){console[a2b('0xee')](a2b('0x88'),d);b();}else{c[a2b('0x208')][a]=f[a2b('0xe6')];b({'instance_id':f[a2b('0xe6')],'instance_type':f[a2b('0x37')]});}});},'stopEC2':function stopEC2(a,b){var c=this;c[a2b('0x231')](a,function(d){if(d){c['isEC2StoppedFromID'](d,function(f){if(f){b();}else{c['ec2'][a2b('0x228')]({'InstanceIds':[d]},function(g){if(g){console[a2b('0xee')](c[a2b('0xd7')][a2b('0x45')],g);b(c[a2b('0xd7')][a2b('0x45')]);}else b();});}});}else b(c['_errors']['ec2_not_stopped']);});},'startEC2':function startEC2(a,b){var c=this;c[a2b('0x231')](a,function(d){if(d){c[a2b('0x2a1')](d,function(f){if(f){b();}else{c[a2b('0x238')][a2b('0x279')]({'InstanceIds':[d]},function(g){if(g){console[a2b('0xee')](c[a2b('0xd7')][a2b('0xda')],g);b(c[a2b('0xd7')][a2b('0xda')]);}else b();});}});}else b(c[a2b('0xd7')][a2b('0xda')]);});}};var awsmng=AWSMng;function Logger(){var a=arguments[a2b('0x175')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:0x1;this[a2b('0x15f')]=a;this[a2b('0x3a')]=![];this[a2b('0x16b')]=0x0;this[a2b('0x167')]=0x1;this[a2b('0x19d')]=0x2;this[a2b('0x2a6')]=0x3;this['level_letter']=['E','M','I','D'];this[a2b('0x2a0')]='\x20:';}Logger[a2b('0x29')]={'Constructor':Logger,'log':function log(a){var b=this;function c(d){switch(d){case b['LOG_LEVEL_ERROR']:return'E'+b[a2b('0x2a0')]+new Date()['toJSON']()+b[a2b('0x2a0')];case b['LOG_LEVEL_MIN']:return'M'+b[a2b('0x2a0')]+new Date()[a2b('0x1f4')]()+b[a2b('0x2a0')];case b[a2b('0x19d')]:return'I'+b[a2b('0x2a0')]+new Date()[a2b('0x1f4')]()+b[a2b('0x2a0')];case b[a2b('0x2a6')]:return'D'+b[a2b('0x2a0')]+new Date()[a2b('0x1f4')]()+b[a2b('0x2a0')];default:return'';}}if(a<=b[a2b('0x15f')]||b[a2b('0x3a')]){Array[a2b('0x29')]['splice'][a2b('0x12a')](arguments,0x0,0x1,c(a));console[a2b('0x246')][a2b('0xe3')](null,Array[a2b('0x29')][a2b('0x276')]['call'](arguments));}},'debug':function debug(a){console[a2b('0x246')](a2b('0x94')+a?'ON':'OFF');this[a2b('0x3a')]=a;}};var logger=Logger;var rdscmds={'APPEND':a2b('0x256'),'ASKING':a2b('0x289'),'AUTH':a2b('0x137'),'BGREWRITEAOF':'r977f34a23a4c7dafd711','BGSAVE':a2b('0x2ab'),'BITCOUNT':a2b('0xd2'),'BITFIELD':'re8eece2435bbe0e78f2b','BITOP':a2b('0xf3'),'BITPOS':a2b('0x10d'),'BLPOP':a2b('0xf2'),'BRPOP':'r8bc260d6056d562c74a7','BRPOPLPUSH':a2b('0x18a'),'BZPOPMAX':a2b('0x13'),'BZPOPMIN':a2b('0x81'),'CLIENT':a2b('0x1df'),'CLUSTER':'rfc57ce1d5fc7792fcebe','COMMAND':a2b('0x11e'),'CONFIG':a2b('0x28d'),'DBSIZE':a2b('0x1f7'),'DEBUG':a2b('0x1ed'),'DECR':a2b('0x1c5'),'DECRBY':a2b('0x8a'),'DEL':a2b('0x179'),'DISCARD':'re59cb5e280e1e0b44c4a','DUMP':'rd1e8793e1e910c6d0f9c','ECHO':a2b('0x27d'),'EVAL':'r6cd6ed29c886ed30605c','EVALSHA':'r590bf147ef64eeafadb3','EXEC':a2b('0x1a4'),'EXISTS':'r190450cc6f31a91a63d9','EXPIRE':a2b('0x288'),'EXPIREAT':a2b('0x28b'),'FLUSHALL':'r2b778d94531380c958ef','FLUSHDB':a2b('0x87'),'GEOADD':a2b('0x4c'),'GEODIST':a2b('0x10b'),'GEOHASH':a2b('0x169'),'GEOPOS':a2b('0x16'),'GEORADIUS':'rb6e830dd1ea871ad8899','GEORADIUS_RO':'r81ab714c7e51fc02a633','GEORADIUSBYMEMBER':a2b('0xe1'),'GEORADIUSBYMEMBER_RO':a2b('0x290'),'GET':a2b('0x210'),'GETBIT':a2b('0x53'),'GETRANGE':a2b('0x188'),'GETSET':a2b('0x24d'),'HDEL':a2b('0x18c'),'HEXISTS':a2b('0x257'),'HGET':a2b('0x7c'),'HGETALL':a2b('0x4'),'HINCRBY':a2b('0x271'),'HINCRBYFLOAT':'r7cefea74fb6a6b3ba2fe','HKEYS':a2b('0x74'),'HLEN':a2b('0x203'),'HMGET':a2b('0x2b8'),'HMSET':a2b('0x254'),'HOST:':'r1fcaba9bdf50c7f3ffae','HSCAN':a2b('0x19a'),'HSET':a2b('0xb3'),'HSETNX':a2b('0x64'),'HSTRLEN':a2b('0x195'),'HVALS':a2b('0x105'),'INCR':a2b('0x89'),'INCRBY':a2b('0x78'),'INCRBYFLOAT':'rf0fe0a692443ce6dcc3d','INFO':a2b('0x1c6'),'KEYS':'r7c58fc41ca7901f7d01e','LASTSAVE':a2b('0x164'),'LATENCY':a2b('0x205'),'LINDEX':'r265a148ef5bd3d04ca07','LINSERT':a2b('0x19e'),'LLEN':a2b('0xec'),'LOLWUT':'r90958e8cf18c41945d6b','LPOP':'rc5429e6293709c0143b6','LPUSH':'r4162b7460866dd16e593','LPUSHX':a2b('0x263'),'LRANGE':a2b('0x299'),'LREM':'rbb0a9b910059520d314a','LSET':a2b('0x114'),'LTRIM':a2b('0x269'),'MEMORY':a2b('0x186'),'MGET':'r963139d81e76a1db74a4','MIGRATE':a2b('0x7d'),'MODULE':a2b('0x123'),'MONITOR':a2b('0x63'),'MOVE':a2b('0x1b0'),'MSET':a2b('0x1fc'),'MSETNX':'rb7a007dae35fc36db7f0','MULTI':a2b('0x144'),'OBJECT':'r1de45da792a8697130be','PERSIST':a2b('0xbe'),'PEXPIRE':a2b('0xe7'),'PEXPIREAT':a2b('0x142'),'PFADD':'rbfe1f1651b51d67bc74b','PFCOUNT':a2b('0x152'),'PFDEBUG':a2b('0x20a'),'PFMERGE':a2b('0xa5'),'PFSELFTEST':a2b('0x155'),'PING':a2b('0xb7'),'POST':'rce0128b3a37d805eed4a','PSETEX':a2b('0x160'),'PSUBSCRIBE':a2b('0x5e'),'PSYNC':a2b('0x18'),'PTTL':a2b('0x2b0'),'PUBLISH':'r652fea692b19d3b13951','PUBSUB':a2b('0x51'),'PUNSUBSCRIBE':a2b('0x1cf'),'RANDOMKEY':'r12a38cb3bcb8143e656b','READONLY':a2b('0x6d'),'READWRITE':'rce322cd74d5847a2a37f','RENAME':'r9066a7800a292a1904c6','RENAMENX':a2b('0x261'),'REPLCONF':a2b('0x197'),'REPLICAOF':a2b('0x176'),'RESTORE':'r5c35935afbc4ecb59f54','RESTORE-ASKING':a2b('0x260'),'ROLE':a2b('0x3d'),'RPOP':'rbbdd4ae591afa6c96866','RPOPLPUSH':a2b('0x282'),'RPUSH':a2b('0xa4'),'RPUSHX':a2b('0x161'),'SADD':a2b('0x52'),'SAVE':a2b('0xef'),'SCAN':a2b('0x1a8'),'SCARD':a2b('0xc6'),'SCRIPT':a2b('0x182'),'SDIFF':a2b('0x168'),'SDIFFSTORE':'r5192532048d831a95037','SELECT':a2b('0x27'),'SET':a2b('0xf6'),'SETBIT':'rbbee446c0ca0e678607a','SETEX':'r46e57e1c52332b5a5a99','SETNX':a2b('0x21'),'SETRANGE':a2b('0x1d4'),'SHUTDOWN':a2b('0x283'),'SINTER':a2b('0xe9'),'SINTERSTORE':'r345da673d33003cbcd34','SISMEMBER':a2b('0x1ac'),'SLAVEOF':a2b('0x16e'),'SLOWLOG':a2b('0x7a'),'SMEMBERS':a2b('0x9e'),'SMOVE':a2b('0x192'),'SORT':a2b('0x240'),'SPOP':a2b('0x1b2'),'SRANDMEMBER':a2b('0x26f'),'SREM':a2b('0xdb'),'SSCAN':a2b('0x14'),'STRLEN':a2b('0x1fe'),'SUBSCRIBE':a2b('0x273'),'SUBSTR':a2b('0x1cc'),'SUNION':a2b('0x60'),'SUNIONSTORE':a2b('0x2e'),'SWAPDB':a2b('0x47'),'SYNC':'r28ac155def5413926a04','TIME':'r4a905c628adb036f5ebc','TOUCH':a2b('0x29e'),'TTL':a2b('0x99'),'TYPE':a2b('0x163'),'UNLINK':'r4c95fa093bc7d290fced','UNSUBSCRIBE':a2b('0x1c'),'UNWATCH':a2b('0x136'),'WAIT':a2b('0x270'),'WATCH':a2b('0x118'),'XACK':a2b('0x1ba'),'XADD':a2b('0x1d7'),'XCLAIM':a2b('0x2a9'),'XDEL':a2b('0x1b9'),'XGROUP':a2b('0x191'),'XINFO':a2b('0xb4'),'XLEN':a2b('0x285'),'XPENDING':a2b('0x22b'),'XRANGE':a2b('0xa9'),'XREAD':a2b('0x250'),'XREADGROUP':'rd2da0178505f01ac6a56','XREVRANGE':a2b('0x134'),'XSETID':a2b('0x2bb'),'XTRIM':a2b('0x194'),'ZADD':a2b('0x82'),'ZCARD':a2b('0x12f'),'ZCOUNT':a2b('0xd6'),'ZINCRBY':a2b('0x147'),'ZINTERSTORE':a2b('0x70'),'ZLEXCOUNT':'r335ac0fada359dc2a168','ZPOPMAX':'ref0b5cdf20e3d8e2c56f','ZPOPMIN':'r4ff46d82c7ee5abddf08','ZRANGE':a2b('0xce'),'ZRANGEBYLEX':'r66c704c25f2db6ac805c','ZRANGEBYSCORE':a2b('0x79'),'ZRANK':a2b('0x13c'),'ZREM':a2b('0x49'),'ZREMRANGEBYLEX':'r23d9446a001853d37fc1','ZREMRANGEBYRANK':'r9092c8b2288a642d30a8','ZREMRANGEBYSCORE':a2b('0x25'),'ZREVRANGE':a2b('0xae'),'ZREVRANGEBYLEX':a2b('0x117'),'ZREVRANGEBYSCORE':a2b('0x72'),'ZREVRANK':a2b('0x220'),'ZSCAN':a2b('0x29d'),'ZSCORE':'r07b493479fe344b5cf11','ZUNIONSTORE':a2b('0xbb')};function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError('Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.');}function _unsupportedIterableToArray(a,b){if(!a)return;if(typeof a===a2b('0x12d'))return _arrayLikeToArray(a,b);var c=Object[a2b('0x29')][a2b('0x1c0')]['call'](a)['slice'](0x8,-0x1);if(c==='Object'&&a[a2b('0x1ca')])c=a[a2b('0x1ca')][a2b('0x1e0')];if(c===a2b('0x25f')||c===a2b('0x184'))return Array['from'](a);if(c===a2b('0xdd')||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](c))return _arrayLikeToArray(a,b);}function _iterableToArray(a){if(typeof Symbol!==a2b('0xb2')&&Symbol[a2b('0x2b5')]in Object(a))return Array[a2b('0x2a7')](a);}function _arrayWithoutHoles(a){if(Array['isArray'](a))return _arrayLikeToArray(a);}function _arrayLikeToArray(a,b){if(b==null||b>a['length'])b=a[a2b('0x175')];for(var c=0x0,d=new Array(b);c<b;c++){d[c]=a[c];}return d;}var sapcontrol_operations$1=sapctrl_helpers[a2b('0x27f')],sapctrl_process_func$1=sapctrl_helpers['sapctrl_process_func'];function ScaleDoer(){this['queue']=null;this[a2b('0x65')]={};this['company']='';this[a2b('0x129')]='';this[a2b('0x100')]=0x1;this[a2b('0x34')]={};this[a2b('0x23f')]={};this[a2b('0xb1')]=0x3;this['conn_retries_delay_msec']=0x9c40;this[a2b('0x21b')]={};this[a2b('0xf1')]=0x1;this[a2b('0x2c0')]=0xa;this[a2b('0xc0')]='_';this[a2b('0xe4')]=a2b('0x111')+this['kpiname_separator'];this[a2b('0x277')]={'green':a2b('0x183'),'yellow':'SAPControl-YELLOW','red':a2b('0x104'),'gray':'SAPControl-GRAY'};this[a2b('0xd7')]={'soap_client_init':a2b('0xa'),'soap_client_getinstance':a2b('0x2a3'),'conn_failed':'Connection\x20to\x20SAP\x20system\x20failed','ws_not_reachable':a2b('0x1d6'),'no_system_conn':'No\x20SAP\x20system\x20or\x20no\x20system\x20connection\x20active','no_active_instance':a2b('0x284'),'stop_ongoing':'Stop\x20SAP\x20instance\x20already\x20ongoing','start_ongoing':'Start\x20eligible\x20system\x20instance\x20already\x20ongoing','no_start_candidate':a2b('0x268'),'min_instances_reached':a2b('0xd0'),'max_instances_reached':a2b('0x44')};this[a2b('0xfa')]={'stop':{'begin':0x1,'counter_updated':0x2,'sap_stop_triggered':0x3,'ec2_stop_triggered':0x4},'start':{'begin':0x1,'counter_updated':0x2,'ec2_start_triggered':0x3,'sap_start_triggered':0x4}};this[a2b('0x19b')]=__dirname+a2b('0x108');this[a2b('0x1b4')]=new awsmng();this[a2b('0x138')]=null;this['pushgtw_cli']=null;this['gateway_creds']=null;this[a2b('0x1e')]=new logger();this[a2b('0x1e')][a2b('0x130')](!![]);}ScaleDoer[a2b('0x29')]={'Constructor':ScaleDoer,'init':function init(a,b){var c=this;c[a2b('0x24c')]=a['company'];c['agent']=a[a2b('0x22f')];c[a2b('0x2ba')]=a[a2b('0x2ba')];c[a2b('0x4f')]=a[a2b('0x4f')]||a2b('0x83');c['QUEUES']={'collect_exec':a2b('0xdf')+'_'+c[a2b('0x4f')]+'_'+c['agent'],'checkconn_exec':a2b('0xb')+'_'+c[a2b('0x22f')],'discover_exec':a2b('0x25a')+'_'+c[a2b('0x22f')],'webhook_exec':'DO'+'_'+c[a2b('0x22f')]};c[a2b('0x8f')]=a[a2b('0x4e')][a2b('0xfc')];c[a2b('0x100')]=a[a2b('0x15b')];c[a2b('0x25b')]=a['db'];c['logger'][a2b('0x246')](c[a2b('0x1e')]['LOG_LEVEL_INFO'],a2b('0x2b'));c['logger']['log'](c[a2b('0x1e')]['LOG_LEVEL_DEBUG'],a2b('0x7')+c[a2b('0x24c')]+a2b('0x1dc')+c[a2b('0x2ba')]+'\x20staging:'+c[a2b('0x4f')]);async[a2b('0x67')]([function(d){c['get_cloud_region'][a2b('0x12a')](c,d);},function(d){c[a2b('0x138')]=redis[a2b('0x36')](Object[a2b('0x227')](c['redis_conf'],{'prefix':'q','db':0x2,'password':decrypt(c[a2b('0x25b')][a2b('0x6a')],c[a2b('0x24c')]+c[a2b('0x8f')]['replace'](':','')),'rename_commands':rdscmds}));c[a2b('0x138')]['on']('error',function(f){c[a2b('0x1e')][a2b('0x246')](c['logger'][a2b('0x16b')],a2b('0x23a')+f[a2b('0x1ad')]+a2b('0x2be')+f[a2b('0x2b7')]+a2b('0x2be')+f[a2b('0x1dd')]);});c[a2b('0xc7')]=kue[a2b('0xaa')]({'prefix':'q','redis':Object[a2b('0x227')](c['redis_conf'],{'auth':decrypt(c[a2b('0x25b')][a2b('0x6a')],c['company']+c[a2b('0x8f')][a2b('0x251')](':','')),'db':a[a2b('0x10f')],'options':{'rename_commands':rdscmds}})});c[a2b('0xc7')][a2b('0x215')]();c[a2b('0xc7')][a2b('0x6b')](c['concurrency_nb']*0x2);c[a2b('0xc7')]['on'](a2b('0xee'),function(f){c[a2b('0x1e')][a2b('0x246')](c[a2b('0x1e')][a2b('0x16b')],a2b('0x15e')+f['code']+a2b('0x2be')+f[a2b('0x2b7')]+a2b('0x2be')+f['origin']);});d();},function(d){c[a2b('0x296')]=new pushcli(a[a2b('0x4e')]['protocole']+a2b('0x14d')+(a[a2b('0x4e')][a2b('0xfc')]?a[a2b('0x4e')][a2b('0xfc')]+'@':'')+a[a2b('0x4e')]['host']+':'+a[a2b('0x4e')][a2b('0x1be')]+a2b('0x6'),c[a2b('0x2ba')],c[a2b('0x4f')]);d();},function(d){if(!fs$1[a2b('0x1ce')](c[a2b('0x19b')])){fs$1['mkdirSync'](c['certif_dir']);}d();}],function(){c['logger'][a2b('0x246')](c['logger'][a2b('0x19d')],a2b('0x29c'),c[a2b('0x65')]);b[a2b('0x12a')](c);});},'connect_sap':function connect_sap(a,b,c){var d=this;process[a2b('0x116')][a2b('0x16a')]='0';d['logger'][a2b('0x246')](d[a2b('0x1e')]['LOG_LEVEL_DEBUG'],a2b('0x11a')+a[a2b('0x22d')][a2b('0x235')]+a2b('0x13e'));async[a2b('0x259')]([function(f){d[a2b('0x1a9')](a[a2b('0x22d')][a2b('0x235')],a[a2b('0x171')],f);},function(f){var g=a['system']['is_encrypted']?{'protocol':a2b('0x21f'),'port_suffix':'14'}:{'protocol':'http','port_suffix':'13'};var h=g[a2b('0x20b')]+a2b('0x14d')+(a[a2b('0x22d')][a2b('0x58')]||a[a2b('0x22d')][a2b('0x85')])+':5'+a[a2b('0x22d')]['sn']+g[a2b('0x280')]+'/';d[a2b('0x1e')][a2b('0x246')](d['logger']['LOG_LEVEL_DEBUG'],a2b('0x13f'),h);d['pushgtw_cli'][a2b('0x1f')](a[a2b('0x22d')][a2b('0x235')]);d[a2b('0x200')](h,{'method':a[a2b('0x22d')]['auth_method'],'options':[{'user':a[a2b('0x22d')][a2b('0x201')],'pwd':a[a2b('0x22d')]['password']},{'pfx':a[a2b('0x22d')][a2b('0x73')]==0x1&&d['certif_dir']+'/'+a['system'][a2b('0x235')]+a2b('0x95')}]},a,f);},function(f,g){f['soapcli'][a2b('0xcc')]({},function(h,i){if(!h&&i&&i[a2b('0x125')]&&i[a2b('0x125')][a2b('0x242')]){var j=i[a2b('0x125')][a2b('0x242')][a2b('0x11b')](function(l){var m=(''+l[a2b('0x222')])['padStart'](0x2,'0');var n=a[a2b('0x22d')][a2b('0x1a6')]['find'](function(o){return o[a2b('0xcd')]==m;});return{'ip_internal':n&&n[a2b('0x58')],'hostname':l[a2b('0x85')],'instancenr':m,'features':l[a2b('0x28')][a2b('0xf9')]('|'),'status':l[a2b('0x29a')]==d[a2b('0x277')][a2b('0x223')]?0x1:l[a2b('0x29a')]==d['_sap_statuses'][a2b('0x1bd')]?-0x1:0x0};});var k=d[a2b('0x2d')](i[a2b('0x125')]['item']);if(k==d[a2b('0x277')][a2b('0x5')]||k==d[a2b('0x277')][a2b('0xf')]){g(d[a2b('0xd7')][a2b('0x26a')],f[a2b('0x196')]);}else{d['pushgtw_cli']['pushUpInstance']('up',a[a2b('0xd5')],a[a2b('0x22d')][a2b('0x235')],d[a2b('0x129')],a[a2b('0x22d')][a2b('0x193')],0x1);d[a2b('0x23f')][a[a2b('0x22d')][a2b('0x235')]]=0x0;g(null,j,a[a2b('0x22d')][a2b('0x73')],a['system'][a2b('0x201')],a[a2b('0x22d')][a2b('0x26d')],a[a2b('0x22d')][a2b('0x73')]==0x1?d[a2b('0x19b')]+'/'+a['system'][a2b('0x235')]+'.pfx':null,{'is_encrypted':a[a2b('0x22d')]['is_encrypted'],'is_direct':a[a2b('0x22d')]['is_direct']},a);}}else{g(d[a2b('0xd7')]['ws_not_reachable'],h&&h[a2b('0xc3')]+'\x20'+h[a2b('0x1be')]);}});},function(f,g,h,i,j,k,l,m){d[a2b('0x1e')][a2b('0x246')](d[a2b('0x1e')][a2b('0x2a6')],'{'+a[a2b('0x22d')][a2b('0x235')]+a2b('0x5d')+f[a2b('0x11b')](function(o){return o[a2b('0x58')]+'|'+o[a2b('0x85')]+'/'+o[a2b('0xcd')]+'/'+o[a2b('0x262')];})[a2b('0x2cb')](',\x20'));var n=[];if(!f||f['filter'](function(o){return o[a2b('0x262')]==0x1&&o[a2b('0x28')]['indexOf'](a2b('0x2bc'))<0x0&&o[a2b('0x28')]['indexOf']('ENQUE')<0x0;})['length']==0x0){d[a2b('0x296')][a2b('0x1ff')](a2b('0x2cd'),l['system'][a2b('0x235')]);m(d[a2b('0xd7')]['no_active_instance']);}else{async['eachOf'](f['filter'](function(o){return o[a2b('0x262')]==0x1&&o['features'][a2b('0x2ac')](a2b('0x2bc'))<0x0&&o[a2b('0x28')][a2b('0x2ac')](a2b('0x135'))<0x0;}),function(o,p,q){var r=k[a2b('0x8d')]?{'protocol':a2b('0x21f'),'port_suffix':'14'}:{'protocol':a2b('0x213'),'port_suffix':'13'};var s=r['protocol']+a2b('0x14d')+(o[a2b('0x58')]||o[a2b('0x85')])+':5'+o[a2b('0xcd')]+r[a2b('0x280')]+'/';d[a2b('0x200')](s,{'method':g,'options':[{'user':h,'pwd':i},{'pfx':j}]},null,function(t,u){if(t){d[a2b('0x1e')][a2b('0x246')](d['logger'][a2b('0x16b')],'{'+a[a2b('0x22d')][a2b('0x235')]+a2b('0x20e')+o[a2b('0x85')]+'/'+o[a2b('0xcd')]+':',t);f[p][a2b('0x262')]=-0x1;f[p]=Object[a2b('0x227')](f[p],{'error':t,'occur_date':new Date()});q();}else{var v=a[a2b('0x22d')]['instances']['find'](function(w){return w[a2b('0xcd')]==o[a2b('0xcd')];});n[a2b('0x272')]({'c':u[a2b('0x196')],'f':o[a2b('0x28')],'n':o['instancenr'],'h':o['hostname'],'i':v&&v&&v[a2b('0x58')]});q();}});},function(){a[a2b('0x22d')][a2b('0x1a6')][a2b('0x3b')](function(o,p){f['forEach'](function(q){if(o&&o[a2b('0xcd')]==q[a2b('0xcd')]){a[a2b('0x22d')][a2b('0x1a6')][p]=Object[a2b('0x227')](o,q);if(q[a2b('0xee')]==undefined&&q[a2b('0x262')]!=-0x1){delete a[a2b('0x22d')][a2b('0x1a6')][p][a2b('0xee')];}}if(a['system'][a2b('0x1a6')]['map'](function(r){return r&&r[a2b('0xcd')];})[a2b('0x2ac')](q[a2b('0xcd')])<0x0){a[a2b('0x22d')][a2b('0x1a6')]['push'](q);}if(o&&f['map'](function(r){return r[a2b('0xcd')];})[a2b('0x2ac')](o['instancenr'])<0x0){a[a2b('0x22d')][a2b('0x1a6')][p][a2b('0x262')]=0x0;delete a[a2b('0x22d')]['instances'][p][a2b('0xee')];}});});d[a2b('0x296')][a2b('0x224')]('up',a['entity_id'],a[a2b('0x22d')][a2b('0x235')],d[a2b('0x129')],a['system'][a2b('0x193')],a[a2b('0x22d')][a2b('0x1a6')]);async[a2b('0x1bc')](n,function(o,p){b(o,f,p);},function(o){if(o){d[a2b('0x1e')]['log'](d['logger'][a2b('0x16b')],'{'+a[a2b('0x22d')][a2b('0x235')]+a2b('0xa2'),o);}d[a2b('0x296')][a2b('0x1ff')](a2b('0x2cd'),a[a2b('0x22d')][a2b('0x235')]);m(o,f);});});}}],function(f,g){if(f){switch(f){case d[a2b('0xd7')][a2b('0x26a')]:d[a2b('0x1e')][a2b('0x246')](d['logger'][a2b('0x16b')],a2b('0x2bf')+a[a2b('0x22d')][a2b('0x235')]+'}:',d[a2b('0xd7')]['conn_failed']);d[a2b('0x170')](g,a);break;case d['_errors'][a2b('0x2c3')]:d['logger'][a2b('0x246')](d[a2b('0x1e')]['LOG_LEVEL_ERROR'],a2b('0x2bf')+a[a2b('0x22d')][a2b('0x235')]+'}:',d[a2b('0xd7')]['no_system_conn']);break;case d['_errors'][a2b('0x1b3')]:d[a2b('0x1e')][a2b('0x246')](d[a2b('0x1e')]['LOG_LEVEL_ERROR'],'[FAILED]\x20{'+a[a2b('0x22d')]['syst_id']+'}:',d[a2b('0xd7')][a2b('0x1b3')],g);d[a2b('0x146')](a2b('0x2cd'),a[a2b('0xd5')],a[a2b('0x22d')][a2b('0x235')],a[a2b('0x22d')][a2b('0x193')],a[a2b('0x22d')][a2b('0x1a6')]['map'](function(h){return{'instancenr':h[a2b('0xcd')],'status':0x0};}));break;case d['_errors']['ws_not_reachable']:d[a2b('0x1e')]['log'](d['logger'][a2b('0x16b')],a2b('0x2bf')+a[a2b('0x22d')][a2b('0x235')]+'}:',d['_errors'][a2b('0x31')],g);break;default:if(f['errno']==a2b('0x1ee')){if(g===!![]){d[a2b('0x146')](a2b('0x2cd'),a[a2b('0xd5')],a[a2b('0x22d')][a2b('0x235')],a[a2b('0x22d')][a2b('0x193')],a[a2b('0x22d')][a2b('0x1a6')]['map'](function(h){return{'instancenr':h[a2b('0xcd')],'status':0x0};}));}}else{d[a2b('0x1e')][a2b('0x246')](d[a2b('0x1e')]['LOG_LEVEL_ERROR'],a2b('0x2bf')+a['system'][a2b('0x235')]+'}:',f,g);}break;}c(f['code']||f[a2b('0x226')]||f);}else{c(null,{'sending_sslcertifs':d['sending_sslcertifs'][a['system'][a2b('0x235')]],'instances':g,'syst_id':a[a2b('0x22d')][a2b('0x235')]});}});},'collect':function collect(){var a=this;a[a2b('0xc7')][a2b('0x1d1')](a[a2b('0x65')][a2b('0x2a4')],a[a2b('0x100')],function(b,c){if(b[a2b('0x165')]['func']&&b[a2b('0x165')]['system']){a[a2b('0x1a9')](b['data'][a2b('0x22d')][a2b('0x235')],b['data'][a2b('0x171')],function(d){if(d){c(a2b('0x233'));}else{a[a2b('0xf0')](b[a2b('0x165')],function(f,g,h){if(f['f'][a2b('0x2ac')](b[a2b('0x165')][a2b('0x1c9')][a2b('0x27e')])>=0x0||b[a2b('0x165')][a2b('0x1c9')][a2b('0x27e')]==a2b('0x1d8')){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x11a')+b[a2b('0x165')]['system'][a2b('0x235')]+a2b('0x274')+b[a2b('0x165')][a2b('0x1c9')]['name']+':\x20execution');sapcontrol_operations$1[b['data'][a2b('0x1c9')][a2b('0x1e0')]][a2b('0x12a')](f['c'],{},function(i,j){if(i){a[a2b('0x1e')]['log'](a[a2b('0x1e')][a2b('0x16b')],a2b('0x2bf')+b[a2b('0x165')][a2b('0x22d')][a2b('0x235')]+'}\x20sapcontrol:'+b['data']['func'][a2b('0x1e0')]+a2b('0x1f3')+i['body']?i[a2b('0x3')][a2b('0xa3')](/<faultstring>(.*?)<\/faultstring>/)[0x1]:i);}sapctrl_process_func$1[a2b('0x12a')](a,i,j,b[a2b('0x165')][a2b('0x1c9')]['name'],{'_id':b['data'][a2b('0x22d')][a2b('0x235')],'sid':b['data'][a2b('0x22d')][a2b('0x193')]},{'ip_internal':f['i'],'hostname':f['h'],'sn':f['n'],'features':f['f'][a2b('0x2cb')]('|')},b[a2b('0x165')][a2b('0x1c9')][a2b('0x27e')],b['data'][a2b('0xd5')],b[a2b('0x165')][a2b('0x1a3')],b[a2b('0x165')][a2b('0x2ad')],h);});}else h();},c);}});}else{a[a2b('0x1e')]['log'](a[a2b('0x1e')][a2b('0x16b')],a2b('0x2bf')+b['data'][a2b('0x22d')][a2b('0x235')]+a2b('0xde'));c();}});},'checkconnection':function checkconnection(){var a=this;var b=0x2;function c(d,f,g,h,i){if(f<=0x0){i(a2b('0x9a'));}else{if(g[a2b('0x175')]==0x0){a[a2b('0x1b4')]['discoverEC2Instances'](d,function(k,l){if(l&&l[a2b('0x175')]>0x0){c(d,f-0x1,l,h,i);}else i(a2b('0x9a'));});}else{var j=[];g['forEach'](function(k){if(k[a2b('0xf7')]){h[a2b('0x3b')](function(l){j['push']({'ip':k[a2b('0x58')],'nr':l[a2b('0xcd')],'hostname':l[a2b('0x85')],'cloud_instance_id':k[a2b('0x5f')],'cloud_instance_type':k[a2b('0x2')],'cloud_instance_is_sap_or_down':k['is_sap_or_down'],'status':![]});});}});a[a2b('0x1e')]['log'](a['logger'][a2b('0x2a6')],a2b('0x14c'),j);async[a2b('0x4d')](j,function(k,l,m){a[a2b('0x15a')](k['ip'],k['nr'],k[a2b('0x85')],function(n){j[l][a2b('0x262')]=n;j[l][a2b('0x21c')]=n;m();});},function(k){if(k){a[a2b('0x1e')]['log'](a[a2b('0x1e')][a2b('0x16b')],a2b('0x2b4'),k);}a['logger']['log'](a['logger'][a2b('0x2a6')],'Valid\x20SAP\x20IP\x20NR\x20:',j[a2b('0x5b')](function(m){return m[a2b('0x262')];}));var l=h[a2b('0x11b')](function(m){var n=j[a2b('0x2c8')](function(o){return o['status']&&o[a2b('0x85')]==m[a2b('0x85')]&&o['nr']==m[a2b('0xcd')];});if(n){return Object[a2b('0x227')](m,{'ip_internal':n['ip'],'cloud_instance_id':n[a2b('0x11c')],'cloud_instance_type':n[a2b('0x126')]});}})['filter'](function(m){return m[a2b('0x58')];});if(l[a2b('0x175')]==0x0||l['length']<h[a2b('0x175')]){a[a2b('0x1b4')][a2b('0x1f9')](d,function(m,n){if(!n||n[a2b('0x175')]==0x0){i(a2b('0x9a'));}else{var o=n[a2b('0x5b')](function(p){return!g[a2b('0x2bd')](p[a2b('0x58')]);});if(o[a2b('0x175')]>0x0){c(d,f-0x1,o,h,i);}else i(a2b('0x9a'));}});}else{if(f==b){i(null,{'instances':l});}else{i(null,{'instances':l,'new_ec2':g});}}});}}}a[a2b('0xc7')]['process'](a[a2b('0x65')][a2b('0x17c')],a[a2b('0x100')],function(d,f){if(d[a2b('0x165')]['ip']!=undefined&&d[a2b('0x165')]['nr']!=undefined&&d[a2b('0x165')][a2b('0x85')]!=undefined&&d[a2b('0x165')][a2b('0x17e')]!=undefined){process[a2b('0x116')][a2b('0x16a')]='0';a[a2b('0x1db')](d[a2b('0x165')]['ip'],d[a2b('0x165')]['nr'],function(g,h){if(g){f(g);}else{try{var i=fs$1[a2b('0x17f')](__dirname+a2b('0x294'))[a2b('0x1c0')]();a['logger']['log'](a['logger'][a2b('0x2a6')],a2b('0x8'),i,d[a2b('0x165')]['sap_instances_ip'],h);c(i,b,d['data'][a2b('0x17e')],h,f);}catch(j){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0xb6'),j);f('Unexcepted\x20error');}}});}else{f();}});a[a2b('0xc7')][a2b('0x1d1')](a[a2b('0x65')][a2b('0x28a')],a[a2b('0x100')],function(d,f){if(d['data'][a2b('0x27e')]!=undefined&&d[a2b('0x165')]['system']){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x11a')+d['data'][a2b('0x22d')]['syst_id']+a2b('0xea'));switch(d[a2b('0x165')][a2b('0x27e')]){case 0x0:a[a2b('0x1a9')](d[a2b('0x165')][a2b('0x22d')][a2b('0x235')],d[a2b('0x165')]['keys_buff'],function(g){if(g){f(a2b('0x233'));}else{var h=0x2710;a['connect_sap'](d[a2b('0x165')],function(i,j,k){var l=j[a2b('0x7e')](function(m){return m[a2b('0xcd')]==i['n'];});async['parallel']({'check':function m(n){i['c'][a2b('0x241')]({'function':a2b('0x128')},function(o){if(o){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x1f5')+i['h']+'/'+i['i']+'/'+i['n']);j[l][a2b('0x262')]=-0x1;j[l]=Object[a2b('0x227')](j[l],{'error':o[a2b('0x3')]?o[a2b('0x3')][a2b('0xa3')](/<faultstring>(.*?)<\/faultstring>/)[0x1]:o,'occur_date':new Date()});}n();},{'timeout':h});},'ip':function n(o){async['waterfall']([function(p){i['c']['GetAlertTree']({},function(q,r){if(!q&&r&&r[a2b('0x121')]){var s=r[a2b('0x121')][a2b('0x242')][a2b('0x5b')](function(t){return r[a2b('0x121')][a2b('0x242')][t[a2b('0x266')]]&&r[a2b('0x121')][a2b('0x242')][t[a2b('0x266')]][a2b('0x1e0')][a2b('0x22e')]()=='Server\x20Configuration'&&t[a2b('0x1e0')][a2b('0x22e')]()=='IP\x20Address';});if(s&&s[0x0]&&s[0x0][a2b('0x9')]){j[l]['ip_internal']=s[0x0][a2b('0x9')];p(null,s[0x0][a2b('0x9')]);}}else p(a2b('0x236')+q);});},function(p,q){a[a2b('0x1b4')][a2b('0xd9')](p,function(r){return q(null,r);});},function(p,q){j[l][a2b('0x11c')]=p[a2b('0x5f')];j[l][a2b('0x126')]=p[a2b('0x2')];q();}],function(p){if(p){a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x16b')],'checkconn_exec\x20error\x20getting\x20SAP\x20instance\x20details\x20(IP,\x20cloud\x20instance\x20ID\x20and\x20type):'+i['h']+'/'+i['i']+'/'+i['n']+':',p);}o();});}},function(){k();});},f);}});break;case 0x1:f();break;default:f();break;}}else{a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x2bf')+d[a2b('0x165')][a2b('0x22d')][a2b('0x235')]+a2b('0x8b'));f();}});},'scale':function scale(){var a=this;var b=0x0;var c=0x1;var d=0x2;var f=0x3;var g=0x4;var h=0x5;var i=0x6;var j=0x7;var k=0x8;var l=[];l[b]=a2b('0x211');l[c]=a2b('0x14e');l[d]=a2b('0x225');l[f]='Stop\x20EC2\x20server\x20operation\x20timeout\x20(but\x20SAP\x20instance\x20successfully\x20stopped)';l[g]=a2b('0x20f');l[h]=a2b('0x234');l[i]=a2b('0x50');l[j]=a2b('0xb8');l[k]='Stop\x20SAP\x20instance\x20operation\x20timeout';function m(v,w,x,y,z){if(w>0x0){setTimeout(function(){v[a2b('0xcc')]({},function(A,B){if(!A){var C=B[a2b('0x125')]['item']&&B[a2b('0x125')][a2b('0x242')][a2b('0x5b')](function(D){return D[a2b('0x222')]==y;});if(C&&C[0x0]&&C[0x0][a2b('0x29a')]==a2b('0xd4')){z();}else{m(v,w-0x1,x,y,z);}}else{m(v,w-0x1,x,y,z);}});},x);}else z(k);}function n(v,w,x,y,z){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x1b5'),w,x,y);if(w>0x0){setTimeout(function(){v[a2b('0xcc')]({},function(A,B){if(!A){var C=B[a2b('0x125')]['item']&&B['instance'][a2b('0x242')]['filter'](function(D){return(''+D['instanceNr'])['padStart'](0x2,'0')==y+'';});if(C&&C[0x0]&&C[0x0][a2b('0x29a')]==a[a2b('0x277')]['green']){z();}else{n(v,w-0x1,x,y,z);}}else{n(v,w-0x1,x,y,z);}});},x);}else z(i);}function o(v,w,x,y,z){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x26e'),w,x,y);if(w>0x0){setTimeout(function(){v[a2b('0x1e3')](y,function(A){if(A!=undefined&&A!=null){if(A){z();}else o(v,w-0x1,x,y,z);}else z(c);});},x);}else z(b);}function p(v,w,x,y,z){if(w>0x0){setTimeout(function(){v[a2b('0x178')](y,function(A){if(A!=undefined&&A!=null){if(A){z();}else p(v,w-0x1,x,y,z);}else z(g);});},x);}else z(f);}function q(v,w,x,y){var z=arguments['length']>0x4&&arguments[0x4]!==undefined?arguments[0x4]:0x1;if(z>0x0){a[a2b('0x21b')][w[a2b('0x235')]][y][a2b('0x262')]=0x3;sapcontrol_operations$1[a2b('0x23b')][a2b('0x12a')](v,{},function(A){if(A!==undefined&&A!==null){if(A[a2b('0x3')]){var B=A['body'][a2b('0xa3')](/<faultstring>(.*?)<\/faultstring>/)&&A['body']['match'](/<faultstring>(.*?)<\/faultstring>/)[0x1];if(B==a2b('0x1e1')){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x167')],a2b('0x1c3')+w[a2b('0x235')]+a2b('0x8e')+z+')\x20already\x20started:'+w[a2b('0x235')]+'/'+x[a2b('0x85')]+'/'+x[a2b('0x58')]+'/'+x[a2b('0xcd')]);a[a2b('0x21b')][w[a2b('0x235')]][y]['status']=0x1;a[a2b('0x216')](w[a2b('0x235')],y,-0x1);}else{a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],'[FAILED]\x20{'+w[a2b('0x235')]+a2b('0x80')+z+a2b('0x202')+B);a['updated_system_instances'][w[a2b('0x235')]][y][a2b('0x262')]=-0x1;a[a2b('0x21b')][w['syst_id']][y]['error']={'occur_date':Date[a2b('0x2b9')](),'msg':l[h]+':'+B};q(v,w,x,y,z-0x1);}}else{a['logger'][a2b('0x246')](a['logger'][a2b('0x16b')],'[FAILED]\x20{'+w[a2b('0x235')]+'}\x20(restart\x20-'+z+a2b('0x202'),A);a['updated_system_instances'][w[a2b('0x235')]][y][a2b('0x262')]=-0x1;a['updated_system_instances'][w[a2b('0x235')]][y]['error']={'occur_date':Date['now'](),'msg':l[h]};q(v,w,x,y,z-0x1);}}else{var C=0x14;var D=0x12c;var E=Math['ceil'](D/C);a[a2b('0x1e')]['log'](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x11a')+w[a2b('0x235')]+a2b('0x80')+z+a2b('0x10e')+D+a2b('0x1a2')+x[a2b('0x85')]+'/'+x[a2b('0x58')]+'/'+x[a2b('0xcd')]);n(v,E,C*0x3e8,x[a2b('0xcd')],function(F){if(F){a['updated_system_instances'][w[a2b('0x235')]][y][a2b('0x262')]=-0x1;a[a2b('0x21b')][w[a2b('0x235')]][y][a2b('0xee')]={'occur_date':Date[a2b('0x2b9')](),'msg':l[i]};a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x167')],a2b('0x1c3')+w[a2b('0x235')]+'}\x20(restart-'+z+a2b('0x2c7')+w[a2b('0x235')]+'/'+x['hostname']+'/'+x[a2b('0x58')]+'/'+x[a2b('0xcd')]+a2b('0x151'),l[i]);q(v,w,x,y,z-0x1);}else{a[a2b('0x21b')][w[a2b('0x235')]][y][a2b('0x262')]=0x1;delete a[a2b('0x21b')][w[a2b('0x235')]][y][a2b('0xee')];a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_MIN'],a2b('0x1c3')+w['syst_id']+a2b('0x8e')+z+a2b('0xb0')+w[a2b('0x235')]+'/'+x[a2b('0x85')]+'/'+x['ip_internal']+'/'+x['instancenr']);a[a2b('0x216')](w[a2b('0x235')],y,-0x1);}});}});}else{a['logger'][a2b('0x246')](a['logger'][a2b('0x167')],a2b('0x1c3')+w[a2b('0x235')]+a2b('0x8e')+z+a2b('0x148')+w[a2b('0x235')]+'/'+x[a2b('0x85')]+'/'+x[a2b('0x58')]+'/'+x[a2b('0xcd')]);a[a2b('0x21b')][w[a2b('0x235')]][y][a2b('0x262')]=-0x1;a[a2b('0x21b')][w[a2b('0x235')]][y][a2b('0xee')]={'occur_date':Date[a2b('0x2b9')](),'msg':l[i]};a[a2b('0x216')](w[a2b('0x235')],y,-0x1);}}function r(v,w){var x=arguments[a2b('0x175')]>0x2&&arguments[0x2]!==undefined?arguments[0x2]:![];var y=arguments[a2b('0x175')]>0x3&&arguments[0x3]!==undefined?arguments[0x3]:-0x1;process[a2b('0x116')]['NODE_TLS_REJECT_UNAUTHORIZED']='0';var z=v['alert'];var A=v[a2b('0x22d')];var B=z[a2b('0x292')]['instance'];var C=z[a2b('0x292')][a2b('0xd5')];var D=A['instances'][a2b('0x2c8')](function(F){return F[a2b('0xcd')]==z[a2b('0x292')]['sn'];});var E=x?'<-':'';if(a[a2b('0x21b')][B]==undefined||a[a2b('0x21b')][B]['length']==0x0){a['updated_system_instances'][B]=_toConsumableArray(A['instances']);}if(A&&D){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x19d')],'[PENDING]\x20{'+A[a2b('0x235')]+a2b('0x1fb')+E+a2b('0x204')+D['hostname']+'/'+D[a2b('0xcd')]+'/'+D['status']+'\x20from\x20alert\x20'+z[a2b('0x292')][a2b('0x1c4')]+'\x20'+z[a2b('0x292')]['sn']+a2b('0x2be')+z[a2b('0x292')]['ip_internal']+'\x20'+z['labels'][a2b('0x85')]);async['waterfall']([function(F){a[a2b('0x1a9')](v[a2b('0x22d')]['syst_id'],v[a2b('0x171')],F);},function(F){var G={'protocol':a2b('0x21f'),'port_suffix':'14'};var H=G['protocol']+a2b('0x14d')+(D[a2b('0x58')]||D[a2b('0x85')])+':5'+D[a2b('0xcd')]+G[a2b('0x280')]+'/';a[a2b('0x296')]['addInstance'](v[a2b('0x22d')]['syst_id']);a[a2b('0x200')](H,{'method':0x1,'options':[{},{'pfx':a[a2b('0x19b')]+'/'+v[a2b('0x22d')][a2b('0x235')]+a2b('0x95')}]},v,F);},function(F,G){if(!F||!F[a2b('0x196')]){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x11a')+A[a2b('0x235')]+a2b('0x1fb')+E+a2b('0x23c')+B);async_cb(a[a2b('0xd7')]['soap_client_init']);}else{F[a2b('0x196')]['GetSystemInstanceList']({},function(H,I){if(!H&&I&&I[a2b('0x125')]&&I['instance'][a2b('0x242')]){var J=a[a2b('0x2d')](I[a2b('0x125')]['item']);if(J==a[a2b('0x277')]['red']||J==a[a2b('0x277')]['gray']){G(a[a2b('0xd7')][a2b('0x26a')],F['soapcli']);}else{a['pushgtw_cli'][a2b('0x2b2')]('up',C,v[a2b('0x22d')]['syst_id'],a['region'],v['system'][a2b('0x193')],0x1);a[a2b('0x23f')][v['system'][a2b('0x235')]]=0x0;var K={};var L=I['instance']['item'][a2b('0x11b')](function(M){return{'hostname':M['hostname'],'instancenr':(''+M[a2b('0x222')])[a2b('0x2ca')](0x2,'0'),'features':M['features']['split']('|'),'status':M[a2b('0x29a')]==a['_sap_statuses']['green']?0x1:M[a2b('0x29a')]==a[a2b('0x277')][a2b('0x1bd')]?-0x1:0x0};});a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x11a')+A['syst_id']+'}\x20(stop'+E+a2b('0x180')+L['map'](function(M){return M['hostname']+'/'+M[a2b('0xcd')]+'/'+M[a2b('0x262')];})[a2b('0x2cb')](',\x20'));L[a2b('0x5b')](function(M){return M['status']==0x1;})[a2b('0x3b')](function(M){K[M[a2b('0xcd')]]=M['features'][a2b('0x2cb')]('/');});if(Object['values'](K)[a2b('0x5b')](function(M){return M==K[z[a2b('0x292')]['sn']];})[a2b('0x175')]>a[a2b('0xf1')]||x&&y>=a[a2b('0xfa')][a2b('0x2c')]['sap_stop_triggered']){F[a2b('0xe2')]=Object['assign'](F[a2b('0xe2')],{'instances':L});G(null,F);}else{G(a[a2b('0xd7')][a2b('0x39')]);}}}else{G(a[a2b('0xd7')][a2b('0x31')],H&&H['address']+'\x20'+H[a2b('0x1be')]);}});}},function(F,G){if(x||a[a2b('0x21b')][B][a2b('0x5b')](function(K){return K[a2b('0x262')]==0x2&&K[a2b('0xcd')]==z[a2b('0x292')]['sn'];})[a2b('0x175')]==0x0){var H=a['updated_system_instances'][B][a2b('0x11b')](function(K){return K[a2b('0xcd')];})[a2b('0x2ac')](D[a2b('0xcd')]);if(H<0x0){H=a['updated_system_instances'][B][a2b('0x272')](Object[a2b('0x227')]({},D,{'status':0x2,'resume_on_step':a[a2b('0xfa')]['stop']['begin'],'resume_context':v}))-0x1;}else{a[a2b('0x21b')][B][H]=Object['assign']({},a[a2b('0x21b')][B][H],{'status':0x2,'resume_on_step':a['_resume_on_step'][a2b('0x2c')][a2b('0x9f')],'resume_context':v});}a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x19d')],a2b('0x11a')+A['syst_id']+a2b('0x1fb')+E+a2b('0x18f')+a['updated_system_instances'][B][a2b('0x11b')](function(K){return K[a2b('0x85')]+'/'+K[a2b('0xcd')]+'/'+K[a2b('0x262')];})['join'](','));G();var I=v[a2b('0xd')][a2b('0x2c8')](function(K){return K['instancenr']==z[a2b('0x292')]['sn'];});var J=I?I[a2b('0x27b')]:0x0;a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_MIN'],a2b('0x11a')+B+a2b('0x1fb')+E+a2b('0x12')+z[a2b('0x292')]['alertname']+'/'+z[a2b('0x292')][a2b('0x85')]+'/'+z['labels']['sn']+'\x20(counter='+parseInt(J)+0x1+a2b('0xc')+C+')');async[a2b('0x5a')]([function(K){if(!x||a['resume_here_on_interruption'](B,H,a[a2b('0xfa')][a2b('0x2c')][a2b('0x9d')])){a[a2b('0x296')][a2b('0x8c')]('counter','stop',C,B,z[a2b('0x292')]['sn'],z['labels'][a2b('0x1c4')],parseInt(J)+0x1);a[a2b('0x216')](B,H,a['_resume_on_step'][a2b('0x2c')][a2b('0x9d')]);}K();},function(K){if(!x||a[a2b('0x19c')](B,H,a[a2b('0xfa')][a2b('0x2c')][a2b('0x189')])){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_INFO'],'[PENDING]\x20{'+B+'}\x20(stop'+E+a2b('0x229')+z[a2b('0x292')][a2b('0x58')]+'/'+z['labels'][a2b('0x85')]+'/'+z[a2b('0x292')]['sn']);sapcontrol_operations$1[v['action'][a2b('0x1e0')]][a2b('0x12a')](F[a2b('0x196')],{},function(L){a['save_resume_step'](B,H,a['_resume_on_step']['stop']['sap_stop_triggered']);if(L){K(j);}else{K();}});}else K();},function(K){var L=0x14;var M=0x12c;var N=Math[a2b('0x1e6')](M/L);a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_INFO'],'[PENDING]\x20{'+B+a2b('0x1fb')+E+a2b('0x158')+M+a2b('0x12c')+z[a2b('0x292')][a2b('0x58')]+'/'+z[a2b('0x292')][a2b('0x85')]+'/'+z[a2b('0x292')]['sn']);m(F[a2b('0x196')],N,L*0x3e8,z[a2b('0x292')]['sn'],K);},function(K){if(!x||a[a2b('0x19c')](B,H,a['_resume_on_step'][a2b('0x2c')][a2b('0x267')])){a[a2b('0x1e')]['log'](a[a2b('0x1e')]['LOG_LEVEL_INFO'],a2b('0x11a')+B+a2b('0x1fb')+E+a2b('0xd3')+z['labels'][a2b('0x58')]);a[a2b('0x1b4')][a2b('0x62')](z[a2b('0x292')][a2b('0x58')],K);a[a2b('0x216')](B,H,a[a2b('0xfa')][a2b('0x2c')]['ec2_stop_triggered']);}else K();}],function(K){if(K){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_ERROR'],'[FAILED]\x20{'+B+a2b('0x1fb')+E+'):',K);switch(K){case j:a[a2b('0x21b')][B][H][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][H][a2b('0xee')]={'occur_date':Date[a2b('0x2b9')](),'msg':l[j]};break;case l[k]:a[a2b('0x21b')][B][H][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][H][a2b('0xee')]={'occur_date':Date[a2b('0x2b9')](),'msg':l[k]};break;case a['aws_cli'][a2b('0xd7')][a2b('0x45')]:a[a2b('0x21b')][B][H][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][H][a2b('0xee')]={'occur_date':Date['now'](),'msg':l[d]};break;}a['save_resume_step'](B,H,-0x1);}else{var L=0x14;var M=0x12c;var N=Math[a2b('0x1e6')](M/L);a[a2b('0x21b')][B][H][a2b('0x262')]=0x0;p(a[a2b('0x1b4')],N,L*0x3e8,z['labels']['ip_internal'],function(O){if(O){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_MIN'],'[COMPLETED]\x20{'+B+'}\x20(stop'+E+a2b('0x68')+z[a2b('0x292')][a2b('0x58')]+'/'+z[a2b('0x292')]['hostname']+'/'+z[a2b('0x292')]['sn']+a2b('0x151'),l[O]);a['updated_system_instances'][B][H]['error']={'occur_date':Date[a2b('0x2b9')](),'msg':l[O]};}else{delete a[a2b('0x21b')][B][H][a2b('0xee')];a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x167')],a2b('0x1c3')+B+a2b('0x1fb')+E+a2b('0xbd')+z[a2b('0x292')][a2b('0x58')]+'/'+z[a2b('0x292')][a2b('0x85')]+'/'+z[a2b('0x292')]['sn']);}a[a2b('0x216')](B,H,-0x1);});}});}else{a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x19d')],a2b('0x2ce')+B+a2b('0x1fb')+E+a2b('0x253'));G(a[a2b('0xd7')][a2b('0x43')]);}}],function(F){if(F){a['logger']['log'](a['logger'][a2b('0x16b')],a2b('0x27c')+B+'}\x20(stop'+E+a2b('0x153')+A[a2b('0x58')]+'/'+A[a2b('0x193')]+':',F);switch(F){case a[a2b('0xd7')][a2b('0x218')]:case a[a2b('0xd7')]['conn_failed']:case a[a2b('0xd7')]['ws_not_reachable']:case a[a2b('0xd7')][a2b('0x39')]:case a[a2b('0xd7')]['stop_ongoing']:default:w(F);break;}}else{w(null,{'sending_sslcertifs':a[a2b('0x34')][A[a2b('0x235')]+''],'instances':a['updated_system_instances'],'syst_id':A[a2b('0x235')]});}});}else{a['logger']['log'](a['logger'][a2b('0x16b')],a2b('0x2ce')+B+'}\x20(stop'+E+a2b('0x11f'));w(a2b('0x1e5'));}}function s(v,w){var x=arguments['length']>0x2&&arguments[0x2]!==undefined?arguments[0x2]:![];var y=arguments[a2b('0x175')]>0x3&&arguments[0x3]!==undefined?arguments[0x3]:-0x1;process['env'][a2b('0x16a')]='0';var z=v[a2b('0x14b')];var A=v[a2b('0x22d')];var B=z[a2b('0x292')]['instance'];var C=z['labels']['entity_id'];var D=x?'<-':'';if(a[a2b('0x21b')][B]==undefined||a[a2b('0x21b')][B]['length']==0x0){a[a2b('0x21b')][B]=_toConsumableArray(A[a2b('0x1a6')]);}if(A){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x19d')],a2b('0x11a')+A['syst_id']+a2b('0x17b')+D+a2b('0xa6')+A[a2b('0x58')]+'-'+A[a2b('0x193')]);async['waterfall']([function(E){async['parallel']({'normal_instance_to_start':function F(G){if(x)G();else{async[a2b('0x259')]([function(H){var I=a[a2b('0x21b')][B]['filter'](function(J){return J['status']==0x0&&J[a2b('0x28')]['indexOf'](a2b('0x2bc'))<0x0&&J[a2b('0x28')][a2b('0x2ac')](a2b('0x135'))<0x0;});if(I&&I[a2b('0x175')]>0x0){H();}else{a['logger'][a2b('0x246')](a['logger'][a2b('0x16b')],'[FAILED]\x20{'+A[a2b('0x235')]+a2b('0x17b')+D+'):'+a[a2b('0xd7')][a2b('0x1cd')]);H(a['_errors']['no_start_candidate']);}},function(H){a['update_sending_ssl'](v[a2b('0x22d')][a2b('0x235')],v[a2b('0x171')],H);},function(H){var I=v[a2b('0x22d')][a2b('0x8d')]?{'protocol':a2b('0x21f'),'port_suffix':'14'}:{'protocol':a2b('0x213'),'port_suffix':'13'};var J=I[a2b('0x20b')]+a2b('0x14d')+(v[a2b('0x22d')][a2b('0x58')]||v[a2b('0x22d')][a2b('0x85')])+':5'+v[a2b('0x22d')]['sn']+I[a2b('0x280')]+'/';a[a2b('0x296')][a2b('0x1f')](v['system'][a2b('0x235')]);a['new_soap_client'](J,{'method':v[a2b('0x22d')][a2b('0x73')],'options':[{'user':v[a2b('0x22d')][a2b('0x201')],'pwd':v['system']['password']},{'pfx':v[a2b('0x22d')][a2b('0x73')]==0x1&&a[a2b('0x19b')]+'/'+v[a2b('0x22d')][a2b('0x235')]+a2b('0x95')}]},v,H);},function(H,I){H['soapcli'][a2b('0xcc')]({},function(J,K){if(!J&&K&&K[a2b('0x125')]&&K[a2b('0x125')][a2b('0x242')]){var L=K[a2b('0x125')][a2b('0x242')]['map'](function(N){return{'hostname':N['hostname'],'instancenr':(''+N[a2b('0x222')])['padStart'](0x2,'0'),'features':N[a2b('0x28')]['split']('|'),'status':N[a2b('0x29a')]==a[a2b('0x277')]['green']?0x1:N[a2b('0x29a')]==a[a2b('0x277')][a2b('0x1bd')]?-0x1:0x0};});var M=a[a2b('0x2d')](K[a2b('0x125')][a2b('0x242')]);if(M==a[a2b('0x277')][a2b('0x5')]||M==a[a2b('0x277')][a2b('0xf')]){I(a[a2b('0xd7')][a2b('0x26a')],H[a2b('0x196')]);}else{a['pushgtw_cli'][a2b('0x2b2')]('up',C,v[a2b('0x22d')][a2b('0x235')],a[a2b('0x129')],v[a2b('0x22d')]['sid'],0x1);a[a2b('0x23f')][v[a2b('0x22d')][a2b('0x235')]]=0x0;I(null,L);}}else{I(a[a2b('0xd7')][a2b('0x31')],J&&J[a2b('0xc3')]+'\x20'+J['port']);}});},function(H,I){var J={};H[a2b('0x5b')](function(K){return K['status']==0x1;})[a2b('0x3b')](function(K){J[K['instancenr']]=K[a2b('0x28')][a2b('0x2cb')]('|');});if(Object['values'](J)[a2b('0x5b')](function(K){return!RegExp(a2b('0x2bc'))[a2b('0xc5')](K)&&!RegExp(a2b('0x135'))['test'](K);})[a2b('0x175')]<a['max_instance_running']){I(null,H);}else{I(a[a2b('0xd7')]['max_instances_reached']);}},function(H,I){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],'[PENDING]\x20{'+A[a2b('0x235')]+a2b('0x17b')+D+a2b('0x11d')+H[a2b('0x11b')](function(K){return K[a2b('0x85')]+'/'+K[a2b('0xcd')]+'/'+K[a2b('0x262')];})[a2b('0x2cb')](','));var J=a[a2b('0x21b')][B][a2b('0x5b')](function(K){return K['status']==0x0&&K[a2b('0x28')][a2b('0x2ac')](a2b('0x2bc'))<0x0&&K[a2b('0x28')][a2b('0x2ac')](a2b('0x135'))<0x0;})[a2b('0x5b')](function(K){return H[a2b('0x5b')](function(L){return L[a2b('0x262')]==0x0;})['findIndex'](function(L){return L[a2b('0xcd')]==K[a2b('0xcd')];})>=0x0||H['findIndex'](function(L){return L['instancenr']==K[a2b('0xcd')];})<0x0;});a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x11a')+A[a2b('0x235')]+a2b('0x17b')+D+')\x20candidates\x20instances:'+J['map'](function(K){return K['hostname']+'/'+K[a2b('0xcd')]+'/'+K[a2b('0x262')];})['join'](','));if(J&&J[a2b('0x175')]>0x0){I(null,J[0x0]);}else{I(a[a2b('0xd7')]['no_start_candidate']);}}],function(H,I){if(H){G(H);}else G(null,I);});}},'resume_instance_to_start':function G(H){if(x)H(null,a[a2b('0x21b')][B][y]);else H();}},function(H,I){E(H,I[a2b('0x22c')]||I[a2b('0x12e')]);});},function(E,F){a['logger'][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_DEBUG'],a2b('0x11a')+A[a2b('0x235')]+a2b('0x17b')+D+')\x20current\x20buffered\x20instances:'+a[a2b('0x21b')][B]['map'](function(J){return J['hostname']+'/'+J[a2b('0xcd')]+'/'+J['status'];})[a2b('0x2cb')](','));if(x||a[a2b('0x21b')][B]['filter'](function(J){return J[a2b('0x262')]==0x3;})[a2b('0x175')]==0x0){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x19d')],a2b('0x11a')+A[a2b('0x235')]+'}\x20(start'+D+')\x20alert:'+z[a2b('0x292')][a2b('0x1c4')]+a2b('0x237')+E[a2b('0x85')]+'/'+E['ip_internal']+'/'+E[a2b('0xcd')]);var G=a['updated_system_instances'][B][a2b('0x11b')](function(J){return J[a2b('0xcd')];})[a2b('0x2ac')](E[a2b('0xcd')]);if(G<0x0){G=a['updated_system_instances'][B][a2b('0x272')](Object[a2b('0x227')]({},E,{'status':0x3,'resume_on_step':a[a2b('0xfa')]['start']['begin'],'resume_context':v}))-0x1;}else{a[a2b('0x21b')][B][G]=Object[a2b('0x227')]({},a[a2b('0x21b')][B][G],{'status':0x3,'resume_on_step':a[a2b('0xfa')][a2b('0x141')]['begin'],'resume_context':v});}a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x19d')],a2b('0x11a')+A[a2b('0x235')]+a2b('0x17b')+D+a2b('0x18f')+a['updated_system_instances'][B][a2b('0x11b')](function(J){return J[a2b('0x85')]+'/'+J[a2b('0xcd')]+'/'+J[a2b('0x262')];})[a2b('0x2cb')](','));F();var H=v[a2b('0xd')][a2b('0x2c8')](function(J){return J['instancenr']==E['instancenr'];});var I=H?H[a2b('0x27b')]:0x0;a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x167')],a2b('0x11a')+A[a2b('0x235')]+'}\x20(start'+D+a2b('0x102')+B+'/'+E[a2b('0x58')]+'/'+E['hostname']+'/'+E['instancenr']+'\x20(counter='+(parseInt(I)+0x1)+'\x20entity='+C+')');async['series']({'incr':function J(K){if(!x||a['resume_here_on_interruption'](B,G,a['_resume_on_step'][a2b('0x141')][a2b('0x9d')])){a[a2b('0x296')][a2b('0x8c')]('counter','start',C,B,E[a2b('0xcd')],z['labels'][a2b('0x1c4')],parseInt(I)+0x1);a[a2b('0x216')](B,G,a[a2b('0xfa')][a2b('0x141')][a2b('0x9d')]);}K();},'start':function K(L){if(!x||a['resume_here_on_interruption'](B,G,a[a2b('0xfa')]['start'][a2b('0x3e')])){a[a2b('0x1e')]['log'](a[a2b('0x1e')]['LOG_LEVEL_INFO'],a2b('0x11a')+A[a2b('0x235')]+'}\x20(start'+D+a2b('0xa7')+E[a2b('0x58')]);a[a2b('0x1b4')]['startEC2'](E[a2b('0x58')],L);a['save_resume_step'](B,G,a[a2b('0xfa')][a2b('0x141')][a2b('0x3e')]);}else L();},'check':function L(M){var N=0x14;var O=0x12c;var P=Math['ceil'](O/N);a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x11a')+A[a2b('0x235')]+a2b('0x17b')+D+')\x20waiting\x20for\x20EC2\x20instance\x20to\x20actually\x20start\x20within\x20timeout\x20'+O+a2b('0x1a2')+E[a2b('0x58')]);o(a[a2b('0x1b4')],P,N*0x3e8,E['ip_internal'],M);},'soap':function M(N){var O=null;var P=A[a2b('0x8d')]?{'protocol':a2b('0x21f'),'port_suffix':'14'}:{'protocol':'http','port_suffix':'13'};var Q=P[a2b('0x20b')]+a2b('0x14d')+(E[a2b('0x58')]||E['hostname'])+':5'+E[a2b('0xcd')]+P[a2b('0x280')]+'/';if(A[a2b('0x73')]==0x1){O=a[a2b('0x19b')]+'/'+A[a2b('0x235')]+a2b('0x95');}a[a2b('0x200')](Q,{'method':A['auth_method'],'options':[{'user':A[a2b('0x201')],'pwd':A[a2b('0x26d')]},{'pfx':O}]},{},N);}},function(N,O){var P=O['soap'];if(N||!P){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],'[FAILED]\x20{'+A[a2b('0x235')]+a2b('0x17b')+D+')\x20error:',N);switch(N){case a['aws_cli']['_errors'][a2b('0xda')]:a[a2b('0x21b')][B][G][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][G]['error']={'occur_date':Date[a2b('0x2b9')](),'msg':a[a2b('0x1b4')][a2b('0xd7')]['ec2_not_started']};break;case a[a2b('0xd7')]['soap_client_init']:a[a2b('0x21b')][B][G]['status']=-0x1;a[a2b('0x21b')][B][G]['error']={'occur_date':Date[a2b('0x2b9')](),'msg':a[a2b('0xd7')][a2b('0x218')]};break;case c:case b:default:a['updated_system_instances'][B][G][a2b('0x262')]=-0x1;a['updated_system_instances'][B][G][a2b('0xee')]={'occur_date':Date['now'](),'msg':l[N]};break;}a['save_resume_step'](B,G,-0x1);}else{a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_INFO'],'[PENDING]\x20{'+A[a2b('0x235')]+a2b('0x17b')+D+a2b('0x1ec')+E[a2b('0x85')]+'/'+E[a2b('0x58')]+'/'+E['instancenr']);async[a2b('0x5a')]([function(Q){if(!x||a['resume_here_on_interruption'](B,G,a[a2b('0xfa')][a2b('0x141')][a2b('0x75')])){sapcontrol_operations$1[v[a2b('0x1a0')][a2b('0x1e0')]][a2b('0x12a')](P[a2b('0x196')],{},function(R){a[a2b('0x216')](B,G,a['_resume_on_step'][a2b('0x141')][a2b('0x75')]);if(R!==undefined&&R!==null){if(R['body']){var S=R[a2b('0x3')][a2b('0xa3')](/<faultstring>(.*?)<\/faultstring>/)&&R[a2b('0x3')][a2b('0xa3')](/<faultstring>(.*?)<\/faultstring>/)[0x1];if(S=='Instance\x20already\x20started'){a[a2b('0x21b')][B][G][a2b('0x262')]=0x1;}else{a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x2bf')+A[a2b('0x235')]+a2b('0x17b')+D+a2b('0x202')+S);a[a2b('0x21b')][B][G][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][G][a2b('0xee')]={'occur_date':Date[a2b('0x2b9')](),'msg':l[h]+':'+S};}}else{a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x16b')],a2b('0x2bf')+A[a2b('0x235')]+'}\x20(start'+D+')\x20sap\x20instance\x20error:',R);a['updated_system_instances'][B][G][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][G][a2b('0xee')]={'occur_date':Date[a2b('0x2b9')](),'msg':l[h]};}a[a2b('0x216')](B,G,-0x1);Q(R);}else{Q();}});}else Q();},function(Q){var R=0x14;var S=0x12c;var T=Math[a2b('0x1e6')](S/R);a['logger'][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_DEBUG'],a2b('0x11a')+A[a2b('0x235')]+a2b('0x17b')+D+')\x20waiting\x20for\x20SAP\x20instance\x20to\x20actually\x20start\x20within\x20timeout\x20'+S+a2b('0x1a2')+E[a2b('0x85')]+'/'+E[a2b('0x58')]+'/'+E[a2b('0xcd')]);n(P[a2b('0x196')],T,R*0x3e8,E[a2b('0xcd')],function(U){if(U){a['updated_system_instances'][B][G][a2b('0x262')]=-0x1;a[a2b('0x21b')][B][G][a2b('0xee')]={'occur_date':Date['now'](),'msg':l[i]};a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x167')],a2b('0x1c3')+A[a2b('0x235')]+a2b('0x17b')+D+a2b('0x2c7')+B+'/'+E[a2b('0x85')]+'/'+E['ip_internal']+'/'+E[a2b('0xcd')]+a2b('0x151'),l[i]);q(P[a2b('0x196')],A,E,G,0x1);}else{a[a2b('0x21b')][B][G][a2b('0x262')]=0x1;delete a[a2b('0x21b')][B][G][a2b('0xee')];a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_MIN'],a2b('0x1c3')+A['syst_id']+'}\x20(start'+D+a2b('0xb0')+B+'/'+E[a2b('0x85')]+'/'+E[a2b('0x58')]+'/'+E[a2b('0xcd')]);a[a2b('0x216')](B,G,-0x1);}Q();});}]);}});}else{F(a[a2b('0xd7')][a2b('0x149')]);}}],function(E){if(E){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x27c')+A[a2b('0x235')]+a2b('0x17b')+D+a2b('0x153')+A[a2b('0x58')]+'-'+A[a2b('0x193')]+':',E);w(E);}else{w(null,{'sending_sslcertifs':a['sending_sslcertifs'][A[a2b('0x235')]+''],'instances':a['updated_system_instances'],'syst_id':A[a2b('0x235')]});}});}else{a[a2b('0x1e')][a2b('0x246')](a['logger']['LOG_LEVEL_ERROR'],a2b('0xc8')+D+a2b('0x1d9'));w(a2b('0x1e5'));}}function t(v,w){if(a['updated_system_instances'][v[a2b('0x235')]]){var x=a[a2b('0x21b')][v['syst_id']]['filter'](function(y){return y[a2b('0xcd')]==v[a2b('0x17')];})[0x0];if(x){a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x2a6')],a2b('0x11a')+v['syst_id']+'}\x20(update)\x20:'+x[a2b('0x85')]+'/'+x[a2b('0xcd')]+'/'+x[a2b('0x262')]);if(x[a2b('0x262')]==-0x1){async[a2b('0x259')]([function(y){a[a2b('0x1a9')](v[a2b('0x235')],v[a2b('0x171')],y);},function(y){var z={'protocol':a2b('0x21f'),'port_suffix':'14'};var A=z[a2b('0x20b')]+a2b('0x14d')+(x[a2b('0x58')]||x[a2b('0x85')])+':5'+v[a2b('0x17')]+z[a2b('0x280')]+'/';a['new_soap_client'](A,{'method':0x1,'options':[{},{'pfx':a[a2b('0x19b')]+'/'+v[a2b('0x235')]+'.pfx'}]},v,y);},function(y,z){y[a2b('0x196')]['GetSystemInstanceList']({},function(A,B){if(!A&&B&&B[a2b('0x125')]&&B[a2b('0x125')][a2b('0x242')]){z(null,B['instance'][a2b('0x242')][a2b('0x2c8')](function(C){return(''+C[a2b('0x222')])[a2b('0x2ca')](0x2,'0')==v['instance_nr'];}));}else{z();}});}],function(y,z){if(y){w(a2b('0x133')+y);}else{w(null,{'sending_sslcertifs':a[a2b('0x34')][v['syst_id']+''],'instance':z?Object['assign'](x,{'status':z[a2b('0x29a')]==a[a2b('0x277')][a2b('0x223')]?0x1:z[a2b('0x29a')]==a[a2b('0x277')][a2b('0x1bd')]?-0x1:0x0},{'resume_context':null,'resume_on_step':null}):Object[a2b('0x227')](x,{'resume_context':null,'resume_on_step':null}),'syst_id':v[a2b('0x235')]});}});}else{w(null,{'sending_sslcertifs':a['sending_sslcertifs'][v[a2b('0x235')]+''],'instance':x,'syst_id':v[a2b('0x235')]});}}else{a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_ERROR'],a2b('0x2bf')+v[a2b('0x235')]+'}\x20(update)\x20system\x20not\x20indexed:'+v['instance_nr']);w(a2b('0x239'));}}else{a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_ERROR'],'[FAILED]\x20{'+v[a2b('0x235')]+a2b('0xe5')+v[a2b('0x235')]);w('System\x20instance\x20not\x20active');}}function u(v){var w=null;var x={};var y=v[a2b('0x1a0')][a2b('0xc9')][a2b('0x122')];switch(v['action'][a2b('0x1e0')]){case'slack':var z=function A(B,C){var D=[];if(C[a2b('0x175')]>0x0){D['push']({'type':a2b('0x96'),'text':{'type':a2b('0x98'),'text':'<https://scaling.worqloads.com|'+B+'>'}});C[a2b('0x3b')](function(E){D[a2b('0x272')]({'type':a2b('0x96'),'block_id':E[a2b('0xfd')],'fields':[{'type':a2b('0x98'),'text':a2b('0x1a')+E['labels'][a2b('0x1c4')]},{'type':'mrkdwn','text':a2b('0x127')+E['labels'][a2b('0x193')]+(E[a2b('0x292')][a2b('0x85')]!=undefined&&E['labels'][a2b('0x85')]!=''?'@'+E[a2b('0x292')]['hostname']:'')+(E[a2b('0x292')]['sn']!=undefined&&E[a2b('0x292')]['sn']!=''?'\x20['+E[a2b('0x292')]['sn']+']':'')}]});});D[a2b('0x272')]({'type':'divider'});}return D;};w={'text':v[a2b('0x291')][a2b('0x175')]+a2b('0xe8')+(v[a2b('0x291')]['length']>0x1&&'s'||'')+'(\x20'+v[a2b('0x291')][a2b('0x5b')](function(B){return B['status']=='firing';})[a2b('0x175')]+'\x20new)','blocks':z(a2b('0xcf'),v[a2b('0x291')][a2b('0x5b')](function(B){return B[a2b('0x262')]==a2b('0x1f1');}))};break;case'email':w=Object[a2b('0x227')](v,v[a2b('0x1a0')]['parameters']);x={'headers':{'x-api-key':a2b('0x106')}};break;}if(w!=null){axios[a2b('0xa1')](y,w,x)[a2b('0x91')](function(B){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x19d')],a2b('0x1c3')+v['action'][a2b('0x1e0')]+a2b('0x24a'));})[a2b('0x156')](function(B){if(B){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x2bf')+v[a2b('0x1a0')]['name']+a2b('0xbf'),B);}});}}async['series']([function(v){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x167')],a2b('0x297'));async[a2b('0x259')]([function(w){a['redis_cli'][a2b('0x48')](a['company'],w);},function(w,x){a[a2b('0x21b')]=JSON[a2b('0x293')](w)&&JSON[a2b('0x293')](w)[a2b('0x198')]||{};a[a2b('0x138')][a2b('0x190')](a[a2b('0x24c')],'{\x22root\x22:{}}',x);}],function(w){if(w){a['logger']['log'](a[a2b('0x1e')]['LOG_LEVEL_ERROR'],a2b('0x2c6'),w);}a[a2b('0x1e')]['log'](a[a2b('0x1e')][a2b('0x167')],a2b('0x2ae'),a['updated_system_instances']);v();});},function(v){if(a['updated_system_instances']&&Object[a2b('0x2a')](a[a2b('0x21b')])[a2b('0x175')]>0x0){v();Object[a2b('0x2a')](a[a2b('0x21b')])[a2b('0x3b')](function(w){async[a2b('0x4d')](a[a2b('0x21b')][w],function(x,y,z){if(x[a2b('0xba')]>0x0){a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x167')],a2b('0x252'),x[a2b('0x262')]);switch(x[a2b('0x262')]){case 0x2:a['logger'][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_MIN'],a2b('0x2b3'),x);z();r(x[a2b('0x4a')],function(A,B){if(A){a[a2b('0x1e')]['log'](a['logger']['LOG_LEVEL_ERROR'],a2b('0x1a1'),A);}else{a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x1bb'),B);}},!![],x[a2b('0xba')]);break;case 0x3:a[a2b('0x1e')][a2b('0x246')](a['logger'][a2b('0x167')],a2b('0x172'),x);z();s(x[a2b('0x4a')],function(A,B){if(A){a['logger']['log'](a[a2b('0x1e')][a2b('0x16b')],a2b('0x11'),A);}else{a[a2b('0x1e')]['log'](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x29f'),B);}},!![],y);break;default:a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x248'),x[a2b('0x262')]);z();break;}}else{delete a[a2b('0x21b')][w][y];z();}},function(x){if(x)a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x1da'),x);a['updated_system_instances'][w]=a['updated_system_instances'][w][a2b('0x5b')](function(y){return y!=undefined;});});});}else v();},function(v){a['queue']['process'](a['QUEUES'][a2b('0x76')],a[a2b('0x100')],function(w,x){if(w['data'][a2b('0x1a0')]){switch(w[a2b('0x165')][a2b('0x1a0')][a2b('0x27e')]){case 0x0:u(w[a2b('0x165')]);x();break;case 0x1:var y=w[a2b('0x165')][a2b('0x22d')]?w[a2b('0x165')][a2b('0x22d')][a2b('0x235')]:w[a2b('0x165')]['syst_id'];a[a2b('0x1a9')](y,w[a2b('0x165')][a2b('0x171')],function(z){if(z){x(a2b('0x233'));}else{switch(w[a2b('0x165')][a2b('0x1a0')][a2b('0x1e0')]){case a2b('0xf4'):a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_DEBUG'],'stop\x20action\x20data:',w[a2b('0x165')]);if(!w[a2b('0x165')][a2b('0x291')])x();else r(w['data'],x);break;case a2b('0x128'):a['logger'][a2b('0x246')](a[a2b('0x1e')]['LOG_LEVEL_DEBUG'],a2b('0x2c2'),w[a2b('0x165')]);if(!w[a2b('0x165')][a2b('0x291')])x();else s(w['data'],x);break;case a2b('0x20'):t(w[a2b('0x165')],x);break;default:x();break;}}});break;default:a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x157'),w[a2b('0x165')]['action'][a2b('0x27e')]);x();break;}}else{a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],'no\x20data\x20provided');x();}});v();}]);},'get_cloud_region':function get_cloud_region(a){var b=this;var c=0x1;switch(c){case 0x0:break;case 0x1:var d='http://169.254.169.254/latest/meta-data/placement/availability-zone';axios['get'](d)[a2b('0x91')](function(f){if(f[a2b('0x165')]){b['logger']['log'](b[a2b('0x1e')][a2b('0x19d')],'get_cloud_region\x20',f[a2b('0x165')]);b[a2b('0x129')]=f[a2b('0x165')][a2b('0x276')](0x0,-0x1);a();}else{b[a2b('0x1e')][a2b('0x246')](b[a2b('0x1e')]['LOG_LEVEL_ERROR'],'get_cloud_region\x20:\x20no\x20data');a();}})[a2b('0x156')](function(f){if(f){b[a2b('0x1e')][a2b('0x246')](b['logger'][a2b('0x16b')],a2b('0x9b'),f);}a();});break;}},'deletePrometheus':function deletePrometheus(a,b,c,d,f){var g=this;if(g[a2b('0x23f')][c]==undefined){g['conn_retries'][c]=0x0;}g[a2b('0x1e')][a2b('0x246')](g[a2b('0x1e')]['LOG_LEVEL_INFO'],a2b('0x16d')+c+':\x20delete\x20\x27'+a+a2b('0x59'));g['pushgtw_cli']['delSerie'](a,{'instance':c});g[a2b('0x296')][a2b('0x224')]('up',b,c,g[a2b('0x129')],d,f[a2b('0x11b')](function(h){return Object[a2b('0x227')](h,{'status':0x0});}));g[a2b('0x23f')][c]=0x0;},'new_soap_client':function new_soap_client(a,b,c,d){var f=this;try{soap[a2b('0x36')](a+a2b('0x30'),{'returnFault':!![]},function(g,h){if(g||!h){f[a2b('0x1e')][a2b('0x246')](f['logger'][a2b('0x2a6')],a2b('0x26')+a+'?wsdl');d(f[a2b('0xd7')]['soap_client_init'],c);}else{switch(b[a2b('0x93')]){case 0x0:h['setSecurity'](new soap[(a2b('0xd1'))](b['options'][0x0]['user'],b[a2b('0x113')][0x0][a2b('0x1b7')]));break;case 0x1:h[a2b('0x265')](new soap[(a2b('0x1e9'))](b[a2b('0x113')][0x1][a2b('0x32')],null,{'rejectUnauthorized':![]}));break;default:h['setSecurity'](new soap[(a2b('0x1e9'))](b['options'][0x1][a2b('0x32')],null,{'rejectUnauthorized':![]}));}h[a2b('0x18b')](a+a2b('0x86'));d(null,{'soapcli':h,'payload':c});}});}catch(g){if(g){f['logger'][a2b('0x246')](f[a2b('0x1e')]['LOG_LEVEL_ERROR'],a2b('0xc4'),g);d(f[a2b('0xd7')][a2b('0x218')],c);}}},'get_sap_instances':function get_sap_instances(a,b,c){var d=this;var f='https://'+a+':5'+b+'14';try{soap['createClient'](f+a2b('0x243'),{'returnFault':!![]},function(g,h){if(g||!h){c(d[a2b('0xd7')][a2b('0x218')],[]);}else{h['GetSystemInstanceList']({},function(i,j){if(!i&&j&&j[a2b('0x125')]&&j[a2b('0x125')]['item']){var k=j['instance']['item'][a2b('0x11b')](function(l){return{'hostname':l[a2b('0x85')],'instancenr':(''+l[a2b('0x222')])['padStart'](0x2,'0'),'features':l[a2b('0x28')][a2b('0xf9')]('|'),'status':l[a2b('0x29a')]==d[a2b('0x277')][a2b('0x223')]?0x1:l[a2b('0x29a')]==d[a2b('0x277')][a2b('0x1bd')]?-0x1:0x0};});c(null,k);}else{c(d[a2b('0xd7')][a2b('0x103')],[]);}});}});}catch(g){if(g){d[a2b('0x1e')][a2b('0x246')](d[a2b('0x1e')]['LOG_LEVEL_ERROR'],a2b('0x244'),g);}c(d[a2b('0xd7')][a2b('0x103')],[]);}},'check_sapcontrol_listening':function check_sapcontrol_listening(a,b,c,d){var f=this;try{var g=http['get'](a2b('0x2c1')+a+':5'+b+a2b('0x1e2'),{'timeout':0x3e8},function(h){f[a2b('0x1e')]['log'](f[a2b('0x1e')]['LOG_LEVEL_DEBUG'],'\x20WSDL\x20of\x20'+a+':'+b,h['statusCode']);if(h&&h[a2b('0x25c')]==0xc8){var i=a2b('0x287')+a+':5'+b+'14';soap[a2b('0x36')](i+a2b('0x243'),{'returnFault':!![]},function(j,k){if(j||!k){d(![]);}else{k[a2b('0xcc')]({},function(l,m){if(!l&&m&&m['instance']&&m[a2b('0x125')][a2b('0x242')]){d(m['instance'][a2b('0x242')][a2b('0x11b')](function(n){return n[a2b('0x85')];})[a2b('0x2bd')](c));}else{d(![]);}},{'timeout':0x7d0});}});}});g['on'](a2b('0x217'),function(){g[a2b('0x3c')]();});g['on'](a2b('0xee'),function(h){f[a2b('0x1e')][a2b('0x246')](f[a2b('0x1e')][a2b('0x2a6')],'\x20WSDL\x20checking\x20error\x20of\x20'+a+':'+b,h);d(![]);});}catch(h){if(h){f['logger'][a2b('0x246')](f['logger'][a2b('0x16b')],a2b('0x244'),h);}d(![]);}},'update_sending_ssl':function update_sending_ssl(a,b,c){var d=this;if(a){fs$1[a2b('0x57')](d['certif_dir']+'/'+a+'.pfx',fs$1[a2b('0x14f')],function(f){if(f){if(b){fs$1['writeFile'](d[a2b('0x19b')]+'/'+a+a2b('0x95'),new Buffer[(a2b('0x2a7'))](JSON['parse'](b)),function(g){d[a2b('0x34')][a]=!!g;c();});}else{d[a2b('0x1e')][a2b('0x246')](d[a2b('0x1e')][a2b('0x16b')],a2b('0x42')+a);d[a2b('0x34')][a]=!![];c('no\x20pfx\x20provided');}}else{d['sending_sslcertifs'][a]=![];c();}});}else c('no\x20system\x20provided');},'check_system_status':function check_system_status(a){var b=this;var c=[];var d=![];for(var f=0x0,g=a[a2b('0x175')];f<g;f++){if(a[f][a2b('0x28')]['split']('|')[a2b('0x2ac')](a2b('0x2bc'))>=0x0||a[f]['features']['split']('|')[a2b('0x2ac')](a2b('0x135'))>=0x0){if(a[f][a2b('0x29a')]!=b['_sap_statuses'][a2b('0x223')]){d=!![];break;}}else{c['push']({'instancenr':(''+a[f][a2b('0x222')])[a2b('0x2ca')](0x2,'0'),'status':a[f][a2b('0x29a')]==b[a2b('0x277')][a2b('0x223')]?0x1:0x0});}}if(d||c[a2b('0xaf')](function(h,i){return h+i;},0x0)==0x0){return b[a2b('0x277')][a2b('0x5')];}return b[a2b('0x277')]['green'];},'check_failed_conn':function check_failed_conn(a,b){var c=this;if(c[a2b('0x23f')][b[a2b('0x22d')][a2b('0x235')]]<=c[a2b('0xb1')]){setTimeout(function(){a['GetSystemInstanceList']({},function(d,f){if(d||!f||!f[a2b('0x125')]||!f[a2b('0x125')][a2b('0x242')]){c[a2b('0x23f')][b[a2b('0x22d')]['syst_id']]++;c['check_failed_conn'](a,b);}else{var g=c[a2b('0x2d')](f['instance'][a2b('0x242')]);if(g==c[a2b('0x277')][a2b('0x5')]||g==c[a2b('0x277')][a2b('0xf')]){c['conn_retries'][b['system'][a2b('0x235')]]++;c[a2b('0x170')](a,b);}else c[a2b('0x296')][a2b('0x2b2')]('up',b[a2b('0xd5')],b['system']['syst_id'],c[a2b('0x129')],b[a2b('0x22d')][a2b('0x193')],0x1);}});},0x4e20);}else{c[a2b('0x146')]('scale',b['entity_id'],b[a2b('0x22d')][a2b('0x235')],b[a2b('0x22d')][a2b('0x193')],b[a2b('0x22d')][a2b('0x1a6')][a2b('0x11b')](function(d){return{'instancenr':d[a2b('0xcd')],'status':0x0};}));c[a2b('0x296')]['pushUpInstance']('up',b['entity_id'],b[a2b('0x22d')][a2b('0x235')],c[a2b('0x129')],b[a2b('0x22d')]['sid'],0x0);}},'debug':function debug(a){if(this[a2b('0x1e')]){this[a2b('0x1e')][a2b('0x130')](a);}},'save_resume_step':function save_resume_step(a,b,c){var d=this;var f=c<0x0?{'resume_on_step':c,'resume_context':null}:{'resume_on_step':c};d['updated_system_instances'][a][b]=Object[a2b('0x227')]({},d[a2b('0x21b')][a][b],f);},'resume_here_on_interruption':function resume_here_on_interruption(a,b,c){var d=this;if(d['updated_system_instances'][a]&&d[a2b('0x21b')][a][b]){return d[a2b('0x21b')][a][b][a2b('0xba')]<c;}else return![];},'graceful_shutdown':function graceful_shutdown(){var a=this;if(a['updated_system_instances']&&Object[a2b('0x2a')](a['updated_system_instances'])[a2b('0x175')]>0x0){a[a2b('0x138')][a2b('0x190')](a['company'],JSON[a2b('0xe')]({'root':a[a2b('0x21b')]}),function(b){if(b){a[a2b('0x1e')][a2b('0x246')](a[a2b('0x1e')][a2b('0x16b')],a2b('0x15d'),b);}else{a['logger'][a2b('0x246')](a[a2b('0x1e')][a2b('0x2a6')],a2b('0x21e'));}});}if(a[a2b('0xc7')])a['queue'][a2b('0x275')](0x1388,function(b){a[a2b('0x1e')]['log'](a['logger']['LOG_LEVEL_MIN'],'Kue\x20shutdown:\x20',b||'');});if(a[a2b('0x138')])a[a2b('0x138')][a2b('0xfb')]();}};function decrypt(a,b){var c=Buffer[a2b('0x2a7')](a[a2b('0x245')](0x62,a[a2b('0x175')]-0xe),'hex');var d=Buffer[a2b('0x2a7')](a[a2b('0x245')](0x2,a[a2b('0x175')]-0x20-0xe),a2b('0x177'));var f=crypto['createDecipheriv'](a2b('0x1a7'),Buffer[a2b('0x2a7')](b[a2b('0x245')](0x0,0x20)),c);var g=f[a2b('0x19')](d);return Buffer[a2b('0x61')]([g,f[a2b('0x1b8')]()])[a2b('0x1c0')]();}var scaledoer=ScaleDoer;try{var ScaleDoer$1=scaledoer,fs=fs$1,config_file=__dirname+a2b('0x41');if(!fs[a2b('0x1ce')](config_file)){console[a2b('0xee')]('E\x20missing\x20configuration\x20file',config_file);throw{'code':0x2};}else{var localconf=JSON['parse'](fs[a2b('0x17f')](config_file));var myenv=process['env'][a2b('0x278')]||a2b('0x83');var scaleScaleDoer=new ScaleDoer$1();scaleScaleDoer[a2b('0x6e')](Object[a2b('0x227')](localconf[myenv],{'dbindex':0x1}),scaleScaleDoer[a2b('0x2cd')]);process['on'](a2b('0x1d3'),function(){console[a2b('0x246')]('SIGUSR1\x20>\x20switching\x20debug\x20mode\x20ON');scaleScaleDoer[a2b('0x130')](!![]);});process['on'](a2b('0x1c2'),function(){console[a2b('0x246')]('SIGUSR2\x20>\x20switching\x20debug\x20mode\x20OFF');scaleScaleDoer[a2b('0x130')](![]);});process[a2b('0x131')](a2b('0x209'),function(){console[a2b('0x1d0')](a2b('0x2c5'));scaleScaleDoer[a2b('0x2b1')]();});process[a2b('0x131')](a2b('0x2af'),function(){console[a2b('0x1d0')]('SIGINT\x20>\x20save\x20scaling\x20instances');scaleScaleDoer[a2b('0x2b1')]();});}}catch(a2c){console[a2b('0xee')](a2b('0x1b1'),a2c[a2b('0x1ad')]||a2c);if(scaleScaleDoer)scaleScaleDoer[a2b('0x2b1')]();process[a2b('0x13d')](0x1);}process['on']('exit',function(a){if(scaleScaleDoer)scaleScaleDoer[a2b('0x2b1')]();return console[a2b('0x246')](a2b('0x181')+a);});