var a4a=['catch','error','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','parse','https://scaling.worqloads.com/updates','NODE_ENV','constructor','update','return\x20/\x22\x20+\x20this\x20+\x20\x22/','data','env','join','then','Exception\x20raised:','version','detached','ignore','close','-v=','default','\x20.\x20stderr:\x20','WQL_DEBUG','process\x20','agent','object','log','code','readFileSync','production','>\x20conf:','message','stderr','exit','no\x20update:','I\x20Scaler\x20Update\x20!\x20About\x20to\x20exit\x20with\x20code\x20','spawn','E\x20missing\x20configuration\x20file:','concat','0\x200\x202\x20*\x20*\x20*','apply','compile','unref'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a4a,0xac));var a4b=function(a,b){a=a-0x0;var c=a4a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i[a4b('0x23')](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g[a4b('0x2')](a4b('0x4'))()[a4b('0x24')](a4b('0x28'));return!h['test'](f);};return g();});f();return c&&typeof c===a4b('0x14')&&'default'in c?c[a4b('0xf')]:c;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require('cron'));var axios=_interopDefault(require('axios'));var child_process=_interopDefault(require('child_process'));var config_file=__dirname+'/conf.json';try{if(!fs['existsSync'](config_file)){console['error'](a4b('0x20'),config_file);throw{'code':0x2};}else{var localconf=JSON[a4b('0x29')](fs[a4b('0x17')](config_file));var myenv=process[a4b('0x6')][a4b('0x1')]||a4b('0x18');scaler_update(localconf[myenv]);}}catch(a4c){console[a4b('0x27')](a4b('0x9'),a4c[a4b('0x16')]||a4c);process[a4b('0x1c')](0x1);}process['on']('exit',function(a){return console[a4b('0x15')](a4b('0x1e')+a);});function scaler_update(a){var b=a4b('0x22');var c=a4b('0x0');function d(g,h,i){var j='';g[a4b('0x1b')]['on'](a4b('0x5'),function(k){j+=k;});g['on'](a4b('0xd'),function(k){if(k>0x0){console[a4b('0x27')]('process\x20'[a4b('0x21')](h,a4b('0x10'))[a4b('0x21')](j));console[a4b('0x15')](a4b('0x12')['concat'](h,'\x20.\x20code\x20exit\x20')['concat'](k));i(j);}else{i();}});}function f(g,h,i,j){var k=child_process[a4b('0x1f')](g,h,i);if(i&&i[a4b('0xb')]){k[a4b('0x25')]();}else{d(k,g+'\x20'+h[a4b('0x7')]('\x20'),j);}return k;}new cron['CronJob'](b,function(){var g=process[a4b('0x6')][a4b('0x11')]||![];if(g){console['log'](a4b('0x19'),a);}axios['post'](c,{'agent':a['agent'],'version':a[a4b('0xa')]})[a4b('0x8')](function(h){if(g){console[a4b('0x15')]('>\x20API\x20call\x20res:',h&&h[a4b('0x5')]);}if(h&&h[a4b('0x5')]&&h[a4b('0x5')][a4b('0x3')]==!![]){console['log']('Update\x20available\x20-\x20API\x20response:',h);f(__dirname+'/update.sh',[a4b('0xe')+h['data']['message'],'-a='+a[a4b('0x13')]],{'detached':!![],'stdio':a4b('0xc')},function(i){if(i)console[a4b('0x27')]('Oops\x20script\x20exec\x20error:',i);});}else{console[a4b('0x27')](a4b('0x1d'),h&&h['data']&&h[a4b('0x5')][a4b('0x1a')]);}})[a4b('0x26')](function(h){if(h){console[a4b('0x27')]('get\x20update\x20error:',h);}});})['start']();}