var a4a=['existsSync','/.update_new.sh','log','get\x20update\x20error:','Oops\x20script\x20exec\x20error:','ignore','https://scaling.worqloads.com/updates','unref','-v=','I\x20Scaler\x20Update\x20!\x20About\x20to\x20exit\x20with\x20code\x20','NODE_ENV','Cannot\x20set\x20execution\x20permission\x20for\x20new\x20update.sh\x20script','\x20.\x20code\x20exit\x20','message','error','stderr','then','close','return\x20/\x22\x20+\x20this\x20+\x20\x22/','update','start','apply','WQL_DEBUG','no\x20update:','process\x20','data','Update\x20available\x20-\x20API\x20response:','E\x20missing\x20configuration\x20file:','detached','-a=','/conf.json','concat','code','test','post','rename','0\x200\x202\x20*\x20*\x20*','agent','/update.sh','default','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','cron','env','axios','chmod','join','CronJob','spawn','readFileSync','exit'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a4a,0x158));var a4b=function(a,b){a=a-0x0;var c=a4a[a];return c;};'use strict';function _interopDefault(a){return a&&typeof a==='object'&&a4b('0x2d')in a?a[a4b('0x2d')]:a;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require(a4b('0x2f')));var axios=_interopDefault(require(a4b('0x31')));var child_process=_interopDefault(require('child_process'));var config_file=__dirname+a4b('0x24');try{if(!fs[a4b('0x6')](config_file)){console['error'](a4b('0x21'),config_file);throw{'code':0x2};}else{var localconf=JSON['parse'](fs[a4b('0x4')](config_file));var myenv=process[a4b('0x30')][a4b('0x10')]||'production';scaler_update(localconf[myenv]);}}catch(a4c){console[a4b('0x14')]('Exception\x20raised:',a4c[a4b('0x26')]||a4c);process[a4b('0x5')](0x1);}process['on'](a4b('0x5'),function(a){return console[a4b('0x8')](a4b('0xf')+a);});function scaler_update(c){var d=function(){var l=!![];return function(m,n){var o=l?function(){if(n){var p=n[a4b('0x1b')](m,arguments);n=null;return p;}}:function(){};l=![];return o;};}();var f=d(this,function(){var l=function(){var m=l['constructor'](a4b('0x18'))()['compile'](a4b('0x2e'));return!m[a4b('0x27')](f);};return l();});f();var g=a4b('0x2a');var h=a4b('0xc');function i(l,m,n){var o='';l[a4b('0x15')]['on'](a4b('0x1f'),function(q){o+=q;});l['on'](a4b('0x17'),function(q){if(q>0x0){console['error']('process\x20'['concat'](m,'\x20.\x20stderr:\x20')[a4b('0x25')](o));console[a4b('0x8')](a4b('0x1e')[a4b('0x25')](m,a4b('0x12'))['concat'](q));n(o);}else{n();}});}function j(l,m,n,o){var p=child_process[a4b('0x3')](l,m,n);if(n&&n[a4b('0x22')]){p[a4b('0xd')]();}else{i(p,l+'\x20'+m[a4b('0x1')]('\x20'),o);}return p;}function k(l,m,n){if(fs['existsSync'](m)){fs[a4b('0x29')](m,l,function(o){if(o){n('Cannot\x20update\x20update.sh\x20script\x20from\x20new\x20version');}else{fs[a4b('0x0')](l,0x1c0,function(p){if(p){n(a4b('0x11'));}else n();});}});}else n();}new cron[(a4b('0x2'))](g,function(){var l=process[a4b('0x30')][a4b('0x1c')]||![];if(l){console[a4b('0x8')]('>\x20conf:',c);}axios[a4b('0x28')](h,{'agent':c[a4b('0x2b')],'version':c['version']})[a4b('0x16')](function(m){if(l){console[a4b('0x8')]('>\x20API\x20call\x20res:',m&&m[a4b('0x1f')]);}if(m&&m[a4b('0x1f')]&&m['data'][a4b('0x19')]==!![]){console['log'](a4b('0x20'),m);k(__dirname+a4b('0x2c'),__dirname+a4b('0x7'),function(n){if(n){console[a4b('0x14')](a4b('0xa'),n);}else{j(__dirname+a4b('0x2c'),[a4b('0xe')+m[a4b('0x1f')][a4b('0x13')],a4b('0x23')+c[a4b('0x2b')]],{'detached':!![],'stdio':a4b('0xb')},function(o){if(o)console[a4b('0x14')](a4b('0xa'),o);});}});}else{console[a4b('0x14')](a4b('0x1d'),m&&m[a4b('0x1f')]&&m[a4b('0x1f')]['message']);}})['catch'](function(m){if(m){console[a4b('0x14')](a4b('0x9'),m);}});})[a4b('0x1a')]();}