<<<<<<< HEAD
var a4a=['code','Update\x20available\x20-\x20API\x20response:','NODE_ENV','production','env','no\x20update:','\x20.\x20stderr:\x20','I\x20Scaler\x20Update\x20!\x20About\x20to\x20exit\x20with\x20code\x20','process\x20','/.update_new.sh','https://scaling.worqloads.com/updates','post','exit','compile','catch','log','axios','Cannot\x20update\x20update.sh\x20script\x20from\x20new\x20version','return\x20/\x22\x20+\x20this\x20+\x20\x22/','object','ignore','error','test','detached','stderr','Oops\x20script\x20exec\x20error:','>\x20API\x20call\x20res:','parse','-v=','child_process','apply','get\x20update\x20error:','agent','/conf.json','chmod','concat','/update.sh','then','data','unref','E\x20missing\x20configuration\x20file:','join','0\x200\x202\x20*\x20*\x20*','close','existsSync','readFileSync','rename','default','constructor'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a4a,0x65));var a4b=function(a,b){a=a-0x0;var c=a4a[a];return c;};'use strict';function _interopDefault(a){return a&&typeof a===a4b('0x10')&&a4b('0x2c')in a?a[a4b('0x2c')]:a;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require('cron'));var axios=_interopDefault(require(a4b('0xd')));var child_process=_interopDefault(require(a4b('0x1a')));var config_file=__dirname+a4b('0x1e');try{if(!fs['existsSync'](config_file)){console[a4b('0x12')](a4b('0x25'),config_file);throw{'code':0x2};}else{var localconf=JSON[a4b('0x18')](fs[a4b('0x2a')](config_file));var myenv=process[a4b('0x1')][a4b('0x30')]||a4b('0x0');scaler_update(localconf[myenv]);}}catch(a4c){console[a4b('0x12')]('Exception\x20raised:',a4c[a4b('0x2e')]||a4c);process[a4b('0x9')](0x1);}process['on']('exit',function(a){return console[a4b('0xc')](a4b('0x4')+a);});function scaler_update(c){var d=function(){var l=!![];return function(m,n){var o=l?function(){if(n){var p=n[a4b('0x1b')](m,arguments);n=null;return p;}}:function(){};l=![];return o;};}();var f=d(this,function(){var l=function(){var m=l[a4b('0x2d')](a4b('0xf'))()[a4b('0xa')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!m[a4b('0x13')](f);};return l();});f();var g=a4b('0x27');var h=a4b('0x7');function i(l,m,n){var o='';l[a4b('0x15')]['on']('data',function(q){o+=q;});l['on'](a4b('0x28'),function(q){if(q>0x0){console[a4b('0x12')](a4b('0x5')[a4b('0x20')](m,a4b('0x3'))['concat'](o));console[a4b('0xc')](a4b('0x5')[a4b('0x20')](m,'\x20.\x20code\x20exit\x20')['concat'](q));n(o);}else{n();}});}function j(l,m,n,o){var p=child_process['spawn'](l,m,n);if(n&&n[a4b('0x14')]){p[a4b('0x24')]();}else{i(p,l+'\x20'+m[a4b('0x26')]('\x20'),o);}return p;}function k(l,m,n){if(fs[a4b('0x29')](m)){fs[a4b('0x2b')](m,l,function(o){if(o){n(a4b('0xe'));}else{fs[a4b('0x1f')](l,0x1c0,function(p){if(p){n('Cannot\x20set\x20execution\x20permission\x20for\x20new\x20update.sh\x20script');}else n();});}});}else n();}new cron['CronJob'](g,function(){var l=process[a4b('0x1')]['WQL_DEBUG']||![];if(l){console[a4b('0xc')]('>\x20conf:',c);}axios[a4b('0x8')](h,{'agent':c[a4b('0x1d')],'version':c['version']})[a4b('0x22')](function(m){if(l){console[a4b('0xc')](a4b('0x17'),m&&m[a4b('0x23')]);}if(m&&m['data']&&m[a4b('0x23')]['update']==!![]){console[a4b('0xc')](a4b('0x2f'),m);k(__dirname+a4b('0x21'),__dirname+a4b('0x6'),function(n){if(n){console[a4b('0x12')](a4b('0x16'),n);}else{j(__dirname+a4b('0x21'),[a4b('0x19')+m[a4b('0x23')]['message'],'-a='+c[a4b('0x1d')]],{'detached':!![],'stdio':a4b('0x11')},function(o){if(o)console[a4b('0x12')](a4b('0x16'),o);});}});}else{console[a4b('0x12')](a4b('0x2'),m&&m[a4b('0x23')]&&m[a4b('0x23')]['message']);}})[a4b('0xb')](function(m){if(m){console[a4b('0x12')](a4b('0x1c'),m);}});})['start']();}
=======
var a4a=['concat','chmod','/update.sh','NODE_ENV','stderr','\x20.\x20code\x20exit\x20','ignore','apply','Cannot\x20set\x20execution\x20permission\x20for\x20new\x20update.sh\x20script','data','env','https://smartscaler.worqloads.com/updates','close','no\x20update:','\x20.\x20stderr:\x20','-a=','version','exit','update','message','/.update_new.sh','Oops\x20script\x20exec\x20error:','axios','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','detached','test','post','start','error','object','0\x200\x202\x20*\x20*\x20*','constructor','code','Cannot\x20update\x20update.sh\x20script\x20from\x20new\x20version','log','cron','join','spawn','>\x20conf:','compile','return\x20/\x22\x20+\x20this\x20+\x20\x22/','/conf.json','production','Update\x20available\x20-\x20API\x20response:','agent','I\x20Scaler\x20Update\x20!\x20About\x20to\x20exit\x20with\x20code\x20','WQL_DEBUG','parse','get\x20update\x20error:'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a4a,0x173));var a4b=function(a,b){a=a-0x0;var c=a4a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i[a4b('0x1c')](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g[a4b('0x3')](a4b('0xc'))()[a4b('0xb')](a4b('0x2c'));return!h[a4b('0x2e')](f);};return g();});f();return c&&typeof c===a4b('0x1')&&'default'in c?c['default']:c;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require(a4b('0x7')));var axios=_interopDefault(require(a4b('0x2b')));var child_process=_interopDefault(require('child_process'));var config_file=__dirname+a4b('0xd');try{if(!fs['existsSync'](config_file)){console[a4b('0x0')]('E\x20missing\x20configuration\x20file:',config_file);throw{'code':0x2};}else{var localconf=JSON[a4b('0x13')](fs['readFileSync'](config_file));var myenv=process[a4b('0x1f')][a4b('0x18')]||a4b('0xe');scaler_update(localconf[myenv]);}}catch(a4c){console['error']('Exception\x20raised:',a4c[a4b('0x4')]||a4c);process[a4b('0x26')](0x1);}process['on'](a4b('0x26'),function(a){return console['log'](a4b('0x11')+a);});function scaler_update(a){var b=a4b('0x2');var c=a4b('0x20');function d(h,i,j){var k='';h[a4b('0x19')]['on'](a4b('0x1e'),function(l){k+=l;});h['on'](a4b('0x21'),function(l){if(l>0x0){console[a4b('0x0')]('process\x20'['concat'](i,a4b('0x23'))[a4b('0x15')](k));console[a4b('0x6')]('process\x20'[a4b('0x15')](i,a4b('0x1a'))['concat'](l));j(k);}else{j();}});}function f(h,i,j,k){var l=child_process[a4b('0x9')](h,i,j);if(j&&j[a4b('0x2d')]){l['unref']();}else{d(l,h+'\x20'+i[a4b('0x8')]('\x20'),k);}return l;}function g(h,i,j){if(fs['existsSync'](i)){fs['rename'](i,h,function(k){if(k){j(a4b('0x5'));}else{fs[a4b('0x16')](h,0x1c0,function(l){if(l){j(a4b('0x1d'));}else j();});}});}else j();}new cron['CronJob'](b,function(){var h=process[a4b('0x1f')][a4b('0x12')]||![];if(h){console[a4b('0x6')](a4b('0xa'),a);}axios[a4b('0x2f')](c,{'agent':a[a4b('0x10')],'version':a[a4b('0x25')]})['then'](function(i){if(h){console[a4b('0x6')]('>\x20API\x20call\x20res:',i&&i[a4b('0x1e')]);}if(i&&i['data']&&i['data'][a4b('0x27')]==!![]){console[a4b('0x6')](a4b('0xf'),i);g(__dirname+a4b('0x17'),__dirname+a4b('0x29'),function(j){if(j){console[a4b('0x0')](a4b('0x2a'),j);}else{f(__dirname+a4b('0x17'),['-v='+i[a4b('0x1e')]['message'],a4b('0x24')+a[a4b('0x10')]],{'detached':!![],'stdio':a4b('0x1b')},function(k){if(k)console['error'](a4b('0x2a'),k);});}});}else{console[a4b('0x0')](a4b('0x22'),i&&i[a4b('0x1e')]&&i['data'][a4b('0x28')]);}})['catch'](function(i){if(i){console[a4b('0x0')](a4b('0x14'),i);}});})[a4b('0x30')]();}
>>>>>>> v1.0.0
