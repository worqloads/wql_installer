var a4a=['start','get\x20update\x20error:','update','data','code','Oops\x20script\x20exec\x20error:','join','apply','I\x20Scaler\x20Update\x20!\x20About\x20to\x20exit\x20with\x20code\x20','0\x200\x202\x20*\x20*\x20*','env','then','https://scaling.worqloads.com/updates','default','unref','axios','post','\x20.\x20stderr:\x20','\x20.\x20code\x20exit\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','no\x20update:','version','/conf.json','stderr','chmod','concat','CronJob','exit','rename','error','object','>\x20conf:','/.update_new.sh','child_process','-v=','catch','existsSync','log','message','process\x20','-a=','>\x20API\x20call\x20res:','ignore','constructor','readFileSync','Exception\x20raised:','spawn','Update\x20available\x20-\x20API\x20response:','WQL_DEBUG','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','detached','/update.sh','NODE_ENV','Cannot\x20update\x20update.sh\x20script\x20from\x20new\x20version','agent'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a4a,0xc2));var a4b=function(a,b){a=a-0x0;var c=a4a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i[a4b('0x21')](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g[a4b('0xe')](a4b('0x2d'))()['compile'](a4b('0x14'));return!h['test'](f);};return g();});f();return c&&typeof c===a4b('0x1')&&a4b('0x27')in c?c[a4b('0x27')]:c;}var fs=_interopDefault(require('fs'));var cron=_interopDefault(require('cron'));var axios=_interopDefault(require(a4b('0x29')));var child_process=_interopDefault(require(a4b('0x4')));var config_file=__dirname+a4b('0x30');try{if(!fs['existsSync'](config_file)){console['error']('E\x20missing\x20configuration\x20file:',config_file);throw{'code':0x2};}else{var localconf=JSON['parse'](fs[a4b('0xf')](config_file));var myenv=process['env'][a4b('0x17')]||'production';scaler_update(localconf[myenv]);}}catch(a4c){console[a4b('0x0')](a4b('0x10'),a4c[a4b('0x1e')]||a4c);process[a4b('0x35')](0x1);}process['on'](a4b('0x35'),function(a){return console[a4b('0x8')](a4b('0x22')+a);});function scaler_update(a){var b=a4b('0x23');var c=a4b('0x26');function d(h,i,j){var k='';h[a4b('0x31')]['on'](a4b('0x1d'),function(l){k+=l;});h['on']('close',function(l){if(l>0x0){console['error'](a4b('0xa')['concat'](i,a4b('0x2b'))[a4b('0x33')](k));console[a4b('0x8')](a4b('0xa')['concat'](i,a4b('0x2c'))[a4b('0x33')](l));j(k);}else{j();}});}function f(h,i,j,k){var l=child_process[a4b('0x11')](h,i,j);if(j&&j[a4b('0x15')]){l[a4b('0x28')]();}else{d(l,h+'\x20'+i[a4b('0x20')]('\x20'),k);}return l;}function g(h,i,j){if(fs[a4b('0x7')](i)){fs[a4b('0x36')](i,h,function(k){if(k){j(a4b('0x18'));}else{fs[a4b('0x32')](h,0x1c0,function(l){if(l){j('Cannot\x20set\x20execution\x20permission\x20for\x20new\x20update.sh\x20script');}else j();});}});}else j();}new cron[(a4b('0x34'))](b,function(){var h=process[a4b('0x24')][a4b('0x13')]||![];if(h){console[a4b('0x8')](a4b('0x2'),a);}axios[a4b('0x2a')](c,{'agent':a[a4b('0x19')],'version':a[a4b('0x2f')]})[a4b('0x25')](function(i){if(h){console[a4b('0x8')](a4b('0xc'),i&&i[a4b('0x1d')]);}if(i&&i[a4b('0x1d')]&&i['data'][a4b('0x1c')]==!![]){console[a4b('0x8')](a4b('0x12'),i);g(__dirname+'/update.sh',__dirname+a4b('0x3'),function(j){if(j){console[a4b('0x0')]('Oops\x20script\x20exec\x20error:',j);}else{f(__dirname+a4b('0x16'),[a4b('0x5')+i[a4b('0x1d')][a4b('0x9')],a4b('0xb')+a[a4b('0x19')]],{'detached':!![],'stdio':a4b('0xd')},function(k){if(k)console[a4b('0x0')](a4b('0x1f'),k);});}});}else{console['error'](a4b('0x2e'),i&&i[a4b('0x1d')]&&i['data']['message']);}})[a4b('0x6')](function(i){if(i){console['error'](a4b('0x1b'),i);}});})[a4b('0x1a')]();}