var a0a=['\x20staging:','rbb0a9b910059520d314a','toLowerCase','r0337b93f18e636174af5','r07b493479fe344b5cf11','_sap_statuses','_errors','rce36a026a223ead06904',',features=\x22','entity_id','r03ee55b42ebdc2c18a81','}\x20collect_exec:\x20no\x20data\x20provided','http://169.254.169.254/latest/meta-data/placement/availability-zone','port','jsf','NODE_TLS_REJECT_UNAUTHORIZED','status_instance_up','Name','system','2016-11-15','version','LOG_LEVEL_DEBUG','rbbee446c0ca0e678607a','r82088db4b59f4aaea8b5','sap','replace','return\x20/\x22\x20+\x20this\x20+\x20\x22/','pushCounter','db_datafile','r84e26868c42700105908','up2','\x22}\x20','heap','rcf1d727056f77b00d328','InstanceState','\x20-\x20','J2EEGetSharedTableInfo',')\x20candidates\x20instances:',')\x20current\x20buffered\x20instances:','r5130ec262e8001c71b63','moment','r35ec33085df5762700a0','NODE_ENV','r3da7e567487bbe4f3fa4','hold','command','stack','check_start_sap_instance:','database','scaling_up',')\x20waiting\x20for\x20SAP\x20instance\x20to\x20actually\x20start\x20within\x20timeout\x20','running','status_instance_up\x20{instance=\x22','r8b0e6f19ee35972b7bac','Instances','r2443efd44b6a1ed32cea','E\x20isEC2sRunning\x20error:','[CANCELLED]\x20{','description','counter','rdae4b6632805cde75d91','\x20WSDL\x20checking\x20error\x20of\x20','soap','#\x20TYPE\x20counter_',')\x20fully\x20stopped:','#\x20TYPE\x20status_instance_up\x20gauge\x0a','slack','soapcli','r7296cee0472b5c42a056','ra3febaf705f0b3e94b08','resume_context','?wsdl','r332cd69dadab050c7e03','email','Start\x20SAP\x20instance\x20operation\x20failed','instances','error','parallel','GetCallstack','max_instances_reached','workprocess','rd8d5b640eea865041c93','/.keys','ABAPGetComponentList','endpoint','GetSystemInstanceList','J2EEGetClusterMsgList','r0c3af3d708a2987a660b','logger','r8bc260d6056d562c74a7','company','13/?wsdl','isEC2Stopped','ZqDvnKwJhCz69koeSUSB59jIhyDMjHm3RMHyg675','system\x20instances\x20buffer\x20saved','re43358b5f71bf7b9b33a','check_start_ec2_instance:','divider','get','splice','compile','indexOf','re59cb5e280e1e0b44c4a','RestartInstance',')\x20:',')\x20-\x20all\x20instances\x20of\x20system:','ec2','gtw_url','Connection\x20to\x20SAP\x20system\x20failed','SAPControl-GREEN','F_OK','parameters','apply','InstanceType','GetAlertTree','re231794108ea049c510b',':\x20delete\x20\x27','length','J2EEGetEJBSessionList','tree','mkdirSync','OFF','is_direct','updated_system_instances','}\x20(restart\x20-','rd28064b1b6a02e83d69f','r529f3a179b1611ff66ca','r90958e8cf18c41945d6b','*Notification*\x0a','r37e0b9632995c39bb6dd','state','join','Start','rb6e830dd1ea871ad8899','isArray','r657cbd37fc1f0469a93f','stop','ra1be4ede3f473d907098','raa9c88633a52a77fde21','spo','r4a905c628adb036f5ebc','getCredentials','r7cefea74fb6a6b3ba2fe','EC2','rb5336953a9773c4fdc85','delete','existsSync','percent','kue','r8e880d60fadc492c52d0','J2EEGetThreadCallStack','no_active_instance','init','items','Exception\x20raised:','ceil','resume_here_on_interruption','ABAPGetWPTable','System\x20details\x20not\x20found','vpc-id','port_suffix','get_cloud_region','debug','defineProperty','J2EEGetVMHeapInfo','counter_updated','isEC2Running','LOG_LEVEL_MIN','redis_conf','log','rf0fe0a692443ce6dcc3d','rule_id','rcd25f69d8b71238c4f89','errno','ec2_start_triggered','delSerie','dia','stopInstances','r8f375412da87e131abcb','quit','}\x20checkconn_exec\x20system','test','InstanceAsTask',')\x20waiting\x20SAP\x20instance\x20to\x20stop\x20before\x20timeout\x20','r66c704c25f2db6ac805c','generateGroupings','rb038a9a2c15d45bbcb04','[FAILED]\x20{}\x20(start','features','re8eece2435bbe0e78f2b','new_soap_client','check_sapcontrol_listening','pwd','ScaleDoer\x20init\x20start','r53eebe4bcfc8e4e11765','checkconn_exec\x20authorization\x20error\x20for\x20SAP\x20instance:','get_sap_instances','rb4ef150604770a802c7d','firing',')\x20sap\x20instance\x20error:','rd0074482b0529cb32e0f','collect_exec','PrivateIpAddress','network_int','pushUpScaling\x20error:','statusCode','E\x20isEC2RunningFromID\x20error:','):\x20no\x20system\x20provided','ec2_stop_triggered','gateway','OperatingSystem','prototype','now','r59f9520cfd70ae9f2dac','ec2_not_stopped','}\x20(restart-','max_instance_running','status','EnqGetLockTable','E\x20getEC2ID_Type\x20error','soap_client_getinstance','rc70c916b6592c27704df','rf80e88ba805e079b3e78','EC2\x20server\x20to\x20stop\x20cannot\x20be\x20found','nothing\x20found','find_sap_instances\x20params:\x20','r2939bbb672a85e65a35a','sap_instances_ip','[PENDING]\x20{','[FAILED]\x20{','discoverEC2Instances','check_system_status','rdbf17cc155ced91fa2c0','Stop\x20EC2\x20server\x20operation\x20timeout\x20(but\x20SAP\x20instance\x20successfully\x20stopped)','\x20gauge\x0a','\x22,type=\x22','r50e64b10cdf172df702f','r4cedfdedff04f42371a3','.pfx',')\x20partially\x20started\x20(EC2:OK,\x20SAP:NOK):\x20','body','aws_cli','constructor','staging','parent','func',',rule_id=\x22','rce153ab447ff78bb63bd','rd1e8793e1e910c6d0f9c','stop\x20action\x20data:','password','E\x20getEC2ID\x20error:','(resume)\x20action\x20type\x20not\x20supported:','pushgtw_cli','readFileSync','r63a325a6fc9cd7455ee7','r5fa62eac76fca09570cb','name','env','values','__nb','conn_retries_max','r0f6b51f5c3e0dc6a5333','ref0b5cdf20e3d8e2c56f',',sn=\x22',')\x20trigger\x20EC2\x20instance:','start_ongoing','sap_start_triggered',')=\x20','No\x20SAP\x20system\x20or\x20no\x20system\x20connection\x20active','Result\x20of\x20(',')\x20on\x20','set','}\x20sapcontrol:','MESSAGESERVER','waterfall','r652fea692b19d3b13951','scale','rce0128b3a37d805eed4a','lock','concat','YYYY/MM/DD\x20hh:mm:ss','action\x20type\x20not\x20supported:','resume_on_step',')\x20all\x20retries\x20completed:','get_cloud_region\x20','ICM','r1474d7fbb9a7324bfe8b','mappings_ip_id','(resume)\x20stop\x20error\x20:','Error\x20starting\x20EC2\x20instance','r841df2001c1ae836aaaa',')\x20trigger\x20start\x20SAP\x20instance:','payload','SystemStatus','r991f6fd4cdd5c01d11ee','redis_cli','setSecurity','certif_dir','(resume)\x20start\x20error\x20:','missing\x20pfx','r03fc230a0569c81dd3b9','abort','r57a0a2089cded3b4fff7','Unexcepted\x20error','split','connect_sap',',workproces=\x22','#\x20TYPE\x20status_up\x20gauge\x0a','loading\x20resume\x20processing\x20data...','status_up','pushInstance\x20error:','each','section','item','process','finally','\x20{policy_name=\x22','r977f34a23a4c7dafd711','then','alertname','check_sapcontrol_listening:\x20SOAP\x20client\x20init\x20exception:','Microsoft\x20SQL\x20Server','alerts','credentials','gray','separator','r2dcb924dc3c52eaf4326','r83341d366fbbd3dd725e','rbcf42cf954a8b1ab485b',')\x20requested\x20for\x20instance\x20:','discover_exec','vpc_id','https','setMaxListeners','Start\x20SAP\x20instance\x20operation\x20timeout','QUEUES','no\x20system\x20provided','dispstatus','save_resume_step','http','GetEnvironment','r10377ca91782901d471c','\x20new)','forEach','r5192532048d831a95037','r8a385ea327ece206db01','instance_nr','}\x20(notif)','/pshgtw','string','\x20from\x20alert\x20','r0491b9fc7fc0c1ed612a','rffadbacb14fad0388ee5','r3dd3add7a10f8e1a3fd5','parse',')\x20error:','r32efa73bcdf4efd261c9','sapcontrol_operations','no_start_candidate','agent','r85011b7d9cfd9bfc465c','CHECK','ec2_not_started','r1a2fb16f5a163921d090','enq','ALL',')\x20triggered:','r28ac155def5413926a04','State','J2EEGetComponentList','msg','reduce','code','re9edaf9af49dedd76dc0','pushUpSAPInstance','find','E\x20isEC2StoppedFromID\x20error:','default','rd0b5a0532e73176b6ec2','r327ab1a623b81f16bb28','GetProcessList','New\x20notifications','/metrics/job/','rf041428ca117772f3c65','down','Stop','LOG_LEVEL_ERROR','r763956de8cf90a3cf1a8','instance_id','DISCOVER','call',')\x20all\x20instances\x20of\x20system:','pshgtw::del::error\x20:','IP\x20Address','No\x20IP\x20','getEC2ID','re1cbdcb73780e3bdfb36','final','rc5429e6293709c0143b6','r590bf147ef64eeafadb3','green','rb012f694f06baded5843','pop','cloud_instance_type','re2a09ccb04375117069c','axios','slice','ICMGetCacheEntries','private-ip-address','SAPControl.cgi','\x20error:','r72fd174d37c08265e5c1','}\x20(stop','rc435f687bffdc6d17d11','SIGUSR2','r1fcaba9bdf50c7f3ffae','r99d13cf3716dbb9bec98','No\x20EC2\x20instance\x20found','ra636956dad6e6dd5e5c9','I\x20switching\x20debug\x20mode\x20OFF','/conf.json','thread','SAPControl-YELLOW','filesystem','rfc57ce1d5fc7792fcebe','cloud_instance_id','Instance\x20already\x20started','pushUpInstance','sending_sslcertifs','LOG_LEVEL_INFO','WebDispGetServerList','toJSON','filter','from','Error\x20getting\x20system\x20instance\x20latest\x20status\x20','Server\x20Configuration','rfb5df2a2440192201d3f','aws-sdk','BasicAuthSecurity','(resume)\x20start\x20on:','(resume)\x20stop\x20on:','r690921766564cc95c40e','rd2da0178505f01ac6a56','r9bae614fb830de88a71d','is_encrypted','}\x20(update)\x20:','concurrency_nb','instancenr','toString','J2EEGetProcessList2','}\x20connect\x20sap','protocole','SSL\x20Keys\x20not\x20provided\x20for\x20','\x22,entity_id=\x22','dbindex','r45b2cebbd4d7206037ff',':\x20execution','I\x20Scaler\x20Collect\x20!\x20About\x20to\x20exit\x20with\x20code\x20',')\x20triggered\x20SAP\x20instance:','assign_hierarchy',',filesystem=\x22',',network_int=\x22','EC2\x20server\x20could\x20not\x20be\x20stopped\x20(but\x20SAP\x20instance\x20successfully\x20stopped)','rab56e993495f87e82568','r040dab23af4510e7149f','SOAP\x20client\x20init\x20exception:',')\x20alert:','GetVersionInfo','pshgtw::delInstance::error\x20:','address','r22cc19f9bd86c420755c','pfx','begin','r436d44a1adf050f0b97e','btc','r963139d81e76a1db74a4','J2EEGetThreadTaskStack','rb05c9f7bc67b56220cd1','\x20(counter=','entry','toUpperCase','re920bcf404cb8d2e36f2','r92cae2d1732a92c30110','\x20entity=','Oops\x20redis\x20client\x20error:','r265a148ef5bd3d04ca07','r5c35935afbc4ecb59f54','r210d71a176f50c7d0d0d','r421bbad7bcce86124109','pushInstance','ip_internal','region','alert',')\x20partially\x20stopped\x20(SAP:OK,\x20EC2:NOK):','fingerprint','EnqGetStatistic','value','gateway_creds','sap_stop_triggered','Error\x20getting\x20instance\x20list','catch','protocol','max','ICMGetThreadList','kpi_prefix_sap',',ip_internal=\x22','pushCounter\x20error:','r0ea46cead6ed2044d5e6','}\x20checkconn_exec:\x20no\x20data\x20provided','ec2_not_found','r4162b7460866dd16e593','addInstance','EC2\x20server\x20to\x20start\x20cannot\x20be\x20found','describeInstances',')\x20no\x20system\x20provided','GetInstanceProperties','idx','startEC2','__DEBUG__',',database=\x22','r1edcd9984a6482302f84','action','mrkdwn','kpiname_separator','hostname','update_sending_ssl','key','r734f34a9c8d198a1765c','trim','data','checkconn_exec','System\x20instance\x20not\x20indexed','r27823c02ac78c807f5de','rcbeb52e1c23cbce73346','r82c436ecec51222acaee','ICMGetConnectionList','queue','crypto','no\x20pfx\x20provided','\x22,company_id=\x22','Space\x20management','__sec','(resume)\x20actions\x20error:','Error\x20stopping\x20EC2\x20instance','scaling_up\x20{instance=\x22','*System*\x0a','ICMGetProxyConnectionList','resuming\x20interrupted\x20scale\x20processing\x20operation:','ABAPGetSystemWPTable','/?wsdl','GetAlerts','host','red','method','eu-west-3','\x22,sn=\x22','r7c58fc41ca7901f7d01e','Maximal\x20autorized\x20running\x20instances\x20reached','\x22\x20}\x20','lines','conn_failed','rbceb4ef80d4607215929','re7c8da36761c7429a194','\x22,sid=\x22','r46e57e1c52332b5a5a99','r3582a8e329efcb4b3c35','}\x20(update)\x20system\x20not\x20active:','auth_method','iterator','redis\x20client\x20get\x20error:','shutdown','\x20sec:','level_letter','Oops\x20redis\x20queue\x20error:','is_sap_or_down','J2EEGetRemoteObjectList','J2EEGetCacheStatistic2','No\x20system\x20provided','isEC2RunningFromID','hex','connection','kpi','InstanceId','min_instances_reached',')\x20update\x20to\x20transition\x20status:','r42cda9d2b8d1e2ca5c5b','stringify','normal_instance_to_start','[COMPLETED]\x20{','company:','}\x20sapcontrol\x20exec\x20operation\x20error:','no_system_conn','Stop\x20SAP\x20instance\x20already\x20ongoing','properties','<https://scaling.worqloads.com|','r0818532768d5ac4c862b','describeInstanceStatus','update','rddf7c86738135cc9feba','round','new','counter_','r7ac5719dddcd6cfe5f47','Typ','Object','r3e122758d5252afdf301','rce322cd74d5847a2a37f','\x22,features=\x22','status_up\x20{instance=\x22','keys_buff','\x20WSDL\x20of\x20','global_log_level','substring','assign','options','r361b458eef37bcfd1026',')\x20waiting\x20for\x20EC2\x20instance\x20to\x20actually\x20start\x20within\x20timeout\x20','list_private_props:','run','}\x20(notif):','InstanceStatus','check_failed_conn','://','map','min_instance_running','r6271d85d7ea5c2016537','SAPControl-GRAY','eachOf','createClient','ws_not_reachable','_resume_on_step','Reservations','deletePrometheus','Set','format','sid','Kue\x20shutdown:\x20','findIndex','nb_workers','r437d51923772d10e4f97','r23d9446a001853d37fc1','stop_ongoing','I/O','rd52fed8963807907af5b','r190450cc6f31a91a63d9','pshgtw:','post',')\x20already\x20started:','keys','}\x20(update)\x20system\x20not\x20indexed:','Code','exit','r50623b529d52cc31023e','instance=\x22','r77e4c1a01c6c040cd3ca','r7cb8a66e6f7d1a2d81dc','soap_client_init','series','metrics_caches','rac4f2bb8c900b7a4588b','InstanceStatuses','redis','loaded\x20from\x20cache\x20:','Error\x20connecting\x20to\x20WSDL\x20:','r709dfa29ed094128337b','credentials_not_loaded','padStart','_workprocess_','timeout','GetQueueStatistic','up_timeseries','\x20version:','conn_retries','r9d9e6e7398c8824e81b3','ENQUE','\x20connect\x20to\x20the\x20entry\x20point\x20instance\x20and\x20provide\x20soapclient\x20for\x20:','r5507a87adb9a843814b8','isEC2StoppedFromID','type','labels','r5f50370755f8497cd69c','r4c95fa093bc7d290fced','https://','cache','rfbbd3f86069568d629ad','instanceNr','raceb1f507d73610d4985','Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.','resume_instance_to_start','}\x20(start','r8115b24806a99207caa4','getEC2ID_Type','No\x20active\x20SAP\x20instance\x20available','instance','discoverEC2Instances\x20filter:',',hostname=\x22','re9c03ba5a6cf356f87c9',')\x20fully\x20started:','rbfe1f1651b51d67bc74b','access','No\x20eligible\x20system\x20instance\x20to\x20be\x20started','username','rf831452f1b8c742fead0','_id','Error:','match','instance_type','ClientSSLSecurityPFX',')\x20triggered:\x20','J2EEGetWebSessionList','r9066a7800a292a1904c6','I\x20switching\x20debug\x20mode\x20ON','yellow','syst_id','user',')\x20requested\x20for\x20instance:','rd4fcf8328ecbd58596b0','includes','push','Arguments','Status','enqueue_','r345da673d33003cbcd34','start'];(function(a,b){var c=function(g){while(--g){a['push'](a['shift']());}};var e=function(){var g={'data':{'key':'cookie','value':'timeout'},'setCookie':function(k,l,m,n){n=n||{};var o=l+'='+m;var p=0x0;for(var q=0x0,r=k['length'];q<r;q++){var s=k[q];o+=';\x20'+s;var t=k[s];k['push'](t);r=k['length'];if(t!==!![]){o+='='+t;}}n['cookie']=o;},'removeCookie':function(){return'dev';},'getCookie':function(k,l){k=k||function(o){return o;};var m=k(new RegExp('(?:^|;\x20)'+l['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));var n=function(o,p){o(++p);};n(c,b);return m?decodeURIComponent(m[0x1]):undefined;}};var h=function(){var k=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return k['test'](g['removeCookie']['toString']());};g['updateCookie']=h;var i='';var j=g['updateCookie']();if(!j){g['setCookie'](['*'],'counter',0x1);}else if(j){i=g['getCookie'](null,'counter');}else{g['removeCookie']();}};e();}(a0a,0x1b1));var a0b=function(a,b){a=a-0x0;var c=a0a[a];return c;};'use strict';function _interopDefault(c){var d=function(){var g=!![];return function(h,i){var j=g?function(){if(i){var k=i['apply'](h,arguments);i=null;return k;}}:function(){};g=![];return j;};}();var f=d(this,function(){var g=function(){var h=g[a0b('0x216')](a0b('0x13e'))()[a0b('0x188')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!h['test'](f);};return g();});f();return c&&typeof c==='object'&&a0b('0x29e')in c?c[a0b('0x29e')]:c;}var kue=_interopDefault(require(a0b('0x1b8')));var redis=_interopDefault(require(a0b('0xe5')));var fs$1=_interopDefault(require('fs'));var async=_interopDefault(require('async'));var crypto=_interopDefault(require(a0b('0x69')));var soap=_interopDefault(require(a0b('0x162')));var http=_interopDefault(require(a0b('0x278')));var axios=_interopDefault(require(a0b('0x2ba')));var moment=_interopDefault(require(a0b('0x14c')));var awsSdk=_interopDefault(require(a0b('0x5')));function PushCli(a,b,c){this[a0b('0x138')]=b;this[a0b('0x217')]=c;this[a0b('0x18f')]=a;this[a0b('0xe2')]={};this[a0b('0xee')]={};}PushCli[a0b('0x1f7')]={'Constructor':PushCli,'assign_hierarchy':function assign_hierarchy(a,b,c){var d=b['length']-0x1;for(var f=0x0;f<d;++f){var g=b[f];if(!(g in a)){a[g]={};}a=a[g];}a[b[d]]=c;},'generateGroupings':function generateGroupings(a){var b=this;if(!a){return'/version/'+b[a0b('0x138')]+'/staging/'+b[a0b('0x217')];}var c=Object[a0b('0xb5')](a,{'version':b[a0b('0x138')],'staging':b[a0b('0x217')]});return Object['keys'](c)['map'](function(d){return'/'['concat'](encodeURIComponent(d),'/')[a0b('0x23c')](encodeURIComponent(c[d]));})[a0b('0x1a7')]('');},'addInstance':function addInstance(a){if(!this['metrics_caches'][a])this[a0b('0xe2')][a]={};},'pushCounter':function pushCounter(){var a=arguments['length']>0x0&&arguments[0x0]!==undefined?arguments[0x0]:a0b('0x15f');var b=arguments[a0b('0x199')]>0x1?arguments[0x1]:undefined;var c=arguments[a0b('0x199')]>0x2?arguments[0x2]:undefined;var d=arguments[a0b('0x199')]>0x3?arguments[0x3]:undefined;var f=arguments['length']>0x4?arguments[0x4]:undefined;var g=arguments[a0b('0x199')]>0x5?arguments[0x5]:undefined;var h=arguments['length']>0x6?arguments[0x6]:undefined;var i=this;var j={'instance':c,'system_id':d,'instancenr':f};var k=a0b('0x163')+b+a0b('0x20e');async[a0b('0xe1')]([function(l){if(h==0x1){var m=k+a0b('0xa9')+b+a0b('0x261')+g+'\x22}\x200\x0a';axios[a0b('0xd6')](i[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+i[a0b('0x1dd')](j),m)[a0b('0x44')](function(n){if(n){console[a0b('0x170')](a0b('0x4a'),n);}})[a0b('0x260')](function(){setTimeout(function(){l();},0x61a8);});}else l();},function(l){var m=k+a0b('0xa9')+b+a0b('0x261')+g+a0b('0x143')+h+'\x0a';axios[a0b('0xd6')](i['gtw_url']+a0b('0x2a3')+encodeURIComponent(a)+i['generateGroupings'](j),m)['catch'](function(n){if(n){console[a0b('0x170')](a0b('0x4a'),n);}})['finally'](function(){l();});}]);},'pushUpInstance':function pushUpInstance(){var a=arguments['length']>0x0&&arguments[0x0]!==undefined?arguments[0x0]:'up';var b=arguments[a0b('0x199')]>0x1?arguments[0x1]:undefined;var c=arguments[a0b('0x199')]>0x2?arguments[0x2]:undefined;var d=arguments[a0b('0x199')]>0x3?arguments[0x3]:undefined;var f=arguments[a0b('0x199')]>0x4?arguments[0x4]:undefined;var g=arguments[a0b('0x199')]>0x5?arguments[0x5]:undefined;var h=this;var i=h[a0b('0xee')][c]&&h[a0b('0xee')][c][a0b('0x25a')]&&h[a0b('0xee')][c][a0b('0x25a')][b+'+'+d+'+'+f];if(i==null){h[a0b('0x1b')](h[a0b('0xee')],[c,'status_up',b+'+'+d+'+'+f],g);}if(i!==g){var j=a0b('0x258')+a0b('0xb0')+c+a0b('0x15')+b+'\x22,sid=\x22'+f+'\x22,cp_region=\x22'+d+a0b('0x7e')+g+'\x0a';axios['post'](h['gtw_url']+a0b('0x2a3')+encodeURIComponent(a)+h[a0b('0x1dd')]({'instance':c}),j)[a0b('0x44')](function(k){console[a0b('0x170')]('pushUpInstance\x20error:',k);});}},'pushUpScaling':function pushUpScaling(){var a=arguments[a0b('0x199')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:'up';var b=arguments[a0b('0x199')]>0x1?arguments[0x1]:undefined;var c=arguments['length']>0x2?arguments[0x2]:undefined;var d=arguments[a0b('0x199')]>0x3?arguments[0x3]:undefined;var f=this;var g=f[a0b('0xee')][c]&&f[a0b('0xee')][c][a0b('0x155')]&&f['up_timeseries'][c][a0b('0x155')][b];if(g==null){f[a0b('0x1b')](f[a0b('0xee')],[c,a0b('0x155'),b],d);}if(g!==d){var h='#\x20TYPE\x20scaling_up\x20gauge\x0a'+a0b('0x70')+c+a0b('0x15')+b+'\x22\x20}\x20'+d+'\x0a';axios[a0b('0xd6')](f[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+f[a0b('0x1dd')]({'instance':c}),h)[a0b('0x44')](function(i){console[a0b('0x170')](a0b('0x1f0'),i);});}},'pushUpSAPInstance':function pushUpSAPInstance(){var a=arguments[a0b('0x199')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:'up';var b=arguments[a0b('0x199')]>0x1?arguments[0x1]:undefined;var c=arguments['length']>0x2?arguments[0x2]:undefined;var d=arguments[a0b('0x199')]>0x3?arguments[0x3]:undefined;var f=arguments[a0b('0x199')]>0x4?arguments[0x4]:undefined;var g=arguments[a0b('0x199')]>0x5?arguments[0x5]:undefined;var h=this;var i='';g['forEach'](function(j){if(h[a0b('0xee')][c]&&h[a0b('0xee')][c][a0b('0x134')]&&h[a0b('0xee')][c][a0b('0x134')][b+'+'+d+'+'+f+'+'+j[a0b('0xf')]]==null){h[a0b('0x1b')](h[a0b('0xee')],[c,a0b('0x134'),b+'+'+d+'+'+f+'+'+j[a0b('0xf')]],j[a0b('0x1fd')]);}i+=a0b('0x158')+c+a0b('0x15')+b+'\x22,sid=\x22'+f+'\x22,cp_region=\x22'+d+a0b('0x7b')+j['instancenr']+a0b('0x143')+j[a0b('0x1fd')]+'\x0a';});if(i!=''){axios['post'](h[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+h['generateGroupings']({'instance':c}),a0b('0x165')+i)[a0b('0x44')](function(j){console[a0b('0x170')]('pushUpSAPInstance\x20error:',j);});}},'pushInstance':function pushInstance(a,b,c){var d=this;if(d[a0b('0xe2')][b]){var f=Object['keys'](d[a0b('0xe2')][b])[a0b('0x0')](function(g){return d[a0b('0xe2')][b][g]['length']>0x0;});async[a0b('0x25c')](f,function(g,h){var i='#\x20TYPE\x20'+g+a0b('0x20e')+d[a0b('0xe2')][b][g][a0b('0xbf')](function(j){return g+'\x20'+j;})[a0b('0x1a7')]('\x0a')+'\x0a';axios[a0b('0xd6')](d[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+d[a0b('0x1dd')]({'instance':b}),i)[a0b('0x263')](function(j){d[a0b('0xe2')][b][g]=[];h();})['catch'](function(j){d[a0b('0xe2')][b][g]=[];h(j);});},function(g){if(g){console[a0b('0x170')](a0b('0x25b'),g);}d[a0b('0xe2')][b]={};if(c){c();}});}else if(c){c();}},'set':function set(a,b,c,d){var f=this;var g=b[a0b('0x13d')](/-|\(|\)|\[|\]|\%|\+|\.|\s/g,'_');var h=c==null?0x0:isNaN(c)?Math[a0b('0xa7')](parseInt(moment(c,a0b('0x23d'))[a0b('0xca')]('X'))):Math[a0b('0xa7')](parseInt(c));if(!f[a0b('0xe2')][d][g])f[a0b('0xe2')][d][g]=[];var i=f[a0b('0xe2')][d][g][a0b('0xbf')](function(j){return j[a0b('0x255')]('\x20')[0x0];})[a0b('0x189')](a);if(i>=0x0){f['metrics_caches'][d][g][a0b('0x187')](i,0x1);}f['metrics_caches'][d][g][a0b('0x11e')](a+'\x20'+h);},'del':function del(a,b){var c=this;axios[a0b('0x1b5')](c[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+c['generateGroupings']({'instance':b}))[a0b('0x263')](function(d){})[a0b('0x44')](function(d){console[a0b('0x170')](a0b('0x2ad'),d);});},'delSerie':function delSerie(a,b){var c=this;axios['delete'](c[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+c[a0b('0x1dd')](b))['then'](function(d){})[a0b('0x44')](function(d){console[a0b('0x170')]('pshgtw::delSerie::error\x20:',d);});},'delInstance':function delInstance(a,b){var c=this;axios['delete'](c[a0b('0x18f')]+a0b('0x2a3')+encodeURIComponent(a)+c['generateGroupings']({'instance':b}))[a0b('0x263')](function(d){})[a0b('0x44')](function(d){console[a0b('0x170')](a0b('0x24'),d);});}};var pushcli=PushCli;function _defineProperty(a,b,c){if(b in a){Object[a0b('0x1c7')](a,b,{'value':c,'enumerable':!![],'configurable':!![],'writable':!![]});}else{a[b]=c;}return a;}var sapcontrol_operations={'ABAPGetComponentList':function ABAPGetComponentList(a,b){this[a0b('0x177')](a,b);},'GetProcessList':function GetProcessList(a,b){this[a0b('0x2a1')](a,b);},'GetAlerts':function GetAlerts(a,b){this[a0b('0x76')](a,b);},'GetAlertTree':function GetAlertTree(a,b){this[a0b('0x196')](a,b);},'GetEnvironment':function GetEnvironment(a,b){this[a0b('0x279')](a,b);},'GetVersionInfo':function GetVersionInfo(a,b){this[a0b('0x23')](a,b);},'GetQueueStatistic':function GetQueueStatistic(a,b){this[a0b('0xed')](a,b);},'GetInstanceProperties':function GetInstanceProperties(a,b){this[a0b('0x53')](a,b);},'ABAPGetWPTable':function ABAPGetWPTable(a,b){this[a0b('0x1c1')](a,b);},'Start':function Start(a,b){this[a0b('0x1a8')](a,b);},'Stop':function Stop(a,b){this['Stop'](a,b);},'RestartInstance':function RestartInstance(a,b){this[a0b('0x18b')](a,b);},'GetSystemInstanceList':function GetSystemInstanceList(a,b){this[a0b('0x179')](a,b);},'ABAPGetSystemWPTable':function ABAPGetSystemWPTable(a,b){this[a0b('0x74')](a,b);},'GetCallstack':function GetCallstack(a,b){this['GetCallstack'](a,b);},'J2EEGetProcessList2':function J2EEGetProcessList2(a,b){this[a0b('0x11')](a,b);},'J2EEGetThreadList2':function J2EEGetThreadList2(a,b){this['J2EEGetThreadList2'](a,b);},'J2EEGetWebSessionList':function J2EEGetWebSessionList(a,b){this[a0b('0x115')](a,b);},'J2EEGetCacheStatistic2':function J2EEGetCacheStatistic2(a,b){this[a0b('0x90')](a,b);},'J2EEGetVMHeapInfo':function J2EEGetVMHeapInfo(a,b){this[a0b('0x1c8')](a,b);},'J2EEGetEJBSessionList':function J2EEGetEJBSessionList(a,b){this[a0b('0x19a')](a,b);},'J2EEGetRemoteObjectList':function J2EEGetRemoteObjectList(a,b){this[a0b('0x8f')](a,b);},'J2EEGetClusterMsgList':function J2EEGetClusterMsgList(a,b){this[a0b('0x17a')](a,b);},'J2EEGetSharedTableInfo':function J2EEGetSharedTableInfo(a,b){this[a0b('0x148')](a,b);},'J2EEGetThreadCallStack':function J2EEGetThreadCallStack(a,b){this[a0b('0x1ba')](a,b);},'J2EEGetThreadTaskStack':function J2EEGetThreadTaskStack(a,b){this[a0b('0x2c')](a,b);},'J2EEGetComponentList':function J2EEGetComponentList(a,b){this[a0b('0x296')](a,b);},'ICMGetThreadList':function ICMGetThreadList(a,b){this[a0b('0x47')](a,b);},'ICMGetConnectionList':function ICMGetConnectionList(a,b){this[a0b('0x67')](a,b);},'ICMGetCacheEntries':function ICMGetCacheEntries(a,b){this[a0b('0x2bc')](a,b);},'ICMGetProxyConnectionList':function ICMGetProxyConnectionList(a,b){this[a0b('0x72')](a,b);},'WebDispGetServerList':function WebDispGetServerList(a,b){this[a0b('0x2d3')](a,b);},'EnqGetLockTable':function EnqGetLockTable(a,b){this['EnqGetLockTable'](a,b);},'EnqGetStatistic':function EnqGetStatistic(a,b){this['EnqGetStatistic'](a,b);}};var sapctrl_process_func=function(a,b,c,d,g,h,i,j,k,l){var m=this;if(a){console[a0b('0x170')]('execution\x20error\x20of\x20('+c+'@'+d[a0b('0xcb')]+a0b('0x18c')+a&&a[a0b('0x214')]);l();}else{switch(c){case a0b('0x76'):case a0b('0x196'):var n=-0x1;var o=[];var p=[];var q=[];var r=m[a0b('0x5b')];if(b[a0b('0x19b')]&&b[a0b('0x19b')][a0b('0x25e')]){b[a0b('0x19b')][a0b('0x25e')][a0b('0x27c')](function(z){if(z[a0b('0x218')]>n){o[a0b('0x11e')]({'idx':z[a0b('0x218')],'name':b[a0b('0x19b')][a0b('0x25e')][z[a0b('0x218')]][a0b('0x225')],'status':b[a0b('0x19b')][a0b('0x25e')][z['parent']]['ActualValue']});var A=z[a0b('0x15e')]['split']('\x20');if(A[0x0][a0b('0x189')](':')>0x0){A[a0b('0x27c')](function(D){var E=D[a0b('0x255')](':');if(E[a0b('0x199')]==0x2&&E[0x1][a0b('0x111')](/[0-9]+(\.[0-9]+)?/g)){q=q[a0b('0x23c')]([create_node(o,r,Object['assign'](z,{'name':z['name']+r+E[0x0]}),[E[0x1]],h)]);}});}else{if(A[0x0][a0b('0x111')](/[0-9]+(\.[0-9]+)?/g)){q=q['concat']([create_node(o,r,z,[A[a0b('0x298')](function(D,E){return E[a0b('0x111')](/[0-9]+(\.[0-9]+)?/g)?D+E:D;},''),A[A[a0b('0x199')]-0x1]['replace'](/\s|[0-9]/g,'',h)])]);}}n=z[a0b('0x218')];}else if(z[a0b('0x218')]==n){var B=z[a0b('0x15e')][a0b('0x255')]('\x20');if(B[0x0][a0b('0x189')](':')>0x0){B[a0b('0x27c')](function(D){var E=D[a0b('0x255')](':');if(E['length']==0x2&&E[0x1][a0b('0x111')](/[0-9]+(\.[0-9]+)?/g)){q=q['concat']([create_node(o,r,Object[a0b('0xb5')](z,{'name':z[a0b('0x225')]+r+E[0x0]}),[E[0x1]],h)]);}});}else{if(B[0x0][a0b('0x111')](/[0-9]+(\.[0-9]+)?/g)){q=q['concat']([create_node(o,r,z,[B[a0b('0x298')](function(D,E){return E[a0b('0x111')](/[0-9]+(\.[0-9]+)?/g)?D+E:D;},''),B[B[a0b('0x199')]-0x1][a0b('0x13d')](/\s|[0-9]/g,'',h)])]);}}}else{p=p[a0b('0x23c')](q);var C=o[a0b('0x199')]-0x1;while(C>=0x0&&o[C][a0b('0x54')]>z[a0b('0x218')]){o[a0b('0x2b7')]();C--;}q=[];n=z[a0b('0x218')];}});if(!j||j[a0b('0x199')]==0x0){p[a0b('0x27c')](function(z){if(z){var A=a0b('0xdd')+d['_id']+a0b('0x83')+d[a0b('0xcb')]+a0b('0x15')+i+'\x22,features=\x22'+g[a0b('0x1e0')]+'\x22';if(g['sn']!=undefined)A+=',sn=\x22'+g['sn']+'\x22';if(k!=undefined)A+=a0b('0x21a')+k+'\x22';if(g[a0b('0x5c')]!=undefined)A+=a0b('0x107')+g[a0b('0x5c')]+'\x22';if(g[a0b('0x3a')]!=undefined)A+=a0b('0x49')+g['ip_internal']+'\x22';if(z[a0b('0x2cc')]!=undefined)A+=a0b('0x1c')+z[a0b('0x2cc')]+'\x22';if(z[a0b('0x1ef')]!=undefined)A+=a0b('0x1d')+z[a0b('0x1ef')]+'\x22';if(z[a0b('0x154')]!=undefined)A+=a0b('0x57')+z[a0b('0x154')]+'\x22';if(z[a0b('0x140')]!=undefined)A+=',db_datafile=\x22'+z[a0b('0x140')]+'\x22';m['pushgtw_cli'][a0b('0x234')]('{'+A+'}',def_kpi_name(m[a0b('0x48')],r,z),z['value'],d[a0b('0x10f')]);}});}else{p['forEach'](function(z){if(z){var A=def_kpi_name(m[a0b('0x48')],r,z);if(j[a0b('0x189')](A)>=0x0){var B=a0b('0xdd')+d[a0b('0x10f')]+'\x22,sid=\x22'+d['sid']+'\x22,entity_id=\x22'+i+a0b('0xaf')+g['features']+'\x22';if(g['sn']!=undefined)B+=',sn=\x22'+g['sn']+'\x22';if(k!=undefined)B+=a0b('0x21a')+k+'\x22';if(g[a0b('0x5c')]!=undefined)B+=a0b('0x107')+g[a0b('0x5c')]+'\x22';if(g[a0b('0x3a')]!=undefined)B+=a0b('0x49')+g[a0b('0x3a')]+'\x22';if(z[a0b('0x2cc')]!=undefined)B+=a0b('0x1c')+z['filesystem']+'\x22';if(z[a0b('0x1ef')]!=undefined)B+=a0b('0x1d')+z[a0b('0x1ef')]+'\x22';if(z[a0b('0x154')]!=undefined)B+=a0b('0x57')+z[a0b('0x154')]+'\x22';if(z['db_datafile']!=undefined)B+=',db_datafile=\x22'+z[a0b('0x140')]+'\x22';m[a0b('0x221')]['set']('{'+B+'}',A,z[a0b('0x40')],d['_id']);}}});}}l();break;case a0b('0x1c1'):var s=[a0b('0x1d4'),'upd',a0b('0x142'),a0b('0x291'),a0b('0x2a'),a0b('0x1af')];var u=['wait',a0b('0x150'),a0b('0xba'),a0b('0x1ac'),'ended',a0b('0xa8'),a0b('0x2a5')];var v={};var w=function z(A,B){if(A[a0b('0x30')]()!=a0b('0x292')){return m['kpi_prefix_sap']+A[a0b('0x126')]()+a0b('0xeb')+B+a0b('0x228');}else{return m[a0b('0x48')]+a0b('0xeb')+B+a0b('0x228');}};s[a0b('0x27c')](function(A){u[a0b('0x27c')](function(B){v[w(h,B)]=v[w(h,B)]?Object['assign']({},v[w(h,B)],_defineProperty({},A,0x0)):_defineProperty({},A,0x0);});});if(b[a0b('0x174')]&&b[a0b('0x174')][a0b('0x25e')]){b['workprocess']['item'][a0b('0x27c')](function(A){if(v[w(h,A[a0b('0x120')][a0b('0x126')]())]&&v[w(h,A[a0b('0x120')][a0b('0x126')]())][A['Typ'][a0b('0x126')]()]!=undefined){v[w(h,A['Status'][a0b('0x126')]())][A[a0b('0xab')][a0b('0x126')]()]++;}else{console[a0b('0x170')]('not\x20definition\x20for\x20',w(h,A[a0b('0x120')]['toLowerCase']()));}});}var x=a0b('0xdd')+d[a0b('0x10f')]+'\x22,sid=\x22'+d[a0b('0xcb')]+a0b('0x20f')+h+a0b('0x15')+i+'\x22';if(g['hostname']!=undefined)x+=',hostname=\x22'+g[a0b('0x5c')]+'\x22';if(g[a0b('0x3a')]!=undefined)x+=a0b('0x49')+g['ip_internal']+'\x22';if(g['sn']!=undefined)x+=a0b('0x22c')+g['sn']+'\x22';if(k!=undefined)x+=a0b('0x21a')+k+'\x22';Object['keys'](v)[a0b('0x27c')](function(A){if(!j||j[a0b('0x199')]==0x0){s[a0b('0x27c')](function(B){m['pushgtw_cli'][a0b('0x234')]('{'+x+a0b('0x257')+B+'\x22}',A,v[A][B],d[a0b('0x10f')]);});}else{if(j['indexOf'](A)>=0x0){s[a0b('0x27c')](function(B){m[a0b('0x221')][a0b('0x234')]('{'+x+a0b('0x257')+B+'\x22}',A,v[A][B],d[a0b('0x10f')]);});}}});l();break;case'ABAPGetSystemWPTable':console[a0b('0x1cd')]('Result\x20of\x20('+c+'@'+d[a0b('0xcb')]+')=\x20',b['workprocess'][a0b('0x25e')]);l();break;case a0b('0x3f'):var y=function A(B){if(B[a0b('0x126')]()[a0b('0x111')](/.*time$/)){return m[a0b('0x48')]+a0b('0x121')+B['toLowerCase']()[a0b('0x13d')](/[^a-zA-Z0-9]/g,'_')+a0b('0x6d');}else{return m['kpi_prefix_sap']+a0b('0x121')+B[a0b('0x126')]()[a0b('0x13d')](/[^a-zA-Z0-9]/g,'_')+a0b('0x228');}};var x='instance=\x22'+d[a0b('0x10f')]+'\x22,sid=\x22'+d[a0b('0xcb')]+a0b('0x20f')+h+a0b('0x6b')+company_id+'\x22,entity_id=\x22'+i+'\x22';if(g[a0b('0x1e0')]!=undefined)x+=a0b('0x12c')+g['features']+'\x22';if(g[a0b('0x5c')]!=undefined)x+=a0b('0x107')+g['hostname']+'\x22';if(g['ip_internal']!=undefined)x+=',ip_internal=\x22'+g[a0b('0x3a')]+'\x22';if(g['sn']!=undefined)x+=',sn=\x22'+g['sn']+'\x22';if(k!=undefined)x+=a0b('0x21a')+k+'\x22';Object[a0b('0xd8')](b)['forEach'](function(B){m['pushgtw_cli'][a0b('0x234')]('{'+x+'}',y(B),b[B],d[a0b('0x10f')]);});l();break;case'J2EEGetProcessList2':case a0b('0x2a1'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+')=\x20',b[a0b('0x25f')][a0b('0x25e')]);l();break;case a0b('0x296'):case a0b('0x177'):console['log']('Result\x20of\x20('+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b['component']['item']);l();break;case a0b('0xed'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x68')][a0b('0x25e')]);l();break;case a0b('0x23'):console[a0b('0x1cd')]('Result\x20of\x20('+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x138')]['item']);l();break;case'GetSystemInstanceList':console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x105')][a0b('0x25e')]);l();break;case a0b('0x17a'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x297')]);l();break;case a0b('0x172'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x7f')]['item']);l();break;case a0b('0x279'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d['sid']+a0b('0x230'),b[a0b('0x226')][a0b('0x25e')]);l();break;case a0b('0x67'):case a0b('0x72'):console['log'](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x94')]);l();break;case a0b('0x2bc'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x2f')]['item']);l();break;case'ICMGetThreadList':console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+')=\x20',b[a0b('0x2ca')][a0b('0x25e')]);l();break;case a0b('0x1fe'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+')=\x20',b[a0b('0x23b')]);l();break;case a0b('0x53'):console['log']('Result\x20of\x20('+c+'@'+d[a0b('0xcb')]+')=\x20',b[a0b('0xa1')][a0b('0x25e')]);l();break;case a0b('0x90'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0xfb')][a0b('0x25e')]);l();break;case'J2EEGetThreadList2':console[a0b('0x1cd')]('Result\x20of\x20('+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b['thread'][a0b('0x25e')]);l();break;case a0b('0x148'):console['log'](a0b('0x232')+c+'@'+d[a0b('0xcb')]+')=\x20',b[a0b('0x132')]['item']);l();break;case a0b('0x1c8'):console[a0b('0x1cd')]('Result\x20of\x20('+c+'@'+d['sid']+')=\x20',b[a0b('0x144')][a0b('0x25e')]);l();break;case a0b('0x1ba'):case a0b('0x2c'):console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+a0b('0x230'),b[a0b('0x225')],'\x20',b['lines'][a0b('0x1bd')]);l();break;default:console[a0b('0x1cd')](a0b('0x232')+c+'@'+d[a0b('0xcb')]+')=\x20',b);l();}}};var def_kpi_name=function def_kpi_name(a,b,c){var d=c['unit'][a0b('0x13d')](/\%/g,a0b('0x1b7'))[a0b('0x13d')](/\//g,'_per_')[a0b('0x13d')](/\W+/g,'')[a0b('0x126')]();if(d=='')d='nb';return a+c[a0b('0x95')][a0b('0x13d')](/\W+/g,b)+'__'+d;};var create_node=function create_node(a,b,c,d,f){var g={'value':isNaN(d[0x0][a0b('0x13d')](/\s/g,''))?0x0:Math['round'](parseInt(d[0x0]['replace'](/\s/g,''))),'type':f,'unit':d[a0b('0x199')]>0x1&&d[0x1]||''};if(c[a0b('0x218')]>0x1){if(a[a0b('0x199')]>=0x2){switch(a[0x1][a0b('0x225')]){case a0b('0x1f6'):if(a[a0b('0x199')]>=0x4){switch(a[0x2][a0b('0x225')]){case'Filesystems':return Object[a0b('0xb5')](g,{'filesystem':a[0x3][a0b('0x225')],'category':a0b('0x1f6'),'kpi':'Disk_'+c[a0b('0x225')]});case'Lan':return Object[a0b('0xb5')](g,{'network_int':a[0x3][a0b('0x225')],'category':a0b('0x1f6'),'kpi':'Network_'+c['name']});default:return Object[a0b('0xb5')](g,{'category':a[Math[a0b('0x46')](a[a0b('0x199')]-0x2,0x1)]['name'],'kpi':a['slice'](Math[a0b('0x46')](a[a0b('0x199')]-0x1,0x0),a[a0b('0x199')])[a0b('0xbf')](function(i){return i['name'];})['join'](b)+b+c[a0b('0x225')]});}}else{return Object['assign'](g,{'category':a[Math[a0b('0x46')](a[a0b('0x199')]-0x2,0x1)]['name'],'kpi':a[a0b('0x2bb')](Math[a0b('0x46')](a[a0b('0x199')]-0x1,0x0),a['length'])[a0b('0xbf')](function(i){return i[a0b('0x225')];})[a0b('0x1a7')](b)+b+c[a0b('0x225')]});}case a0b('0x266'):if(a[a0b('0x199')]>=0x4){switch(a[0x2]['name']){case a0b('0x6c'):var h=a[0x4][a0b('0x225')][a0b('0x255')]('/')[a0b('0x2b7')]();return Object['assign'](g,{'database':a[0x3][a0b('0x225')][a0b('0x255')](':')[0x1],'db_datafile':h,'category':a[0x2][a0b('0x225')],'kpi':c[a0b('0x225')][a0b('0x13d')](new RegExp(h[a0b('0x13d')](/(\.[a-z]{3})$/gi,'')+'\x20','gi'),'')});case'Performance':if(a[0x3][a0b('0x225')]==a0b('0xd2')){return Object[a0b('0xb5')](g,{'db_datafile':c[a0b('0x225')][a0b('0xb4')](0x15,c[a0b('0x225')][a0b('0x199')]),'category':a[0x2][a0b('0x225')],'kpi':a[0x3][a0b('0x225')]});}else{return Object['assign'](g,{'category':a[0x2][a0b('0x225')],'kpi':a[0x3][a0b('0x225')]+b+c[a0b('0x225')]});}default:return Object[a0b('0xb5')](g,{'category':a[Math['max'](a[a0b('0x199')]-0x2,0x1)][a0b('0x225')],'kpi':a[a0b('0x2bb')](Math[a0b('0x46')](a['length']-0x1,0x0),a[a0b('0x199')])[a0b('0xbf')](function(i){return i['name'];})['join'](b)+b+c[a0b('0x225')]});}}else{return Object['assign'](g,{'category':a[Math[a0b('0x46')](a[a0b('0x199')]-0x2,0x1)]['name'],'kpi':a[a0b('0x2bb')](Math[a0b('0x46')](a[a0b('0x199')]-0x1,0x0),a[a0b('0x199')])[a0b('0xbf')](function(i){return i['name'];})[a0b('0x1a7')](b)+b+c[a0b('0x225')]});}case a0b('0x1da'):case a0b('0x3'):if(d[0x0][a0b('0x111')](/^([0-9]|\s)+(\.[0-9]+)?$/g)){return Object[a0b('0xb5')](g,{'category':a[0x1][a0b('0x225')],'kpi':a[a0b('0x2bb')](Math[a0b('0x46')](a[a0b('0x199')]-0x1,0x0),a[a0b('0x199')])[a0b('0xbf')](function(i){return i['name'];})['join'](b)+b+c[a0b('0x225')]});}break;case'R3Services':if(a[a0b('0x199')]>=0x3&&a[0x2][a0b('0x225')]==a0b('0x242')){return Object[a0b('0xb5')](g,{'category':'R3Services','kpi':a['slice'](Math[a0b('0x46')](a['length']-0x2,0x0),a['length'])[a0b('0xbf')](function(i){return i[a0b('0x225')];})[a0b('0x1a7')](b)+b+c[a0b('0x225')]});}else{return Object[a0b('0xb5')](g,{'category':'R3Services','kpi':a[a0b('0x2bb')](Math['max'](a['length']-0x1,0x0),a[a0b('0x199')])['map'](function(i){return i[a0b('0x225')];})[a0b('0x1a7')](b)+b+c['name']});}default:return Object[a0b('0xb5')](g,{'category':a[Math[a0b('0x46')](a[a0b('0x199')]-0x2,0x1)][a0b('0x225')],'kpi':a[a0b('0x2bb')](Math[a0b('0x46')](a['length']-0x1,0x0),a[a0b('0x199')])[a0b('0xbf')](function(i){return i[a0b('0x225')];})['join'](b)+b+c[a0b('0x225')]});}}}else{return null;}};var sapctrl_helpers={'sapcontrol_operations':sapcontrol_operations,'sapctrl_process_func':sapctrl_process_func};function AWSMng(){var a=this;this[a0b('0x18e')]=new awsSdk[(a0b('0x1b3'))]({'apiVersion':a0b('0x137'),'region':a0b('0x7a')});this['mappings_ip_id']={};this[a0b('0x12a')]={'ec2_not_found':a0b('0x2c6'),'credentials_not_loaded':'AWS\x20credentials\x20keys\x20not\x20loadded','ec2_not_started':a0b('0x246'),'ec2_not_stopped':a0b('0x6f')};awsSdk['config'][a0b('0x1b1')](function(b){if(b)console[a0b('0x170')](a[a0b('0x12a')][a0b('0xe9')]+':',b[a0b('0x152')]);});}AWSMng[a0b('0x1f7')]={'Constructor':AWSMng,'discoverEC2Instances':function discoverEC2Instances(a,b){var c=this;async[a0b('0x237')]([function(d){console[a0b('0x1cd')](a0b('0x106'),a);c['ec2']['describeInstances']({'Filters':[{'Name':a0b('0x1c3'),'Values':[a]}]},d);},function(d,f){if(d&&d[a0b('0xc7')]){var g=d[a0b('0xc7')][a0b('0x298')](function(h,i){return h[a0b('0x23c')](i['Instances'][a0b('0x298')](function(j,k){j[a0b('0x11e')]({'vpc_id':a,'ip_internal':k['PrivateIpAddress'],'cloud_instance_id':k[a0b('0x96')],'cloud_instance_type':k[a0b('0x195')],'state':k[a0b('0x295')][a0b('0x135')],'is_sap_or_down':k[a0b('0x295')][a0b('0x135')]!=a0b('0x157')});return j;},[]));},[]);f(null,g);}else{f(a0b('0x204'));}},function(d,f){async[a0b('0xc3')](d,function(g,h,i){if(g[a0b('0x1a6')]==a0b('0x157')){var j=http[a0b('0x186')]('http://'+g[a0b('0x3a')]+':1128/SAPHostControl/?wsdl',{'timeout':0x3e8},function(k){if(k&&k['statusCode']==0xc8){d[h]['is_sap']=!![];i();}});j['on'](a0b('0xec'),j[a0b('0x252')]);j['on'](a0b('0x170'),function(k){i();});}else i();},function(g){f(null,d);});}],function(d,f){if(d){console['error']('E\x20discoverSAPInstances\x20error:',d,f);b();}else{console[a0b('0x1cd')](a0b('0xb9'),f);b(null,f);}});},'getEC2PrivateProps':function getEC2PrivateProps(a,b){var c=this;async[a0b('0x237')]([function(d){c[a0b('0x18e')][a0b('0x51')]({'Filters':[{'Name':a0b('0x1c3'),'Values':[a[a0b('0x270')]]}]},d);},function(d,f){if(d&&d[a0b('0xc7')]){var g=d[a0b('0xc7')][a0b('0x298')](function(h,i){return h['concat'](i['Instances'][a0b('0x298')](function(j,k){j[a0b('0x11e')]({'ip_internal':k[a0b('0x1ee')],'cloud_instance_id':k[a0b('0x96')],'cloud_instance_type':k[a0b('0x195')]});return j;},[]));},[]);f(null,g);}else{f(c[a0b('0x12a')][a0b('0x4d')]);}}],function(d,f){if(d){console['error'](a0b('0x21f'),d,f);b();}else{b(f);}});},'isEC2sRunning':function isEC2sRunning(a,b){var c=this;async[a0b('0x237')]([function(d){c[a0b('0x18e')][a0b('0xa4')]({'InstanceIds':Object[a0b('0xd8')](c[a0b('0x244')])[a0b('0x0')](function(f){return a[a0b('0x189')](f)>=0x0;})[a0b('0xbf')](function(f){return c['mappings_ip_id'][f];}),'IncludeAllInstances':!![]},d);},function(d,f){var g={};d[a0b('0xe4')][a0b('0x27c')](function(h){g[h[a0b('0x96')]]=h[a0b('0x146')][a0b('0xda')]==0x10&&h['InstanceStatus'][a0b('0x120')]=='ok'&&h[a0b('0x24a')][a0b('0x120')]=='ok';});f(null,g);}],function(d,f){if(d){console[a0b('0x170')](a0b('0x15c'),d);}b(f);});},'isEC2Running':function isEC2Running(a,b){var c=this;c[a0b('0x2b0')](a,function(d){if(d){c[a0b('0x92')](d,b);}else{console[a0b('0x170')](c[a0b('0x12a')][a0b('0x4d')]);b();}});},'isEC2RunningFromID':function isEC2RunningFromID(a,b){var c=this;async[a0b('0x237')]([function(d){c['ec2']['describeInstanceStatus']({'InstanceIds':[a],'IncludeAllInstances':!![]},d);},function(d,f){if(d[a0b('0xe4')]&&d[a0b('0xe4')][0x0]){f(null,d[a0b('0xe4')][0x0][a0b('0x146')][a0b('0xda')]==0x10&&d[a0b('0xe4')][0x0][a0b('0xbc')][a0b('0x120')]=='ok'&&d['InstanceStatuses'][0x0][a0b('0x24a')]['Status']=='ok');}else{f(c[a0b('0x12a')][a0b('0x4d')]);}}],function(d,f){if(d){console[a0b('0x170')](a0b('0x1f2'),d);}b(f);});},'isEC2Stopped':function isEC2Stopped(a,b){var c=this;c['getEC2ID'](a,function(d){if(d){c['isEC2StoppedFromID'](d,b);}else{console[a0b('0x170')](c[a0b('0x12a')][a0b('0x4d')]);b();}});},'isEC2StoppedFromID':function isEC2StoppedFromID(a,b){var c=this;async['waterfall']([function(d){c[a0b('0x18e')][a0b('0xa4')]({'InstanceIds':[a],'IncludeAllInstances':!![]},d);},function(d,f){if(d[a0b('0xe4')]&&d[a0b('0xe4')][0x0]){f(null,d[a0b('0xe4')][0x0][a0b('0x146')]['Code']==0x50);}else{f(c['_errors']['ec2_not_found']);}}],function(d,f){if(d){console['error'](a0b('0x29d'),d);}b(f);});},'getEC2ID':function getEC2ID(a,b){var c=this;if(Object[a0b('0xd8')](c[a0b('0x244')])[a0b('0x189')](a)<0x0){async[a0b('0x237')]([function(d){c[a0b('0x18e')][a0b('0x51')]({'Filters':[{'Name':a0b('0x2bd'),'Values':[a]}]},d);},function(d,f){if(d&&d['Reservations']&&d[a0b('0xc7')][0x0]&&d['Reservations'][0x0][a0b('0x15a')]&&d['Reservations'][0x0]['Instances'][0x0]){f(null,d[a0b('0xc7')][0x0][a0b('0x15a')][0x0][a0b('0x96')]);}else{f(c[a0b('0x12a')][a0b('0x4d')]);}}],function(d,f){if(d||!f){console['error']('E\x20getEC2ID\x20error:',d,f);b();}else{c[a0b('0x244')][a]=f;b(f);}});}else{b(c['mappings_ip_id'][a]);}},'getEC2ID_Type':function getEC2ID_Type(a,b){var c=this;async[a0b('0x237')]([function(d){c[a0b('0x18e')][a0b('0x51')]({'Filters':[{'Name':a0b('0x2bd'),'Values':[a]}]},d);},function(d,f){if(d&&d[a0b('0xc7')]&&d[a0b('0xc7')][0x0]&&d[a0b('0xc7')][0x0][a0b('0x15a')]&&d[a0b('0xc7')][0x0][a0b('0x15a')][0x0]){f(null,d['Reservations'][0x0]['Instances'][0x0]);}else{f(c['_errors']['ec2_not_found']);}}],function(d,f){if(d){console[a0b('0x170')](a0b('0x1ff'),d);b();}else{c[a0b('0x244')][a]=f[a0b('0x96')];b({'instance_id':f[a0b('0x96')],'instance_type':f['InstanceType']});}});},'stopEC2':function stopEC2(a,b){var c=this;c[a0b('0x2b0')](a,function(d){if(d){c[a0b('0xf5')](d,function(f){if(f){b();}else{c[a0b('0x18e')][a0b('0x1d5')]({'InstanceIds':[d]},function(g){if(g){console[a0b('0x170')](c[a0b('0x12a')][a0b('0x1fa')],g);b(c[a0b('0x12a')][a0b('0x1fa')]);}else b();});}});}else b(c[a0b('0x12a')][a0b('0x1fa')]);});},'startEC2':function startEC2(a,b){var c=this;c[a0b('0x2b0')](a,function(d){if(d){c['isEC2RunningFromID'](d,function(f){if(f){b();}else{c[a0b('0x18e')]['startInstances']({'InstanceIds':[d]},function(g){if(g){console[a0b('0x170')](c[a0b('0x12a')][a0b('0x28f')],g);b(c[a0b('0x12a')][a0b('0x28f')]);}else b();});}});}else b(c[a0b('0x12a')][a0b('0x28f')]);});}};var awsmng=AWSMng;function Logger(){var a=arguments[a0b('0x199')]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:0x1;this[a0b('0xb3')]=a;this['__DEBUG__']=![];this[a0b('0x2a7')]=0x0;this['LOG_LEVEL_MIN']=0x1;this[a0b('0x2d2')]=0x2;this[a0b('0x139')]=0x3;this[a0b('0x8c')]=['E','M','I','D'];this[a0b('0x26a')]='\x20:';}Logger[a0b('0x1f7')]={'Constructor':Logger,'log':function log(a){var b=this;function c(d){switch(d){case b[a0b('0x2a7')]:return'E'+b[a0b('0x26a')]+new Date()[a0b('0x2d4')]()+b['separator'];case b[a0b('0x1cb')]:return'M'+b[a0b('0x26a')]+new Date()['toJSON']()+b[a0b('0x26a')];case b[a0b('0x2d2')]:return'I'+b[a0b('0x26a')]+new Date()[a0b('0x2d4')]()+b[a0b('0x26a')];case b[a0b('0x139')]:return'D'+b[a0b('0x26a')]+new Date()[a0b('0x2d4')]()+b[a0b('0x26a')];default:return'';}}if(a<=b[a0b('0xb3')]||b[a0b('0x56')]){Array[a0b('0x1f7')][a0b('0x187')][a0b('0x2ab')](arguments,0x0,0x1,c(a));console['log'][a0b('0x194')](null,Array['prototype']['slice'][a0b('0x2ab')](arguments));}},'debug':function debug(a){console[a0b('0x1cd')]('I\x20switching\x20debug\x20mode\x20'+a?'ON':a0b('0x19d'));this[a0b('0x56')]=a;}};var logger=Logger;var rdscmds={'APPEND':a0b('0x289'),'ASKING':a0b('0x1e6'),'AUTH':'r59166c85971605a74b9e','BGREWRITEAOF':a0b('0x262'),'BGSAVE':'r8fbddd3ad25e66b66d75','BITCOUNT':a0b('0x10e'),'BITFIELD':a0b('0x1e1'),'BITOP':a0b('0x201'),'BITPOS':a0b('0xa6'),'BLPOP':a0b('0x27e'),'BRPOP':a0b('0x17d'),'BRPOPLPUSH':a0b('0x211'),'BZPOPMAX':'r6c05150afc9c97508dea','BZPOPMIN':a0b('0xfe'),'CLIENT':a0b('0x2b9'),'CLUSTER':a0b('0x2cd'),'COMMAND':a0b('0x1ae'),'CONFIG':a0b('0x9'),'DBSIZE':a0b('0x65'),'DEBUG':'r792c05a3f02afc263c5a','DECR':'r5d395572d2daf94d0ee2','DECRBY':a0b('0x160'),'DEL':a0b('0x16c'),'DISCARD':a0b('0x18a'),'DUMP':a0b('0x21c'),'ECHO':a0b('0x224'),'EVAL':'r6cd6ed29c886ed30605c','EVALSHA':a0b('0x2b4'),'EXEC':a0b('0x210'),'EXISTS':a0b('0xd4'),'EXPIRE':a0b('0xb7'),'EXPIREAT':a0b('0xf1'),'FLUSHALL':'r2b778d94531380c958ef','FLUSHDB':a0b('0xaa'),'GEOADD':a0b('0x2d'),'GEODIST':a0b('0x251'),'GEOHASH':a0b('0xf8'),'GEOPOS':a0b('0x1e9'),'GEORADIUS':a0b('0x1a9'),'GEORADIUS_RO':'r81ab714c7e51fc02a633','GEORADIUSBYMEMBER':a0b('0xb'),'GEORADIUSBYMEMBER_RO':a0b('0x1ab'),'GET':a0b('0x2c5'),'GETBIT':a0b('0x14f'),'GETRANGE':a0b('0x13b'),'GETSET':a0b('0x14d'),'HDEL':a0b('0x1de'),'HEXISTS':a0b('0x31'),'HGET':a0b('0x26d'),'HGETALL':a0b('0x285'),'HINCRBY':a0b('0x2a0'),'HINCRBYFLOAT':a0b('0x1b2'),'HKEYS':'r53b4eb6eeef131884a85','HLEN':'r44515715af21b234f6e9','HMGET':a0b('0x66'),'HMSET':a0b('0xc1'),'HOST:':a0b('0x2c4'),'HSCAN':a0b('0x64'),'HSET':'raf8f5c1c0382364207d5','HSETNX':a0b('0x145'),'HSTRLEN':'r9870d5e052ce6f50f908','HVALS':a0b('0x108'),'INCR':a0b('0x20c'),'INCRBY':'rd81305f10db800bfa71f','INCRBYFLOAT':a0b('0x1ce'),'INFO':'r6a775f58d6096e8f3fee','KEYS':a0b('0x7c'),'LASTSAVE':a0b('0x159'),'LATENCY':a0b('0x99'),'LINDEX':a0b('0x35'),'LINSERT':a0b('0x2c2'),'LLEN':'r9c3618e5fb721740773c','LOLWUT':a0b('0x1a3'),'LPOP':a0b('0x2b3'),'LPUSH':a0b('0x4e'),'LPUSHX':a0b('0x32'),'LRANGE':a0b('0x5f'),'LREM':a0b('0x125'),'LSET':'r55bee04c50e70d63d98d','LTRIM':a0b('0x2c7'),'MEMORY':a0b('0x26c'),'MGET':a0b('0x2b'),'MIGRATE':a0b('0xa3'),'MODULE':a0b('0x82'),'MONITOR':a0b('0x175'),'MOVE':a0b('0x14b'),'MSET':a0b('0x1a5'),'MSETNX':'rb7a007dae35fc36db7f0','MULTI':a0b('0x4b'),'OBJECT':'r1de45da792a8697130be','PERSIST':'ra08cadce511ff197b26d','PEXPIRE':a0b('0x4'),'PEXPIREAT':a0b('0x253'),'PFADD':a0b('0x10a'),'PFCOUNT':a0b('0x1ec'),'PFDEBUG':a0b('0x12b'),'PFMERGE':a0b('0x206'),'PFSELFTEST':a0b('0x1d6'),'PING':a0b('0x1b9'),'POST':a0b('0x23a'),'PSETEX':a0b('0x29f'),'PSUBSCRIBE':a0b('0x169'),'PSYNC':a0b('0xe8'),'PTTL':'r82f51da34fd4e64cd7d2','PUBLISH':a0b('0x238'),'PUBSUB':a0b('0xad'),'PUNSUBSCRIBE':'rc1636d9b64ba1c7d299a','RANDOMKEY':'r12a38cb3bcb8143e656b','READONLY':a0b('0x26'),'READWRITE':a0b('0xae'),'RENAME':a0b('0x116'),'RENAMENX':a0b('0x26b'),'REPLCONF':a0b('0xfc'),'REPLICAOF':a0b('0x183'),'RESTORE':a0b('0x36'),'RESTORE-ASKING':a0b('0x284'),'ROLE':a0b('0x1f9'),'RPOP':'rbbdd4ae591afa6c96866','RPOPLPUSH':a0b('0x223'),'RPUSH':'r4b45792fb7e0ea8585f8','RPUSHX':a0b('0xf4'),'SADD':'r91342b9fa4eab746dc3c','SAVE':a0b('0x1ad'),'SCAN':'r569298b21c9637769832','SCARD':'r4c77e11f61d1fde79248','SCRIPT':a0b('0x21b'),'SDIFF':a0b('0x17b'),'SDIFFSTORE':a0b('0x27d'),'SELECT':a0b('0x290'),'SET':a0b('0x243'),'SETBIT':a0b('0x13a'),'SETEX':a0b('0x84'),'SETNX':a0b('0x22a'),'SETRANGE':a0b('0x1f'),'SHUTDOWN':a0b('0x1a1'),'SINTER':a0b('0x20'),'SINTERSTORE':a0b('0x122'),'SISMEMBER':a0b('0x29a'),'SLAVEOF':a0b('0x2c0'),'SLOWLOG':a0b('0xcf'),'SMEMBERS':a0b('0x58'),'SMOVE':a0b('0x2b6'),'SORT':a0b('0xd3'),'SPOP':a0b('0x168'),'SRANDMEMBER':'r4834b22bf2e167eec413','SREM':a0b('0x17'),'SSCAN':a0b('0x127'),'STRLEN':'r3731b868ab6a189fad20','SUBSCRIBE':a0b('0x2b1'),'SUBSTR':a0b('0x37'),'SUNION':'r7d72640cccaa75eaf713','SUNIONSTORE':a0b('0xdf'),'SWAPDB':a0b('0x102'),'SYNC':a0b('0x294'),'TIME':a0b('0x1b0'),'TOUCH':a0b('0x29'),'TTL':'r083b2fc6cba07dbf4688','TYPE':a0b('0x81'),'UNLINK':a0b('0xf9'),'UNSUBSCRIBE':a0b('0x38'),'UNWATCH':'r27ba8feb2c4c546a4152','WAIT':a0b('0x202'),'WATCH':a0b('0x141'),'XACK':a0b('0x12e'),'XADD':'r23bee686be5fda753179','XCLAIM':a0b('0xde'),'XDEL':a0b('0xdc'),'XGROUP':'r4fb8652508296ac45931','XINFO':'r5edea82e53e6ce3cb66d','XLEN':a0b('0x247'),'XPENDING':a0b('0x1a2'),'XRANGE':a0b('0x197'),'XREAD':a0b('0xe3'),'XREADGROUP':a0b('0xa'),'XREVRANGE':'r6bb54153c3cd0e34ef79','XSETID':a0b('0x2a4'),'XTRIM':'ra63c6d1f016107b0abcf','ZADD':a0b('0x1b4'),'ZCARD':a0b('0x11c'),'ZCOUNT':'rf9db5f6d644bd379ea77','ZINCRBY':a0b('0x2a8'),'ZINTERSTORE':'r9f9daf2c0f512192f12e','ZLEXCOUNT':'r335ac0fada359dc2a168','ZPOPMAX':a0b('0x22b'),'ZPOPMIN':'r4ff46d82c7ee5abddf08','ZRANGE':a0b('0x286'),'ZRANGEBYLEX':a0b('0x1dc'),'ZRANGEBYSCORE':a0b('0x28d'),'ZRANK':a0b('0x15b'),'ZREM':'raa23ccab68c12c7d94ed','ZREMRANGEBYLEX':a0b('0xd0'),'ZREMRANGEBYRANK':'r9092c8b2288a642d30a8','ZREMRANGEBYSCORE':a0b('0x24b'),'ZREVRANGE':'r46a607ebca2880de70b9','ZREVRANGEBYLEX':'rfc2f355901f83dbc6f32','ZREVRANGEBYSCORE':'re3911909956e43ffcbb7','ZREVRANK':a0b('0x27a'),'ZSCAN':a0b('0x1d0'),'ZSCORE':a0b('0x128'),'ZUNIONSTORE':a0b('0x85')};function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError(a0b('0xff'));}function _unsupportedIterableToArray(a,b){if(!a)return;if(typeof a===a0b('0x282'))return _arrayLikeToArray(a,b);var c=Object[a0b('0x1f7')]['toString']['call'](a)[a0b('0x2bb')](0x8,-0x1);if(c===a0b('0xac')&&a[a0b('0x216')])c=a['constructor']['name'];if(c==='Map'||c===a0b('0xc9'))return Array[a0b('0x1')](a);if(c===a0b('0x11f')||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/[a0b('0x1d9')](c))return _arrayLikeToArray(a,b);}function _iterableToArray(a){if(typeof Symbol!=='undefined'&&Symbol[a0b('0x88')]in Object(a))return Array[a0b('0x1')](a);}function _arrayWithoutHoles(a){if(Array[a0b('0x1aa')](a))return _arrayLikeToArray(a);}function _arrayLikeToArray(a,b){if(b==null||b>a[a0b('0x199')])b=a['length'];for(var c=0x0,d=new Array(b);c<b;c++){d[c]=a[c];}return d;}var sapcontrol_operations$1=sapctrl_helpers[a0b('0x28a')],sapctrl_process_func$1=sapctrl_helpers['sapctrl_process_func'];function ScaleDoer(){this[a0b('0x68')]=null;this[a0b('0x274')]={};this[a0b('0x17e')]='';this[a0b('0x3b')]='';this[a0b('0xe')]=0x1;this[a0b('0x2d1')]={};this[a0b('0xf0')]={};this['conn_retries_max']=0x3;this['conn_retries_delay_msec']=0x9c40;this[a0b('0x19f')]={};this['min_instance_running']=0x1;this[a0b('0x1fc')]=0xa;this[a0b('0x5b')]='_';this[a0b('0x48')]=a0b('0x13c')+this[a0b('0x5b')];this[a0b('0x129')]={'green':a0b('0x191'),'yellow':a0b('0x2cb'),'red':'SAPControl-RED','gray':a0b('0xc2')};this['_errors']={'soap_client_init':'SOAP\x20client\x20could\x20not\x20be\x20created','soap_client_getinstance':a0b('0x43'),'conn_failed':a0b('0x190'),'ws_not_reachable':'SAP\x20control\x20WS\x20not\x20reachable','no_system_conn':a0b('0x231'),'no_active_instance':a0b('0x104'),'stop_ongoing':a0b('0xa0'),'start_ongoing':'Start\x20eligible\x20system\x20instance\x20already\x20ongoing','no_start_candidate':a0b('0x10c'),'min_instances_reached':'Minimal\x20running\x20instances\x20reached','max_instances_reached':a0b('0x7d')};this['_resume_on_step']={'stop':{'begin':0x1,'counter_updated':0x2,'sap_stop_triggered':0x3,'ec2_stop_triggered':0x4},'start':{'begin':0x1,'counter_updated':0x2,'ec2_start_triggered':0x3,'sap_start_triggered':0x4}};this['certif_dir']=__dirname+a0b('0x176');this[a0b('0x215')]=new awsmng();this[a0b('0x24c')]=null;this[a0b('0x221')]=null;this[a0b('0x41')]=null;this['logger']=new logger();this['logger'][a0b('0x1c6')](!![]);}ScaleDoer[a0b('0x1f7')]={'Constructor':ScaleDoer,'init':function init(a,b){var c=this;c[a0b('0x17e')]=a[a0b('0x17e')];c[a0b('0x28c')]=a[a0b('0x28c')];c[a0b('0x138')]=a[a0b('0x138')];c[a0b('0x217')]=a['staging']||'production';c[a0b('0x274')]={'collect_exec':'COLLECT'+'_'+c['staging']+'_'+c['agent'],'checkconn_exec':a0b('0x28e')+'_'+c['agent'],'discover_exec':a0b('0x2aa')+'_'+c[a0b('0x28c')],'webhook_exec':'DO'+'_'+c[a0b('0x28c')]};c[a0b('0x41')]=a[a0b('0x1f5')][a0b('0x268')];c['concurrency_nb']=a[a0b('0xce')];c[a0b('0x1cc')]=a['db'];c[a0b('0x17c')][a0b('0x1cd')](c['logger'][a0b('0x2d2')],a0b('0x1e5'));c[a0b('0x17c')][a0b('0x1cd')](c[a0b('0x17c')][a0b('0x139')],a0b('0x9d')+c[a0b('0x17e')]+a0b('0xef')+c[a0b('0x138')]+a0b('0x124')+c[a0b('0x217')]);async[a0b('0x171')]([function(d){c[a0b('0x1c5')]['call'](c,d);},function(d){c[a0b('0x24c')]=redis[a0b('0xc4')](Object[a0b('0xb5')](c[a0b('0x1cc')],{'prefix':'q','db':0x2,'password':decrypt(c[a0b('0x1cc')][a0b('0x5e')],c[a0b('0x17e')]+c[a0b('0x41')][a0b('0x13d')](':','')),'rename_commands':rdscmds}));c['redis_cli']['on'](a0b('0x170'),function(f){c[a0b('0x17c')][a0b('0x1cd')](c[a0b('0x17c')][a0b('0x2a7')],a0b('0x34')+f[a0b('0x299')]+a0b('0x147')+f['command']+'\x20-\x20'+f['origin']);});c[a0b('0x68')]=kue['createQueue']({'prefix':'q','redis':Object[a0b('0xb5')](c[a0b('0x1cc')],{'auth':decrypt(c['redis_conf']['key'],c[a0b('0x17e')]+c[a0b('0x41')]['replace'](':','')),'db':a[a0b('0x16')],'options':{'rename_commands':rdscmds}})});c['queue']['watchStuckJobs']();c[a0b('0x68')][a0b('0x272')](c[a0b('0xe')]*0x2);c[a0b('0x68')]['on'](a0b('0x170'),function(f){c[a0b('0x17c')][a0b('0x1cd')](c[a0b('0x17c')][a0b('0x2a7')],a0b('0x8d')+f['code']+'\x20-\x20'+f[a0b('0x151')]+a0b('0x147')+f['origin']);});d();},function(d){c[a0b('0x221')]=new pushcli(a[a0b('0x1f5')][a0b('0x13')]+a0b('0xbe')+(a['gateway']['credentials']?a[a0b('0x1f5')]['credentials']+'@':'')+a[a0b('0x1f5')][a0b('0x77')]+':'+a[a0b('0x1f5')][a0b('0x131')]+a0b('0x281'),c[a0b('0x138')],c[a0b('0x217')]);d();},function(d){if(!fs$1[a0b('0x1b6')](c[a0b('0x24e')])){fs$1[a0b('0x19c')](c[a0b('0x24e')]);}d();}],function(){c['logger'][a0b('0x1cd')](c[a0b('0x17c')]['LOG_LEVEL_INFO'],'ScaleDoer\x20init\x20completed\x20with\x20queues:',c[a0b('0x274')]);b[a0b('0x2ab')](c);});},'connect_sap':function connect_sap(a,b,c){var d=this;process['env'][a0b('0x133')]='0';d[a0b('0x17c')]['log'](d[a0b('0x17c')][a0b('0x139')],'[PENDING]\x20{'+a[a0b('0x136')][a0b('0x119')]+a0b('0x12'));async['waterfall']([function(f){d['update_sending_ssl'](a[a0b('0x136')]['syst_id'],a[a0b('0xb1')],f);},function(f){var g=a[a0b('0x136')]['is_encrypted']?{'protocol':a0b('0x271'),'port_suffix':'14'}:{'protocol':a0b('0x278'),'port_suffix':'13'};var h=g['protocol']+a0b('0xbe')+(a[a0b('0x136')][a0b('0x3a')]||a[a0b('0x136')][a0b('0x5c')])+':5'+a[a0b('0x136')]['sn']+g[a0b('0x1c4')]+'/';d[a0b('0x17c')][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x139')],a0b('0xf3'),h);d[a0b('0x221')][a0b('0x4f')](a[a0b('0x136')]['syst_id']);d[a0b('0x1e2')](h,{'method':a['system'][a0b('0x87')],'options':[{'user':a[a0b('0x136')][a0b('0x10d')],'pwd':a['system']['password']},{'pfx':a[a0b('0x136')][a0b('0x87')]==0x1&&d[a0b('0x24e')]+'/'+a[a0b('0x136')][a0b('0x119')]+a0b('0x212')}]},a,f);},function(f,g){f['soapcli'][a0b('0x179')]({},function(h,i){if(!h&&i&&i[a0b('0x105')]&&i['instance'][a0b('0x25e')]){var j=i['instance'][a0b('0x25e')]['map'](function(l){var m=(''+l['instanceNr'])[a0b('0xea')](0x2,'0');var n=a[a0b('0x136')][a0b('0x16f')][a0b('0x29c')](function(o){return o[a0b('0xf')]==m;});return{'ip_internal':n&&n['ip_internal'],'hostname':l[a0b('0x5c')],'instancenr':m,'features':l[a0b('0x1e0')][a0b('0x255')]('|'),'status':l[a0b('0x276')]==d[a0b('0x129')][a0b('0x2b5')]?0x1:l[a0b('0x276')]==d[a0b('0x129')][a0b('0x118')]?-0x1:0x0};});var k=d[a0b('0x20b')](i[a0b('0x105')]['item']);if(k==d[a0b('0x129')][a0b('0x78')]||k==d[a0b('0x129')][a0b('0x269')]){g(d[a0b('0x12a')]['conn_failed'],f['soapcli']);}else{d[a0b('0x221')][a0b('0x2d0')]('up',a[a0b('0x12d')],a['system'][a0b('0x119')],d[a0b('0x3b')],a['system']['sid'],0x1);d[a0b('0xf0')][a[a0b('0x136')][a0b('0x119')]]=0x0;g(null,j,a[a0b('0x136')]['auth_method'],a[a0b('0x136')]['username'],a[a0b('0x136')][a0b('0x21e')],a[a0b('0x136')][a0b('0x87')]==0x1?d[a0b('0x24e')]+'/'+a[a0b('0x136')][a0b('0x119')]+'.pfx':null,{'is_encrypted':a[a0b('0x136')][a0b('0xc')],'is_direct':a[a0b('0x136')][a0b('0x19e')]},a);}}else{g(d[a0b('0x12a')][a0b('0xc5')],h&&h[a0b('0x25')]+'\x20'+h['port']);}});},function(f,g,h,i,j,k,l,m){d[a0b('0x17c')][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x139')],'{'+a[a0b('0x136')][a0b('0x119')]+'}\x20instances:'+f['map'](function(o){return o[a0b('0x3a')]+'|'+o[a0b('0x5c')]+'/'+o[a0b('0xf')]+'/'+o[a0b('0x1fd')];})['join'](',\x20'));var n=[];if(!f||f[a0b('0x0')](function(o){return o[a0b('0x1fd')]==0x1&&o[a0b('0x1e0')][a0b('0x189')](a0b('0x236'))<0x0&&o[a0b('0x1e0')][a0b('0x189')]('ENQUE')<0x0;})[a0b('0x199')]==0x0){d[a0b('0x221')][a0b('0x39')]('scale',l[a0b('0x136')]['syst_id']);m(d[a0b('0x12a')]['no_active_instance']);}else{async[a0b('0xc3')](f['filter'](function(o){return o[a0b('0x1fd')]==0x1&&o[a0b('0x1e0')][a0b('0x189')](a0b('0x236'))<0x0&&o[a0b('0x1e0')]['indexOf']('ENQUE')<0x0;}),function(o,p,q){var r=k[a0b('0xc')]?{'protocol':'https','port_suffix':'14'}:{'protocol':a0b('0x278'),'port_suffix':'13'};var s=r['protocol']+a0b('0xbe')+(o['ip_internal']||o['hostname'])+':5'+o[a0b('0xf')]+r[a0b('0x1c4')]+'/';d['new_soap_client'](s,{'method':g,'options':[{'user':h,'pwd':i},{'pfx':j}]},null,function(t,u){if(t){d[a0b('0x17c')][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x2a7')],'{'+a['system'][a0b('0x119')]+'}\x20error\x20connecting\x20to\x20instance:\x20'+o[a0b('0x5c')]+'/'+o[a0b('0xf')]+':',t);f[p][a0b('0x1fd')]=-0x1;f[p]=Object[a0b('0xb5')](f[p],{'error':t,'occur_date':new Date()});q();}else{var v=a[a0b('0x136')][a0b('0x16f')]['find'](function(w){return w[a0b('0xf')]==o['instancenr'];});n[a0b('0x11e')]({'c':u['soapcli'],'f':o['features'],'n':o[a0b('0xf')],'h':o['hostname'],'i':v&&v&&v[a0b('0x3a')]});q();}});},function(){a['system']['instances']['forEach'](function(o,p){f[a0b('0x27c')](function(q){if(o&&o[a0b('0xf')]==q[a0b('0xf')]){a[a0b('0x136')]['instances'][p]=Object[a0b('0xb5')](o,q);if(q[a0b('0x170')]==undefined&&q[a0b('0x1fd')]!=-0x1){delete a[a0b('0x136')][a0b('0x16f')][p]['error'];}}if(a[a0b('0x136')][a0b('0x16f')][a0b('0xbf')](function(r){return r&&r['instancenr'];})['indexOf'](q[a0b('0xf')])<0x0){a[a0b('0x136')]['instances']['push'](q);}if(o&&f[a0b('0xbf')](function(r){return r['instancenr'];})[a0b('0x189')](o[a0b('0xf')])<0x0){a['system']['instances'][p][a0b('0x1fd')]=0x0;delete a[a0b('0x136')]['instances'][p]['error'];}});});d[a0b('0x221')]['pushUpSAPInstance']('up',a[a0b('0x12d')],a['system'][a0b('0x119')],d[a0b('0x3b')],a['system'][a0b('0xcb')],a[a0b('0x136')][a0b('0x16f')]);async['each'](n,function(o,p){b(o,f,p);},function(o){if(o){d[a0b('0x17c')][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x2a7')],'{'+a[a0b('0x136')]['syst_id']+a0b('0x9e'),o);}d[a0b('0x221')][a0b('0x39')](a0b('0x239'),a['system'][a0b('0x119')]);m(o,f);});});}}],function(f,g){if(f){switch(f){case d[a0b('0x12a')][a0b('0x80')]:d['logger'][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+a['system']['syst_id']+'}:',d[a0b('0x12a')]['conn_failed']);d[a0b('0xbd')](g,a);break;case d['_errors']['no_system_conn']:d[a0b('0x17c')][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+a['system'][a0b('0x119')]+'}:',d[a0b('0x12a')][a0b('0x9f')]);break;case d[a0b('0x12a')]['no_active_instance']:d[a0b('0x17c')]['log'](d[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x209')+a['system'][a0b('0x119')]+'}:',d[a0b('0x12a')][a0b('0x1bb')],g);d['deletePrometheus'](a0b('0x239'),a[a0b('0x12d')],a[a0b('0x136')][a0b('0x119')],a['system'][a0b('0xcb')],a[a0b('0x136')]['instances'][a0b('0xbf')](function(h){return{'instancenr':h[a0b('0xf')],'status':0x0};}));break;case d[a0b('0x12a')]['ws_not_reachable']:d[a0b('0x17c')][a0b('0x1cd')](d[a0b('0x17c')][a0b('0x2a7')],'[FAILED]\x20{'+a[a0b('0x136')][a0b('0x119')]+'}:',d['_errors'][a0b('0xc5')],g);break;default:if(f['errno']=='ETIMEDOUT'){if(g===!![]){d[a0b('0xc8')](a0b('0x239'),a[a0b('0x12d')],a['system'][a0b('0x119')],a['system'][a0b('0xcb')],a['system'][a0b('0x16f')][a0b('0xbf')](function(h){return{'instancenr':h['instancenr'],'status':0x0};}));}}else{d[a0b('0x17c')]['log'](d[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+a[a0b('0x136')]['syst_id']+'}:',f,g);}break;}c(f[a0b('0x299')]||f[a0b('0x1d1')]||f);}else{c(null,{'sending_sslcertifs':d[a0b('0x2d1')][a[a0b('0x136')][a0b('0x119')]],'instances':g,'syst_id':a['system'][a0b('0x119')]});}});},'collect':function collect(){var a=this;a['queue'][a0b('0x25f')](a[a0b('0x274')][a0b('0x1ed')],a[a0b('0xe')],function(b,c){if(b[a0b('0x61')][a0b('0x219')]&&b[a0b('0x61')][a0b('0x136')]){a['update_sending_ssl'](b[a0b('0x61')]['system'][a0b('0x119')],b[a0b('0x61')][a0b('0xb1')],function(d){if(d){c(a0b('0x250'));}else{a[a0b('0x256')](b[a0b('0x61')],function(f,g,h){if(f['f'][a0b('0x189')](b[a0b('0x61')][a0b('0x219')][a0b('0xf6')])>=0x0||b[a0b('0x61')][a0b('0x219')]['type']==a0b('0x292')){a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x139')],a0b('0x208')+b[a0b('0x61')][a0b('0x136')][a0b('0x119')]+a0b('0x235')+b['data'][a0b('0x219')][a0b('0x225')]+a0b('0x18'));sapcontrol_operations$1[b[a0b('0x61')][a0b('0x219')]['name']]['call'](f['c'],{},function(i,j){if(i){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+b['data']['system'][a0b('0x119')]+a0b('0x235')+b[a0b('0x61')][a0b('0x219')][a0b('0x225')]+':\x20exec\x20error:'+i[a0b('0x214')]?i[a0b('0x214')][a0b('0x111')](/<faultstring>(.*?)<\/faultstring>/)[0x1]:i);}sapctrl_process_func$1[a0b('0x2ab')](a,i,j,b[a0b('0x61')][a0b('0x219')][a0b('0x225')],{'_id':b['data'][a0b('0x136')][a0b('0x119')],'sid':b[a0b('0x61')][a0b('0x136')]['sid']},{'ip_internal':f['i'],'hostname':f['h'],'sn':f['n'],'features':f['f']['join']('|')},b[a0b('0x61')][a0b('0x219')][a0b('0xf6')],b['data'][a0b('0x12d')],b[a0b('0x61')]['restricted_kpis'],b['data'][a0b('0x1cf')],h);});}else h();},c);}});}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+b[a0b('0x61')]['system']['syst_id']+a0b('0x12f'));c();}});},'sync':function sync(){var a=this;var b=0x2;function c(d,f,g,h,i){if(f<=0x0){i(a0b('0x1c2'));}else{if(g['length']==0x0){a[a0b('0x215')][a0b('0x20a')](d,function(k,l){if(l&&l['length']>0x0){c(d,f-0x1,l,h,i);}else i(a0b('0x1c2'));});}else{var j=[];g[a0b('0x27c')](function(k){if(k[a0b('0x8e')]){h[a0b('0x27c')](function(l){j[a0b('0x11e')]({'ip':k[a0b('0x3a')],'nr':l[a0b('0xf')],'hostname':l['hostname'],'cloud_instance_id':k[a0b('0x2a9')],'cloud_instance_type':k[a0b('0x112')],'cloud_instance_is_sap_or_down':k['is_sap_or_down'],'status':![]});});}});a[a0b('0x17c')]['log'](a['logger'][a0b('0x139')],'Possible\x20combinations\x20of\x20IP\x20nr:',j);async[a0b('0xc3')](j,function(k,l,m){a[a0b('0x1e3')](k['ip'],k['nr'],k[a0b('0x5c')],function(n){j[l][a0b('0x1fd')]=n;j[l]['cloud_instance_is_sap_or_down']=n;m();});},function(k){if(k){a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x2a7')],a0b('0x110'),k);}a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],'Valid\x20SAP\x20IP\x20NR\x20:',j['filter'](function(m){return m[a0b('0x1fd')];}));var l=h[a0b('0xbf')](function(m){var n=j[a0b('0x29c')](function(o){return o[a0b('0x1fd')]&&o[a0b('0x5c')]==m[a0b('0x5c')]&&o['nr']==m[a0b('0xf')];});if(n){return Object[a0b('0xb5')](m,{'ip_internal':n['ip'],'cloud_instance_id':n[a0b('0x2ce')],'cloud_instance_type':n[a0b('0x2b8')]});}})[a0b('0x0')](function(m){return m[a0b('0x3a')];});if(l[a0b('0x199')]==0x0||l['length']<h[a0b('0x199')]){a[a0b('0x215')][a0b('0x20a')](d,function(m,n){if(!n||n[a0b('0x199')]==0x0){i(a0b('0x1c2'));}else{var o=n[a0b('0x0')](function(p){return!g[a0b('0x11d')](p[a0b('0x3a')]);});if(o[a0b('0x199')]>0x0){c(d,f-0x1,o,h,i);}else i(a0b('0x1c2'));}});}else{if(f==b){i(null,{'instances':l});}else{i(null,{'instances':l,'new_ec2':g});}}});}}}a[a0b('0x68')][a0b('0x25f')](a[a0b('0x274')][a0b('0x26f')],a[a0b('0xe')],function(d,f){if(d['data']['ip']!=undefined&&d[a0b('0x61')]['nr']!=undefined&&d['data'][a0b('0x5c')]!=undefined&&d[a0b('0x61')][a0b('0x207')]!=undefined){process['env'][a0b('0x133')]='0';a[a0b('0x1e8')](d[a0b('0x61')]['ip'],d[a0b('0x61')]['nr'],function(g,h){if(g){f(g);}else{try{var i=fs$1[a0b('0x222')](__dirname+'/.aws_vpc')[a0b('0x10')]();a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_DEBUG'],a0b('0x205'),i,d[a0b('0x61')][a0b('0x207')],h);c(i,b,d[a0b('0x61')][a0b('0x207')],h,f);}catch(j){a['logger'][a0b('0x1cd')](a['logger']['LOG_LEVEL_ERROR'],'Exception\x20Unexcepted\x20error:',j);f(a0b('0x254'));}}});}else{f();}});a[a0b('0x68')][a0b('0x25f')](a[a0b('0x274')][a0b('0x62')],a[a0b('0xe')],function(d,f){if(d[a0b('0x61')]['type']!=undefined&&d[a0b('0x61')]['system']){a['logger']['log'](a[a0b('0x17c')][a0b('0x139')],a0b('0x208')+d[a0b('0x61')][a0b('0x136')][a0b('0x119')]+a0b('0x1d8'));switch(d[a0b('0x61')][a0b('0xf6')]){case 0x0:a[a0b('0x5d')](d['data'][a0b('0x136')][a0b('0x119')],d['data'][a0b('0xb1')],function(g){if(g){f(a0b('0x250'));}else{var h=0x2710;a[a0b('0x256')](d[a0b('0x61')],function(i,j,k){var l=j[a0b('0xcd')](function(m){return m[a0b('0xf')]==i['n'];});async[a0b('0x171')]({'check':function m(n){i['c']['AccessCheck']({'function':a0b('0x1a8')},function(o){if(o){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x1e7')+i['h']+'/'+i['i']+'/'+i['n']);j[l][a0b('0x1fd')]=-0x1;j[l]=Object['assign'](j[l],{'error':o[a0b('0x214')]?o[a0b('0x214')]['match'](/<faultstring>(.*?)<\/faultstring>/)[0x1]:o,'occur_date':new Date()});}n();},{'timeout':h});},'ip':function n(o){async[a0b('0x237')]([function(p){i['c'][a0b('0x196')]({},function(q,r){if(!q&&r&&r['tree']){var s=r[a0b('0x19b')][a0b('0x25e')][a0b('0x0')](function(t){return r['tree'][a0b('0x25e')][t['parent']]&&r[a0b('0x19b')]['item'][t[a0b('0x218')]][a0b('0x225')][a0b('0x60')]()=='Server\x20Configuration'&&t[a0b('0x225')]['trim']()==a0b('0x2ae');});if(s&&s[0x0]&&s[0x0][a0b('0x15e')]){j[l][a0b('0x3a')]=s[0x0][a0b('0x15e')];p(null,s[0x0][a0b('0x15e')]);}}else p(a0b('0x2af')+q);});},function(p,q){a[a0b('0x215')][a0b('0x103')](p,function(r){return q(null,r);});},function(p,q){j[l]['cloud_instance_id']=p[a0b('0x2a9')];j[l][a0b('0x2b8')]=p[a0b('0x112')];q();}],function(p){if(p){a[a0b('0x17c')]['log'](a[a0b('0x17c')][a0b('0x2a7')],'checkconn_exec\x20error\x20getting\x20SAP\x20instance\x20details\x20(IP,\x20cloud\x20instance\x20ID\x20and\x20type):'+i['h']+'/'+i['i']+'/'+i['n']+':',p);}o();});}},function(){k();});},f);}});break;case 0x1:f();break;default:f();break;}}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x209')+d['data'][a0b('0x136')][a0b('0x119')]+a0b('0x4c'));f();}});},'scale':function scale(){var a=this;var b=0x0;var c=0x1;var d=0x2;var f=0x3;var g=0x4;var h=0x5;var i=0x6;var j=0x7;var k=0x8;var l=[];l[b]='Start\x20EC2\x20server\x20operation\x20timeout';l[c]=a0b('0x50');l[d]=a0b('0x1e');l[f]=a0b('0x20d');l[g]=a0b('0x203');l[h]=a0b('0x16e');l[i]=a0b('0x273');l[j]='Stop\x20SAP\x20instance\x20operation\x20failed';l[k]='Stop\x20SAP\x20instance\x20operation\x20timeout';function m(v,w,x,y,z){if(w>0x0){setTimeout(function(){v[a0b('0x179')]({},function(A,B){if(!A){var C=B['instance'][a0b('0x25e')]&&B[a0b('0x105')][a0b('0x25e')][a0b('0x0')](function(D){return D[a0b('0xfd')]==y;});if(C&&C[0x0]&&C[0x0][a0b('0x276')]=='SAPControl-GRAY'){z();}else{m(v,w-0x1,x,y,z);}}else{m(v,w-0x1,x,y,z);}});},x);}else z(k);}function n(v,w,x,y,z){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],a0b('0x153'),w,x,y);if(w>0x0){setTimeout(function(){v[a0b('0x179')]({},function(A,B){if(!A){var C=B['instance'][a0b('0x25e')]&&B[a0b('0x105')][a0b('0x25e')]['filter'](function(D){return(''+D[a0b('0xfd')])[a0b('0xea')](0x2,'0')==y+'';});if(C&&C[0x0]&&C[0x0][a0b('0x276')]==a[a0b('0x129')]['green']){z();}else{n(v,w-0x1,x,y,z);}}else{n(v,w-0x1,x,y,z);}});},x);}else z(i);}function o(v,w,x,y,z){a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x139')],a0b('0x184'),w,x,y);if(w>0x0){setTimeout(function(){v[a0b('0x1ca')](y,function(A){if(A!=undefined&&A!=null){if(A){z();}else o(v,w-0x1,x,y,z);}else z(c);});},x);}else z(b);}function p(v,w,x,y,z){if(w>0x0){setTimeout(function(){v[a0b('0x180')](y,function(A){if(A!=undefined&&A!=null){if(A){z();}else p(v,w-0x1,x,y,z);}else z(g);});},x);}else z(f);}function q(v,w,x,y){var z=arguments[a0b('0x199')]>0x4&&arguments[0x4]!==undefined?arguments[0x4]:0x1;if(z>0x0){a[a0b('0x19f')][w[a0b('0x119')]][y]['status']=0x3;sapcontrol_operations$1[a0b('0x18b')]['call'](v,{},function(A){if(A!==undefined&&A!==null){if(A[a0b('0x214')]){var B=A[a0b('0x214')][a0b('0x111')](/<faultstring>(.*?)<\/faultstring>/)&&A[a0b('0x214')][a0b('0x111')](/<faultstring>(.*?)<\/faultstring>/)[0x1];if(B==a0b('0x2cf')){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x1cb')],a0b('0x9c')+w[a0b('0x119')]+'}\x20(restart-'+z+a0b('0xd7')+w[a0b('0x119')]+'/'+x[a0b('0x5c')]+'/'+x[a0b('0x3a')]+'/'+x[a0b('0xf')]);a[a0b('0x19f')][w[a0b('0x119')]][y][a0b('0x1fd')]=0x1;a[a0b('0x277')](w[a0b('0x119')],y,-0x1);}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+w[a0b('0x119')]+a0b('0x1a0')+z+')\x20sap\x20instance\x20error:'+B);a[a0b('0x19f')][w[a0b('0x119')]][y]['status']=-0x1;a['updated_system_instances'][w['syst_id']][y][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[h]+':'+B};q(v,w,x,y,z-0x1);}}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+w['syst_id']+a0b('0x1a0')+z+')\x20sap\x20instance\x20error:',A);a[a0b('0x19f')][w[a0b('0x119')]][y][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][w[a0b('0x119')]][y][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[h]};q(v,w,x,y,z-0x1);}}else{var C=0x14;var D=0x12c;var E=Math[a0b('0x1bf')](D/C);a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x139')],a0b('0x208')+w[a0b('0x119')]+'}\x20(restart\x20-'+z+')\x20waiting\x20for\x20SAP\x20instance\x20to\x20actually\x20start\x20within\x20timeout\x20'+D+a0b('0x8b')+x[a0b('0x5c')]+'/'+x[a0b('0x3a')]+'/'+x[a0b('0xf')]);n(v,E,C*0x3e8,x[a0b('0xf')],function(F){if(F){a[a0b('0x19f')][w['syst_id']][y][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][w['syst_id']][y]['error']={'occur_date':Date[a0b('0x1f8')](),'msg':l[i]};a[a0b('0x17c')][a0b('0x1cd')](a['logger']['LOG_LEVEL_MIN'],a0b('0x9c')+w[a0b('0x119')]+a0b('0x1fb')+z+')\x20partially\x20started\x20(EC2:OK,\x20SAP:NOK):\x20'+w[a0b('0x119')]+'/'+x[a0b('0x5c')]+'/'+x[a0b('0x3a')]+'/'+x[a0b('0xf')]+a0b('0x2bf'),l[i]);q(v,w,x,y,z-0x1);}else{a[a0b('0x19f')][w[a0b('0x119')]][y]['status']=0x1;delete a[a0b('0x19f')][w['syst_id']][y][a0b('0x170')];a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x1cb')],'[COMPLETED]\x20{'+w[a0b('0x119')]+a0b('0x1fb')+z+a0b('0x109')+w[a0b('0x119')]+'/'+x[a0b('0x5c')]+'/'+x[a0b('0x3a')]+'/'+x[a0b('0xf')]);a[a0b('0x277')](w['syst_id'],y,-0x1);}});}});}else{a[a0b('0x17c')]['log'](a[a0b('0x17c')][a0b('0x1cb')],'[COMPLETED]\x20{'+w[a0b('0x119')]+a0b('0x1fb')+z+a0b('0x240')+w[a0b('0x119')]+'/'+x[a0b('0x5c')]+'/'+x[a0b('0x3a')]+'/'+x[a0b('0xf')]);a[a0b('0x19f')][w['syst_id']][y][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][w[a0b('0x119')]][y][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[i]};a[a0b('0x277')](w[a0b('0x119')],y,-0x1);}}function r(v,w){var x=arguments['length']>0x2&&arguments[0x2]!==undefined?arguments[0x2]:![];var y=arguments['length']>0x3&&arguments[0x3]!==undefined?arguments[0x3]:-0x1;process['env'][a0b('0x133')]='0';var z=v[a0b('0x3c')];var A=v[a0b('0x136')];var B=z[a0b('0xf7')][a0b('0x105')];var C=z['labels']['entity_id'];var D=A[a0b('0x16f')]['find'](function(F){return F[a0b('0xf')]==z[a0b('0xf7')]['sn'];});var E=x?'<-':'';if(a[a0b('0x19f')][B]==undefined||a[a0b('0x19f')][B][a0b('0x199')]==0x0){a[a0b('0x19f')][B]=_toConsumableArray(A['instances']);}if(A&&D){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+A[a0b('0x119')]+a0b('0x2c1')+E+a0b('0x26e')+D[a0b('0x5c')]+'/'+D['instancenr']+'/'+D[a0b('0x1fd')]+a0b('0x283')+z[a0b('0xf7')][a0b('0x264')]+'\x20'+z['labels']['sn']+a0b('0x147')+z[a0b('0xf7')][a0b('0x3a')]+'\x20'+z['labels'][a0b('0x5c')]);async[a0b('0x237')]([function(F){a[a0b('0x5d')](v['system'][a0b('0x119')],v[a0b('0xb1')],F);},function(F){var G={'protocol':'https','port_suffix':'14'};var H=G[a0b('0x45')]+'://'+(D[a0b('0x3a')]||D[a0b('0x5c')])+':5'+D[a0b('0xf')]+G[a0b('0x1c4')]+'/';a[a0b('0x221')]['addInstance'](v[a0b('0x136')][a0b('0x119')]);a['new_soap_client'](H,{'method':0x1,'options':[{},{'pfx':a[a0b('0x24e')]+'/'+v[a0b('0x136')][a0b('0x119')]+a0b('0x212')}]},v,F);},function(F,G){if(!F||!F[a0b('0x167')]){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x208')+A[a0b('0x119')]+'}\x20(stop'+E+')\x20no\x20soap\x20client\x20created\x20for\x20system\x20instance\x20'+B);async_cb(a[a0b('0x12a')][a0b('0xe0')]);}else{F['soapcli'][a0b('0x179')]({},function(H,I){if(!H&&I&&I[a0b('0x105')]&&I[a0b('0x105')]['item']){var J=a[a0b('0x20b')](I[a0b('0x105')][a0b('0x25e')]);if(J==a[a0b('0x129')][a0b('0x78')]||J==a['_sap_statuses']['gray']){G(a[a0b('0x12a')]['conn_failed'],F[a0b('0x167')]);}else{a[a0b('0x221')]['pushUpInstance']('up',C,v[a0b('0x136')][a0b('0x119')],a[a0b('0x3b')],v[a0b('0x136')][a0b('0xcb')],0x1);a[a0b('0xf0')][v[a0b('0x136')][a0b('0x119')]]=0x0;var K={};var L=I['instance'][a0b('0x25e')][a0b('0xbf')](function(M){return{'hostname':M['hostname'],'instancenr':(''+M[a0b('0xfd')])[a0b('0xea')](0x2,'0'),'features':M[a0b('0x1e0')]['split']('|'),'status':M[a0b('0x276')]==a[a0b('0x129')]['green']?0x1:M[a0b('0x276')]==a['_sap_statuses'][a0b('0x118')]?-0x1:0x0};});a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],a0b('0x208')+A['syst_id']+a0b('0x2c1')+E+a0b('0x18d')+L['map'](function(M){return M[a0b('0x5c')]+'/'+M[a0b('0xf')]+'/'+M[a0b('0x1fd')];})[a0b('0x1a7')](',\x20'));L['filter'](function(M){return M[a0b('0x1fd')]==0x1;})['forEach'](function(M){K[M['instancenr']]=M[a0b('0x1e0')][a0b('0x1a7')]('/');});if(Object[a0b('0x227')](K)['filter'](function(M){return M==K[z['labels']['sn']];})[a0b('0x199')]>a[a0b('0xc0')]||x&&y>=a[a0b('0xc6')][a0b('0x1ac')][a0b('0x42')]){F[a0b('0x249')]=Object[a0b('0xb5')](F[a0b('0x249')],{'instances':L});G(null,F);}else{G(a[a0b('0x12a')][a0b('0x97')]);}}}else{G(a['_errors'][a0b('0xc5')],H&&H[a0b('0x25')]+'\x20'+H[a0b('0x131')]);}});}},function(F,G){if(x||a[a0b('0x19f')][B][a0b('0x0')](function(K){return K[a0b('0x1fd')]==0x2&&K[a0b('0xf')]==z['labels']['sn'];})[a0b('0x199')]==0x0){var H=a['updated_system_instances'][B]['map'](function(K){return K[a0b('0xf')];})[a0b('0x189')](D[a0b('0xf')]);if(H<0x0){H=a[a0b('0x19f')][B][a0b('0x11e')](Object[a0b('0xb5')]({},D,{'status':0x2,'resume_on_step':a[a0b('0xc6')][a0b('0x1ac')][a0b('0x28')],'resume_context':v}))-0x1;}else{a[a0b('0x19f')][B][H]=Object[a0b('0xb5')]({},a[a0b('0x19f')][B][H],{'status':0x2,'resume_on_step':a[a0b('0xc6')]['stop'][a0b('0x28')],'resume_context':v});}a[a0b('0x17c')]['log'](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+A[a0b('0x119')]+a0b('0x2c1')+E+')\x20update\x20to\x20transition\x20status:'+a[a0b('0x19f')][B][a0b('0xbf')](function(K){return K[a0b('0x5c')]+'/'+K[a0b('0xf')]+'/'+K[a0b('0x1fd')];})[a0b('0x1a7')](','));G();var I=v[a0b('0x15f')][a0b('0x29c')](function(K){return K[a0b('0xf')]==z[a0b('0xf7')]['sn'];});var J=I?I[a0b('0x40')]:0x0;a[a0b('0x17c')]['log'](a[a0b('0x17c')]['LOG_LEVEL_MIN'],a0b('0x208')+B+'}\x20(stop'+E+a0b('0x114')+z[a0b('0xf7')][a0b('0x264')]+'/'+z['labels'][a0b('0x5c')]+'/'+z[a0b('0xf7')]['sn']+'\x20(counter='+parseInt(J)+0x1+'\x20entity='+C+')');async[a0b('0xe1')]([function(K){if(!x||a[a0b('0x1c0')](B,H,a[a0b('0xc6')][a0b('0x1ac')][a0b('0x1c9')])){a[a0b('0x221')][a0b('0x13f')](a0b('0x15f'),a0b('0x1ac'),C,B,z[a0b('0xf7')]['sn'],z['labels']['alertname'],parseInt(J)+0x1);a[a0b('0x277')](B,H,a[a0b('0xc6')][a0b('0x1ac')][a0b('0x1c9')]);}K();},function(K){if(!x||a['resume_here_on_interruption'](B,H,a[a0b('0xc6')][a0b('0x1ac')][a0b('0x42')])){a['logger']['log'](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+B+a0b('0x2c1')+E+a0b('0x1a')+z[a0b('0xf7')][a0b('0x3a')]+'/'+z[a0b('0xf7')][a0b('0x5c')]+'/'+z[a0b('0xf7')]['sn']);sapcontrol_operations$1[v[a0b('0x59')][a0b('0x225')]]['call'](F[a0b('0x167')],{},function(L){a['save_resume_step'](B,H,a['_resume_on_step'][a0b('0x1ac')][a0b('0x42')]);if(L){K(j);}else{K();}});}else K();},function(K){var L=0x14;var M=0x12c;var N=Math[a0b('0x1bf')](M/L);a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],'[PENDING]\x20{'+B+a0b('0x2c1')+E+a0b('0x1db')+M+'\x20sec:\x20'+z[a0b('0xf7')][a0b('0x3a')]+'/'+z[a0b('0xf7')]['hostname']+'/'+z[a0b('0xf7')]['sn']);m(F[a0b('0x167')],N,L*0x3e8,z['labels']['sn'],K);},function(K){if(!x||a[a0b('0x1c0')](B,H,a[a0b('0xc6')][a0b('0x1ac')][a0b('0x1f4')])){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+B+a0b('0x2c1')+E+')\x20triggered\x20EC2\x20instance:'+z[a0b('0xf7')][a0b('0x3a')]);a[a0b('0x215')]['stopEC2'](z[a0b('0xf7')][a0b('0x3a')],K);a[a0b('0x277')](B,H,a[a0b('0xc6')][a0b('0x1ac')]['ec2_stop_triggered']);}else K();}],function(K){if(K){a['logger'][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x209')+B+'}\x20(stop'+E+'):',K);switch(K){case j:a['updated_system_instances'][B][H]['status']=-0x1;a[a0b('0x19f')][B][H][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[j]};break;case l[k]:a[a0b('0x19f')][B][H][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][H][a0b('0x170')]={'occur_date':Date['now'](),'msg':l[k]};break;case a[a0b('0x215')]['_errors']['ec2_not_stopped']:a['updated_system_instances'][B][H][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][H][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[d]};break;}a[a0b('0x277')](B,H,-0x1);}else{var L=0x14;var M=0x12c;var N=Math[a0b('0x1bf')](M/L);a[a0b('0x19f')][B][H][a0b('0x1fd')]=0x0;p(a[a0b('0x215')],N,L*0x3e8,z[a0b('0xf7')]['ip_internal'],function(O){if(O){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x1cb')],'[COMPLETED]\x20{'+B+a0b('0x2c1')+E+a0b('0x3d')+z['labels'][a0b('0x3a')]+'/'+z['labels']['hostname']+'/'+z[a0b('0xf7')]['sn']+a0b('0x2bf'),l[O]);a[a0b('0x19f')][B][H][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[O]};}else{delete a[a0b('0x19f')][B][H]['error'];a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_MIN'],a0b('0x9c')+B+a0b('0x2c1')+E+a0b('0x164')+z[a0b('0xf7')][a0b('0x3a')]+'/'+z[a0b('0xf7')][a0b('0x5c')]+'/'+z[a0b('0xf7')]['sn']);}a[a0b('0x277')](B,H,-0x1);});}});}else{a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x15d')+B+a0b('0x2c1')+E+')\x20instance\x20is\x20already\x20being\x20stopped');G(a['_errors'][a0b('0xd1')]);}}],function(F){if(F){a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x2a7')],'[CHECKS\x20FAILED]\x20{'+B+a0b('0x2c1')+E+a0b('0x233')+A[a0b('0x3a')]+'/'+A[a0b('0xcb')]+':',F);switch(F){case a['_errors'][a0b('0xe0')]:case a[a0b('0x12a')][a0b('0x80')]:case a['_errors'][a0b('0xc5')]:case a[a0b('0x12a')][a0b('0x97')]:case a[a0b('0x12a')][a0b('0xd1')]:default:w(F);break;}}else{w(null,{'sending_sslcertifs':a[a0b('0x2d1')][A[a0b('0x119')]+''],'instances':a[a0b('0x19f')],'syst_id':A[a0b('0x119')]});}});}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x15d')+B+'}\x20(stop'+E+a0b('0x52'));w(a0b('0x91'));}}function s(v,w){var x=arguments[a0b('0x199')]>0x2&&arguments[0x2]!==undefined?arguments[0x2]:![];var y=arguments[a0b('0x199')]>0x3&&arguments[0x3]!==undefined?arguments[0x3]:-0x1;process[a0b('0x226')][a0b('0x133')]='0';var z=v[a0b('0x3c')];var A=v[a0b('0x136')];var B=z['labels'][a0b('0x105')];var C=z[a0b('0xf7')]['entity_id'];var D=x?'<-':'';if(a[a0b('0x19f')][B]==undefined||a[a0b('0x19f')][B][a0b('0x199')]==0x0){a[a0b('0x19f')][B]=_toConsumableArray(A[a0b('0x16f')]);}if(A){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+A[a0b('0x119')]+'}\x20(start'+D+a0b('0x11b')+A[a0b('0x3a')]+'-'+A[a0b('0xcb')]);async[a0b('0x237')]([function(E){async[a0b('0x171')]({'normal_instance_to_start':function F(G){if(x)G();else{async[a0b('0x237')]([function(H){var I=a[a0b('0x19f')][B]['filter'](function(J){return J[a0b('0x1fd')]==0x0&&J[a0b('0x1e0')][a0b('0x189')]('MESSAGESERVER')<0x0&&J[a0b('0x1e0')][a0b('0x189')]('ENQUE')<0x0;});if(I&&I[a0b('0x199')]>0x0){H();}else{a[a0b('0x17c')]['log'](a['logger'][a0b('0x2a7')],a0b('0x209')+A[a0b('0x119')]+a0b('0x101')+D+'):'+a[a0b('0x12a')][a0b('0x28b')]);H(a[a0b('0x12a')][a0b('0x28b')]);}},function(H){a[a0b('0x5d')](v[a0b('0x136')][a0b('0x119')],v[a0b('0xb1')],H);},function(H){var I=v[a0b('0x136')]['is_encrypted']?{'protocol':a0b('0x271'),'port_suffix':'14'}:{'protocol':'http','port_suffix':'13'};var J=I[a0b('0x45')]+a0b('0xbe')+(v[a0b('0x136')][a0b('0x3a')]||v['system']['hostname'])+':5'+v[a0b('0x136')]['sn']+I[a0b('0x1c4')]+'/';a[a0b('0x221')][a0b('0x4f')](v['system'][a0b('0x119')]);a['new_soap_client'](J,{'method':v[a0b('0x136')][a0b('0x87')],'options':[{'user':v[a0b('0x136')][a0b('0x10d')],'pwd':v[a0b('0x136')][a0b('0x21e')]},{'pfx':v[a0b('0x136')][a0b('0x87')]==0x1&&a[a0b('0x24e')]+'/'+v[a0b('0x136')]['syst_id']+a0b('0x212')}]},v,H);},function(H,I){H['soapcli'][a0b('0x179')]({},function(J,K){if(!J&&K&&K[a0b('0x105')]&&K[a0b('0x105')][a0b('0x25e')]){var L=K[a0b('0x105')][a0b('0x25e')]['map'](function(N){return{'hostname':N[a0b('0x5c')],'instancenr':(''+N[a0b('0xfd')])['padStart'](0x2,'0'),'features':N[a0b('0x1e0')][a0b('0x255')]('|'),'status':N[a0b('0x276')]==a[a0b('0x129')][a0b('0x2b5')]?0x1:N['dispstatus']==a[a0b('0x129')][a0b('0x118')]?-0x1:0x0};});var M=a[a0b('0x20b')](K['instance'][a0b('0x25e')]);if(M==a[a0b('0x129')][a0b('0x78')]||M==a[a0b('0x129')][a0b('0x269')]){I(a[a0b('0x12a')][a0b('0x80')],H[a0b('0x167')]);}else{a[a0b('0x221')][a0b('0x2d0')]('up',C,v[a0b('0x136')][a0b('0x119')],a[a0b('0x3b')],v[a0b('0x136')][a0b('0xcb')],0x1);a[a0b('0xf0')][v[a0b('0x136')][a0b('0x119')]]=0x0;I(null,L);}}else{I(a['_errors'][a0b('0xc5')],J&&J[a0b('0x25')]+'\x20'+J[a0b('0x131')]);}});},function(H,I){var J={};H[a0b('0x0')](function(K){return K[a0b('0x1fd')]==0x1;})[a0b('0x27c')](function(K){J[K[a0b('0xf')]]=K[a0b('0x1e0')]['join']('|');});if(Object[a0b('0x227')](J)[a0b('0x0')](function(K){return!RegExp(a0b('0x236'))[a0b('0x1d9')](K)&&!RegExp(a0b('0xf2'))['test'](K);})[a0b('0x199')]<a[a0b('0x1fc')]){I(null,H);}else{I(a['_errors'][a0b('0x173')]);}},function(H,I){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_DEBUG'],'[PENDING]\x20{'+A['syst_id']+a0b('0x101')+D+a0b('0x2ac')+H[a0b('0xbf')](function(K){return K['hostname']+'/'+K['instancenr']+'/'+K[a0b('0x1fd')];})[a0b('0x1a7')](','));var J=a[a0b('0x19f')][B][a0b('0x0')](function(K){return K[a0b('0x1fd')]==0x0&&K[a0b('0x1e0')][a0b('0x189')](a0b('0x236'))<0x0&&K[a0b('0x1e0')]['indexOf'](a0b('0xf2'))<0x0;})['filter'](function(K){return H[a0b('0x0')](function(L){return L['status']==0x0;})[a0b('0xcd')](function(L){return L[a0b('0xf')]==K['instancenr'];})>=0x0||H['findIndex'](function(L){return L[a0b('0xf')]==K[a0b('0xf')];})<0x0;});a[a0b('0x17c')]['log'](a[a0b('0x17c')][a0b('0x139')],a0b('0x208')+A[a0b('0x119')]+a0b('0x101')+D+a0b('0x149')+J[a0b('0xbf')](function(K){return K[a0b('0x5c')]+'/'+K['instancenr']+'/'+K[a0b('0x1fd')];})[a0b('0x1a7')](','));if(J&&J['length']>0x0){I(null,J[0x0]);}else{I(a[a0b('0x12a')][a0b('0x28b')]);}}],function(H,I){if(H){G(H);}else G(null,I);});}},'resume_instance_to_start':function G(H){if(x)H(null,a[a0b('0x19f')][B][y]);else H();}},function(H,I){E(H,I[a0b('0x9b')]||I[a0b('0x100')]);});},function(E,F){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],'[PENDING]\x20{'+A['syst_id']+a0b('0x101')+D+a0b('0x14a')+a[a0b('0x19f')][B][a0b('0xbf')](function(J){return J[a0b('0x5c')]+'/'+J[a0b('0xf')]+'/'+J[a0b('0x1fd')];})[a0b('0x1a7')](','));if(x||a[a0b('0x19f')][B][a0b('0x0')](function(J){return J['status']==0x3;})['length']==0x0){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+A['syst_id']+a0b('0x101')+D+a0b('0x22')+z[a0b('0xf7')][a0b('0x264')]+'\x20on\x20'+E['hostname']+'/'+E[a0b('0x3a')]+'/'+E[a0b('0xf')]);var G=a[a0b('0x19f')][B]['map'](function(J){return J[a0b('0xf')];})[a0b('0x189')](E['instancenr']);if(G<0x0){G=a['updated_system_instances'][B][a0b('0x11e')](Object[a0b('0xb5')]({},E,{'status':0x3,'resume_on_step':a['_resume_on_step'][a0b('0x123')][a0b('0x28')],'resume_context':v}))-0x1;}else{a[a0b('0x19f')][B][G]=Object['assign']({},a[a0b('0x19f')][B][G],{'status':0x3,'resume_on_step':a[a0b('0xc6')]['start'][a0b('0x28')],'resume_context':v});}a[a0b('0x17c')]['log'](a['logger'][a0b('0x2d2')],a0b('0x208')+A[a0b('0x119')]+a0b('0x101')+D+a0b('0x98')+a[a0b('0x19f')][B]['map'](function(J){return J[a0b('0x5c')]+'/'+J[a0b('0xf')]+'/'+J[a0b('0x1fd')];})['join'](','));F();var H=v[a0b('0x15f')][a0b('0x29c')](function(J){return J['instancenr']==E[a0b('0xf')];});var I=H?H['value']:0x0;a['logger'][a0b('0x1cd')](a['logger'][a0b('0x1cb')],a0b('0x208')+A[a0b('0x119')]+'}\x20(start'+D+a0b('0x293')+B+'/'+E[a0b('0x3a')]+'/'+E['hostname']+'/'+E[a0b('0xf')]+a0b('0x2e')+(parseInt(I)+0x1)+a0b('0x33')+C+')');async[a0b('0xe1')]({'incr':function J(K){if(!x||a[a0b('0x1c0')](B,G,a[a0b('0xc6')][a0b('0x123')][a0b('0x1c9')])){a[a0b('0x221')][a0b('0x13f')](a0b('0x15f'),a0b('0x123'),C,B,E[a0b('0xf')],z[a0b('0xf7')][a0b('0x264')],parseInt(I)+0x1);a['save_resume_step'](B,G,a[a0b('0xc6')][a0b('0x123')]['counter_updated']);}K();},'start':function K(L){if(!x||a[a0b('0x1c0')](B,G,a[a0b('0xc6')][a0b('0x123')][a0b('0x1d2')])){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+A['syst_id']+a0b('0x101')+D+a0b('0x22d')+E['ip_internal']);a[a0b('0x215')][a0b('0x55')](E['ip_internal'],L);a[a0b('0x277')](B,G,a[a0b('0xc6')][a0b('0x123')][a0b('0x1d2')]);}else L();},'check':function L(M){var N=0x14;var O=0x12c;var P=Math[a0b('0x1bf')](O/N);a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x139')],a0b('0x208')+A['syst_id']+a0b('0x101')+D+a0b('0xb8')+O+a0b('0x8b')+E[a0b('0x3a')]);o(a[a0b('0x215')],P,N*0x3e8,E[a0b('0x3a')],M);},'soap':function M(N){var O=null;var P=A[a0b('0xc')]?{'protocol':'https','port_suffix':'14'}:{'protocol':a0b('0x278'),'port_suffix':'13'};var Q=P[a0b('0x45')]+a0b('0xbe')+(E[a0b('0x3a')]||E[a0b('0x5c')])+':5'+E[a0b('0xf')]+P[a0b('0x1c4')]+'/';if(A[a0b('0x87')]==0x1){O=a[a0b('0x24e')]+'/'+A['syst_id']+a0b('0x212');}a[a0b('0x1e2')](Q,{'method':A[a0b('0x87')],'options':[{'user':A[a0b('0x10d')],'pwd':A[a0b('0x21e')]},{'pfx':O}]},{},N);}},function(N,O){var P=O[a0b('0x162')];if(N||!P){a[a0b('0x17c')]['log'](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+A[a0b('0x119')]+'}\x20(start'+D+a0b('0x288'),N);switch(N){case a['aws_cli'][a0b('0x12a')][a0b('0x28f')]:a[a0b('0x19f')][B][G][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][G][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':a[a0b('0x215')][a0b('0x12a')][a0b('0x28f')]};break;case a['_errors'][a0b('0xe0')]:a[a0b('0x19f')][B][G][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][G][a0b('0x170')]={'occur_date':Date['now'](),'msg':a[a0b('0x12a')]['soap_client_init']};break;case c:case b:default:a[a0b('0x19f')][B][G][a0b('0x1fd')]=-0x1;a['updated_system_instances'][B][G][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[N]};break;}a['save_resume_step'](B,G,-0x1);}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x208')+A[a0b('0x119')]+a0b('0x101')+D+a0b('0x248')+E[a0b('0x5c')]+'/'+E[a0b('0x3a')]+'/'+E['instancenr']);async['series']([function(Q){if(!x||a['resume_here_on_interruption'](B,G,a[a0b('0xc6')]['start'][a0b('0x22f')])){sapcontrol_operations$1[v[a0b('0x59')][a0b('0x225')]]['call'](P[a0b('0x167')],{},function(R){a[a0b('0x277')](B,G,a[a0b('0xc6')][a0b('0x123')][a0b('0x22f')]);if(R!==undefined&&R!==null){if(R[a0b('0x214')]){var S=R[a0b('0x214')][a0b('0x111')](/<faultstring>(.*?)<\/faultstring>/)&&R['body']['match'](/<faultstring>(.*?)<\/faultstring>/)[0x1];if(S==a0b('0x2cf')){a[a0b('0x19f')][B][G][a0b('0x1fd')]=0x1;}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x209')+A[a0b('0x119')]+a0b('0x101')+D+a0b('0x1eb')+S);a[a0b('0x19f')][B][G][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][G][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[h]+':'+S};}}else{a['logger'][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x209')+A[a0b('0x119')]+a0b('0x101')+D+a0b('0x1eb'),R);a['updated_system_instances'][B][G][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][G][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[h]};}a['save_resume_step'](B,G,-0x1);Q(R);}else{Q();}});}else Q();},function(Q){var R=0x14;var S=0x12c;var T=Math[a0b('0x1bf')](S/R);a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],a0b('0x208')+A[a0b('0x119')]+'}\x20(start'+D+a0b('0x156')+S+a0b('0x8b')+E[a0b('0x5c')]+'/'+E['ip_internal']+'/'+E[a0b('0xf')]);n(P[a0b('0x167')],T,R*0x3e8,E[a0b('0xf')],function(U){if(U){a['updated_system_instances'][B][G][a0b('0x1fd')]=-0x1;a[a0b('0x19f')][B][G][a0b('0x170')]={'occur_date':Date[a0b('0x1f8')](),'msg':l[i]};a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x1cb')],'[COMPLETED]\x20{'+A[a0b('0x119')]+'}\x20(start'+D+a0b('0x213')+B+'/'+E['hostname']+'/'+E[a0b('0x3a')]+'/'+E[a0b('0xf')]+'\x20error:',l[i]);q(P['soapcli'],A,E,G,0x1);}else{a[a0b('0x19f')][B][G][a0b('0x1fd')]=0x1;delete a[a0b('0x19f')][B][G]['error'];a['logger']['log'](a[a0b('0x17c')][a0b('0x1cb')],a0b('0x9c')+A[a0b('0x119')]+'}\x20(start'+D+a0b('0x109')+B+'/'+E[a0b('0x5c')]+'/'+E[a0b('0x3a')]+'/'+E[a0b('0xf')]);a[a0b('0x277')](B,G,-0x1);}Q();});}]);}});}else{F(a[a0b('0x12a')][a0b('0x22e')]);}}],function(E){if(E){a['logger'][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],'[CHECKS\x20FAILED]\x20{'+A[a0b('0x119')]+a0b('0x101')+D+')\x20on\x20'+A[a0b('0x3a')]+'-'+A[a0b('0xcb')]+':',E);w(E);}else{w(null,{'sending_sslcertifs':a['sending_sslcertifs'][A[a0b('0x119')]+''],'instances':a[a0b('0x19f')],'syst_id':A[a0b('0x119')]});}});}else{a[a0b('0x17c')][a0b('0x1cd')](a['logger']['LOG_LEVEL_ERROR'],a0b('0x1df')+D+a0b('0x1f3'));w(a0b('0x91'));}}function t(v,w){if(a[a0b('0x19f')][v[a0b('0x119')]]){var x=a[a0b('0x19f')][v[a0b('0x119')]][a0b('0x0')](function(y){return y[a0b('0xf')]==v['instance_nr'];})[0x0];if(x){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],a0b('0x208')+v[a0b('0x119')]+a0b('0xd')+x['hostname']+'/'+x[a0b('0xf')]+'/'+x[a0b('0x1fd')]);if(x['status']==-0x1){async[a0b('0x237')]([function(y){a[a0b('0x5d')](v['syst_id'],v[a0b('0xb1')],y);},function(y){var z={'protocol':a0b('0x271'),'port_suffix':'14'};var A=z[a0b('0x45')]+a0b('0xbe')+(x['ip_internal']||x[a0b('0x5c')])+':5'+v[a0b('0x27f')]+z[a0b('0x1c4')]+'/';a[a0b('0x1e2')](A,{'method':0x1,'options':[{},{'pfx':a[a0b('0x24e')]+'/'+v['syst_id']+'.pfx'}]},v,y);},function(y,z){y[a0b('0x167')]['GetSystemInstanceList']({},function(A,B){if(!A&&B&&B[a0b('0x105')]&&B[a0b('0x105')][a0b('0x25e')]){z(null,B['instance'][a0b('0x25e')][a0b('0x29c')](function(C){return(''+C[a0b('0xfd')])[a0b('0xea')](0x2,'0')==v[a0b('0x27f')];}));}else{z();}});}],function(y,z){if(y){w(a0b('0x2')+y);}else{w(null,{'sending_sslcertifs':a['sending_sslcertifs'][v[a0b('0x119')]+''],'instance':z?Object[a0b('0xb5')](x,{'status':z[a0b('0x276')]==a[a0b('0x129')][a0b('0x2b5')]?0x1:z[a0b('0x276')]==a[a0b('0x129')][a0b('0x118')]?-0x1:0x0},{'resume_context':null,'resume_on_step':null}):Object[a0b('0xb5')](x,{'resume_context':null,'resume_on_step':null}),'syst_id':v['syst_id']});}});}else{w(null,{'sending_sslcertifs':a[a0b('0x2d1')][v[a0b('0x119')]+''],'instance':x,'syst_id':v['syst_id']});}}else{a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x2a7')],a0b('0x209')+v['syst_id']+a0b('0xd9')+v['instance_nr']);w(a0b('0x63'));}}else{a[a0b('0x17c')]['log'](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x209')+v['syst_id']+a0b('0x86')+v['syst_id']);w('System\x20instance\x20not\x20active');}}function u(v){var w=null;var x={};var y=v['action']['parameters'][a0b('0x178')];switch(v['action'][a0b('0x225')]){case a0b('0x166'):var z=function A(B,C){var D=[];if(C[a0b('0x199')]>0x0){D[a0b('0x11e')]({'type':a0b('0x25d'),'text':{'type':'mrkdwn','text':a0b('0xa2')+B+'>'}});C['forEach'](function(E){D['push']({'type':a0b('0x25d'),'block_id':E[a0b('0x3e')],'fields':[{'type':a0b('0x5a'),'text':a0b('0x1a4')+E[a0b('0xf7')]['alertname']},{'type':'mrkdwn','text':a0b('0x71')+E[a0b('0xf7')]['sid']+(E[a0b('0xf7')][a0b('0x5c')]!=undefined&&E['labels'][a0b('0x5c')]!=''?'@'+E[a0b('0xf7')][a0b('0x5c')]:'')+(E[a0b('0xf7')]['sn']!=undefined&&E[a0b('0xf7')]['sn']!=''?'\x20['+E[a0b('0xf7')]['sn']+']':'')}]});});D[a0b('0x11e')]({'type':a0b('0x185')});}return D;};w={'text':v[a0b('0x267')]['length']+'\x20notification'+(v['alerts']['length']>0x1&&'s'||'')+'(\x20'+v['alerts'][a0b('0x0')](function(B){return B['status']=='firing';})[a0b('0x199')]+a0b('0x27b'),'blocks':z(a0b('0x2a2'),v[a0b('0x267')]['filter'](function(B){return B[a0b('0x1fd')]==a0b('0x1ea');}))};break;case a0b('0x16d'):w=Object[a0b('0xb5')](v,v[a0b('0x59')][a0b('0x193')]);x={'headers':{'x-api-key':a0b('0x181')}};break;}if(w!=null){axios[a0b('0xd6')](y,w,x)[a0b('0x263')](function(B){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2d2')],a0b('0x9c')+v[a0b('0x59')][a0b('0x225')]+a0b('0x280'));})['catch'](function(B){if(B){a['logger'][a0b('0x1cd')](a['logger'][a0b('0x2a7')],a0b('0x209')+v[a0b('0x59')][a0b('0x225')]+a0b('0xbb'),B);}});}}async[a0b('0xe1')]([function(v){a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_MIN'],a0b('0x259'));async['waterfall']([function(w){a[a0b('0x24c')][a0b('0x186')](a[a0b('0x17e')],w);},function(w,x){a[a0b('0x19f')]=JSON['parse'](w)&&JSON[a0b('0x287')](w)['root']||{};a[a0b('0x24c')][a0b('0x234')](a[a0b('0x17e')],'{\x22root\x22:{}}',x);}],function(w){if(w){a[a0b('0x17c')]['log'](a['logger'][a0b('0x2a7')],'redis\x20client\x20get/set\x20error:',w);}a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x1cb')],a0b('0xe6'),a[a0b('0x19f')]);v();});},function(v){if(a[a0b('0x19f')]&&Object[a0b('0xd8')](a[a0b('0x19f')])[a0b('0x199')]>0x0){v();Object['keys'](a[a0b('0x19f')])[a0b('0x27c')](function(w){async[a0b('0xc3')](a[a0b('0x19f')][w],function(x,y,z){if(x['resume_on_step']>0x0){a[a0b('0x17c')]['log'](a[a0b('0x17c')]['LOG_LEVEL_MIN'],a0b('0x73'),x[a0b('0x1fd')]);switch(x[a0b('0x1fd')]){case 0x2:a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_MIN'],a0b('0x8'),x);z();r(x['resume_context'],function(A,B){if(A){a[a0b('0x17c')][a0b('0x1cd')](a['logger'][a0b('0x2a7')],a0b('0x245'),A);}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],'(resume)\x20stop\x20OK:',B);}},!![],x['resume_on_step']);break;case 0x3:a[a0b('0x17c')]['log'](a[a0b('0x17c')][a0b('0x1cb')],a0b('0x7'),x);z();s(x[a0b('0x16a')],function(A,B){if(A){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x24f'),A);}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],'(resume)\x20start\x20OK:',B);}},!![],y);break;default:a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')]['LOG_LEVEL_ERROR'],a0b('0x220'),x[a0b('0x1fd')]);z();break;}}else{delete a[a0b('0x19f')][w][y];z();}},function(x){if(x)a[a0b('0x17c')]['log'](a['logger'][a0b('0x2a7')],a0b('0x6e'),x);a['updated_system_instances'][w]=a[a0b('0x19f')][w][a0b('0x0')](function(y){return y!=undefined;});});});}else v();},function(v){a['queue'][a0b('0x25f')](a['QUEUES']['webhook_exec'],a[a0b('0xe')],function(w,x){if(w[a0b('0x61')][a0b('0x59')]){switch(w[a0b('0x61')]['action'][a0b('0xf6')]){case 0x0:u(w[a0b('0x61')]);x();break;case 0x1:var y=w[a0b('0x61')][a0b('0x136')]?w[a0b('0x61')][a0b('0x136')]['syst_id']:w[a0b('0x61')][a0b('0x119')];a[a0b('0x5d')](y,w[a0b('0x61')][a0b('0xb1')],function(z){if(z){x(a0b('0x250'));}else{switch(w[a0b('0x61')]['action']['name']){case a0b('0x2a6'):a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],a0b('0x21d'),w[a0b('0x61')]);if(!w['data'][a0b('0x267')])x();else r(w[a0b('0x61')],x);break;case a0b('0x1a8'):a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],'start\x20action\x20data:',w['data']);if(!w[a0b('0x61')][a0b('0x267')])x();else s(w[a0b('0x61')],x);break;case'UpdateScalingInstance':t(w[a0b('0x61')],x);break;default:x();break;}}});break;default:a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x23e'),w[a0b('0x61')][a0b('0x59')][a0b('0xf6')]);x();break;}}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],'no\x20data\x20provided');x();}});v();}]);},'get_cloud_region':function get_cloud_region(a){var b=this;var c=0x1;switch(c){case 0x0:break;case 0x1:var d=a0b('0x130');axios[a0b('0x186')](d)[a0b('0x263')](function(f){if(f[a0b('0x61')]){b['logger']['log'](b[a0b('0x17c')][a0b('0x2d2')],a0b('0x241'),f[a0b('0x61')]);b[a0b('0x3b')]=f[a0b('0x61')][a0b('0x2bb')](0x0,-0x1);a();}else{b[a0b('0x17c')][a0b('0x1cd')](b['logger'][a0b('0x2a7')],'get_cloud_region\x20:\x20no\x20data');a();}})[a0b('0x44')](function(f){if(f){b[a0b('0x17c')][a0b('0x1cd')](b[a0b('0x17c')]['LOG_LEVEL_ERROR'],'get_cloud_region:',f);}a();});break;}},'deletePrometheus':function deletePrometheus(a,b,c,d,f){var g=this;if(g['conn_retries'][c]==undefined){g[a0b('0xf0')][c]=0x0;}g['logger'][a0b('0x1cd')](g['logger']['LOG_LEVEL_INFO'],a0b('0xd5')+c+a0b('0x198')+a+'\x27\x20timeserie\x20data,\x20set\x20status=0\x20\x27up\x27\x20timeserie');g['pushgtw_cli'][a0b('0x1d3')](a,{'instance':c});g[a0b('0x221')][a0b('0x29b')]('up',b,c,g[a0b('0x3b')],d,f[a0b('0xbf')](function(h){return Object['assign'](h,{'status':0x0});}));g[a0b('0xf0')][c]=0x0;},'new_soap_client':function new_soap_client(a,b,c,d){var f=this;try{soap[a0b('0xc4')](a+a0b('0x16b'),{'returnFault':!![]},function(g,h){if(g||!h){f[a0b('0x17c')][a0b('0x1cd')](f[a0b('0x17c')][a0b('0x139')],a0b('0xe7')+a+a0b('0x16b'));d(f[a0b('0x12a')][a0b('0xe0')],c);}else{switch(b[a0b('0x79')]){case 0x0:h[a0b('0x24d')](new soap[(a0b('0x6'))](b['options'][0x0][a0b('0x11a')],b[a0b('0xb6')][0x0][a0b('0x1e4')]));break;case 0x1:h[a0b('0x24d')](new soap[(a0b('0x113'))](b[a0b('0xb6')][0x1][a0b('0x27')],null,{'rejectUnauthorized':![]}));break;default:h['setSecurity'](new soap[(a0b('0x113'))](b['options'][0x1]['pfx'],null,{'rejectUnauthorized':![]}));}h['setEndpoint'](a+a0b('0x2be'));d(null,{'soapcli':h,'payload':c});}});}catch(g){if(g){f[a0b('0x17c')]['log'](f['logger']['LOG_LEVEL_ERROR'],a0b('0x21'),g);d(f[a0b('0x12a')][a0b('0xe0')],c);}}},'get_sap_instances':function get_sap_instances(a,b,c){var d=this;var f='https://'+a+':5'+b+'14';try{soap[a0b('0xc4')](f+a0b('0x75'),{'returnFault':!![]},function(g,h){if(g||!h){c(d[a0b('0x12a')][a0b('0xe0')],[]);}else{h[a0b('0x179')]({},function(i,j){if(!i&&j&&j[a0b('0x105')]&&j['instance'][a0b('0x25e')]){var k=j[a0b('0x105')][a0b('0x25e')][a0b('0xbf')](function(l){return{'hostname':l['hostname'],'instancenr':(''+l['instanceNr'])[a0b('0xea')](0x2,'0'),'features':l[a0b('0x1e0')][a0b('0x255')]('|'),'status':l[a0b('0x276')]==d[a0b('0x129')][a0b('0x2b5')]?0x1:l['dispstatus']==d[a0b('0x129')][a0b('0x118')]?-0x1:0x0};});c(null,k);}else{c(d['_errors'][a0b('0x200')],[]);}});}});}catch(g){if(g){d[a0b('0x17c')]['log'](d[a0b('0x17c')][a0b('0x2a7')],a0b('0x265'),g);}c(d[a0b('0x12a')]['soap_client_getinstance'],[]);}},'check_sapcontrol_listening':function check_sapcontrol_listening(a,b,c,d){var f=this;try{var g=http[a0b('0x186')]('http://'+a+':5'+b+a0b('0x17f'),{'timeout':0x3e8},function(h){f[a0b('0x17c')][a0b('0x1cd')](f[a0b('0x17c')]['LOG_LEVEL_DEBUG'],a0b('0xb2')+a+':'+b,h[a0b('0x1f1')]);if(h&&h['statusCode']==0xc8){var i=a0b('0xfa')+a+':5'+b+'14';soap[a0b('0xc4')](i+a0b('0x75'),{'returnFault':!![]},function(j,k){if(j||!k){d(![]);}else{k[a0b('0x179')]({},function(l,m){if(!l&&m&&m[a0b('0x105')]&&m['instance'][a0b('0x25e')]){d(m[a0b('0x105')]['item']['map'](function(n){return n[a0b('0x5c')];})[a0b('0x11d')](c));}else{d(![]);}},{'timeout':0x7d0});}});}});g['on'](a0b('0xec'),function(){g[a0b('0x252')]();});g['on'](a0b('0x170'),function(h){f['logger'][a0b('0x1cd')](f[a0b('0x17c')]['LOG_LEVEL_DEBUG'],a0b('0x161')+a+':'+b,h);d(![]);});}catch(h){if(h){f[a0b('0x17c')][a0b('0x1cd')](f[a0b('0x17c')][a0b('0x2a7')],'check_sapcontrol_listening:\x20SOAP\x20client\x20init\x20exception:',h);}d(![]);}},'update_sending_ssl':function update_sending_ssl(a,b,c){var d=this;if(a){fs$1[a0b('0x10b')](d[a0b('0x24e')]+'/'+a+a0b('0x212'),fs$1[a0b('0x192')],function(f){if(f){if(b){fs$1['writeFile'](d[a0b('0x24e')]+'/'+a+a0b('0x212'),new Buffer['from'](JSON['parse'](b)),function(g){d[a0b('0x2d1')][a]=!!g;c();});}else{d[a0b('0x17c')]['log'](d[a0b('0x17c')][a0b('0x2a7')],a0b('0x14')+a);d[a0b('0x2d1')][a]=!![];c(a0b('0x6a'));}}else{d[a0b('0x2d1')][a]=![];c();}});}else c(a0b('0x275'));},'check_system_status':function check_system_status(a){var b=this;var c=[];var d=![];for(var f=0x0,g=a[a0b('0x199')];f<g;f++){if(a[f][a0b('0x1e0')][a0b('0x255')]('|')[a0b('0x189')](a0b('0x236'))>=0x0||a[f][a0b('0x1e0')][a0b('0x255')]('|')['indexOf'](a0b('0xf2'))>=0x0){if(a[f][a0b('0x276')]!=b[a0b('0x129')][a0b('0x2b5')]){d=!![];break;}}else{c[a0b('0x11e')]({'instancenr':(''+a[f][a0b('0xfd')])[a0b('0xea')](0x2,'0'),'status':a[f]['dispstatus']==b[a0b('0x129')][a0b('0x2b5')]?0x1:0x0});}}if(d||c[a0b('0x298')](function(h,i){return h+i;},0x0)==0x0){return b['_sap_statuses'][a0b('0x78')];}return b[a0b('0x129')][a0b('0x2b5')];},'check_failed_conn':function check_failed_conn(a,b){var c=this;if(c[a0b('0xf0')][b[a0b('0x136')][a0b('0x119')]]<=c[a0b('0x229')]){setTimeout(function(){a[a0b('0x179')]({},function(d,f){if(d||!f||!f[a0b('0x105')]||!f[a0b('0x105')][a0b('0x25e')]){c['conn_retries'][b['system'][a0b('0x119')]]++;c[a0b('0xbd')](a,b);}else{var g=c[a0b('0x20b')](f['instance'][a0b('0x25e')]);if(g==c[a0b('0x129')]['red']||g==c['_sap_statuses'][a0b('0x269')]){c['conn_retries'][b[a0b('0x136')][a0b('0x119')]]++;c[a0b('0xbd')](a,b);}else c['pushgtw_cli']['pushUpInstance']('up',b[a0b('0x12d')],b[a0b('0x136')]['syst_id'],c['region'],b[a0b('0x136')][a0b('0xcb')],0x1);}});},0x4e20);}else{c[a0b('0xc8')]('scale',b['entity_id'],b[a0b('0x136')][a0b('0x119')],b[a0b('0x136')]['sid'],b['system'][a0b('0x16f')][a0b('0xbf')](function(d){return{'instancenr':d[a0b('0xf')],'status':0x0};}));c[a0b('0x221')][a0b('0x2d0')]('up',b[a0b('0x12d')],b[a0b('0x136')][a0b('0x119')],c[a0b('0x3b')],b[a0b('0x136')]['sid'],0x0);}},'debug':function debug(a){if(this['logger']){this[a0b('0x17c')][a0b('0x1c6')](a);}},'save_resume_step':function save_resume_step(a,b,c){var d=this;var f=c<0x0?{'resume_on_step':c,'resume_context':null}:{'resume_on_step':c};d['updated_system_instances'][a][b]=Object[a0b('0xb5')]({},d[a0b('0x19f')][a][b],f);},'resume_here_on_interruption':function resume_here_on_interruption(a,b,c){var d=this;if(d[a0b('0x19f')][a]&&d['updated_system_instances'][a][b]){return d[a0b('0x19f')][a][b][a0b('0x23f')]<c;}else return![];},'graceful_shutdown':function graceful_shutdown(){var a=this;if(a['updated_system_instances']&&Object[a0b('0xd8')](a[a0b('0x19f')])[a0b('0x199')]>0x0){a[a0b('0x24c')][a0b('0x234')](a[a0b('0x17e')],JSON[a0b('0x9a')]({'root':a[a0b('0x19f')]}),function(b){if(b){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x2a7')],a0b('0x89'),b);}else{a[a0b('0x17c')][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x139')],a0b('0x182'));}});}if(a[a0b('0x68')])a['queue'][a0b('0x8a')](0x1388,function(b){a['logger'][a0b('0x1cd')](a[a0b('0x17c')][a0b('0x1cb')],a0b('0xcc'),b||'');});if(a[a0b('0x24c')])a[a0b('0x24c')][a0b('0x1d7')]();}};function decrypt(a,b){var c=Buffer[a0b('0x1')](a[a0b('0xb4')](0x62,a[a0b('0x199')]-0xe),a0b('0x93'));var d=Buffer[a0b('0x1')](a[a0b('0xb4')](0x2,a[a0b('0x199')]-0x20-0xe),a0b('0x93'));var f=crypto['createDecipheriv']('aes-256-cbc',Buffer[a0b('0x1')](b['substring'](0x0,0x20)),c);var g=f[a0b('0xa5')](d);return Buffer[a0b('0x23c')]([g,f[a0b('0x2b2')]()])[a0b('0x10')]();}var scaledoer=ScaleDoer;try{var ScaleDoer$1=scaledoer,fs=fs$1,config_file=__dirname+a0b('0x2c9');if(!fs[a0b('0x1b6')](config_file)){console[a0b('0x170')]('E\x20missing\x20configuration\x20file',config_file);throw{'code':0x2};}else{var localconf=JSON[a0b('0x287')](fs[a0b('0x222')](config_file));var myenv=process[a0b('0x226')][a0b('0x14e')]||'production';var collectScaler=new ScaleDoer$1();collectScaler[a0b('0x1bc')](Object[a0b('0xb5')](localconf[myenv],{'dbindex':0x0}),collectScaler['collect']);process['on']('SIGUSR1',function(){console[a0b('0x1cd')](a0b('0x117'));collectScaler[a0b('0x1c6')](!![]);});process['on'](a0b('0x2c3'),function(){console[a0b('0x1cd')](a0b('0x2c8'));collectScaler[a0b('0x1c6')](![]);});}}catch(a0c){console[a0b('0x170')](a0b('0x1be'),a0c[a0b('0x299')]||a0c);process[a0b('0xdb')](0x1);}process['on'](a0b('0xdb'),function(a){return console['log'](a0b('0x19')+a);});
